(this.webpackJsonp=this.webpackJsonp||[]).push([[17],{1086:function(e,t,a){"use strict";var n=a(1),i=a.n(n),s=a(66),r=a.n(s),o=(a(1183),a(5761)),l=a(5749);function c(e){const{type:t,title:a}=e,n=t||"info";return i.a.createElement(o.a,{severity:n},a&&i.a.createElement(l.a,null,a),e.children)}c.propTypes={classes:r.a.shape({}).isRequired,type:r.a.string.isRequired},t.a=c},1088:function(e,t,a){"use strict";a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return l}));var n=a(1),i=a.n(n),s=a(66),r=a.n(s),o=a(32);const l={APIS:"/apis",SINGLE_API:"/apis/{apiId}",API_SWAGGER:"/apis/{apiId}/swagger",API_WSDL:"/apis/{apiId}/wsdl",API_GW_CONFIG:"/apis/{apiId}/gateway-config",API_THUMBNAIL:"/apis/{apiId}/thumbnail",API_COPY:"/apis/copy-api",API_LC_HISTORY:"/apis/{apiId}/lifecycle-history",API_CHANGE_LC:"/apis/change-lifecycle",API_LC:"/apis/{apiId}/lifecycle",API_LC_PENDING_TASK:"/apis/{apiId}/lifecycle/lifecycle-pending-task",API_DEF:"/apis/import-definition",API_VALIDATE_DEF:"/apis/validate-definition",API_DOCS:"/apis/{apiId}/documents",API_DOC:"'/apis/{apiId}/documents/{documentId}'",API_DOC_CONTENT:"'/apis/{apiId}/documents/{documentId}/content'",APPLICATIONS:"/applications",SINGLE_APPLICATION:"/applications/{applicationId}",APPLICATION_GENERATE_KEYS:"/applications/{applicationId}/generate-keys",APPLICATION_GENERATE_KEY_TYPE:"/applications/{applicationId}/keys/{keyType}",EXPORT_APIS:"/export/apis",IMPORT_APIS:"/import/apis",SUBSCRIPTION:"/subscriptions",SINGLE_SUBSCRIPTION:"/subscriptions/{subscriptionId}",SUBSCRIPTIONS:"/subscriptions",BLOCK_SUBSCRIPTION:"/subscriptions/block-subscription:",UNBLOCK_SUBSCRIPTION:"/subscriptions/unblock-subscription",POLICIES:"'/policies/{tierLevel}'",POLICY:"'/policies/{tierLevel}/{tierName}'",ENDPOINTS:"/endpoints",ENDPOINT:"/endpoints/{endpointId}",LABLES:"/labels",WORKFLOW:"/workflows/{workflowReferenceId}",SERVICE_DISCOVERY:"/external-resources/services"},c={POST:"post",PUT:"put",GET:"get",DELETE:"delete"};class p extends i.a.Component{constructor(e){super(e),this.state={}}componentDidMount(){const{resourcePath:e,resourceMethod:t}=this.props,a=o.a.hasScopes(e,t);a&&a.then(e=>{this.setState({haveScope:e})})}render(){const{children:e}=this.props;return this.state.haveScope&&e||null}}p.propTypes={children:r.a.node.isRequired,resourcePath:r.a.string.isRequired,resourceMethod:r.a.string.isRequired}},1188:function(e,t,a){"use strict";var n=a(1542),i=a.n(n);const s={number:i.a.number().integer(),url:i.a.string().uri().allow(""),ipAddress:i.a.string().ip({version:["ipv4","ipv6"],cidr:"optional"})};t.a=s},1292:function(e,t,a){"use strict";var n=a(1),i=a.n(n),s=a(66),r=a.n(s),o=a(1016),l=a(1087),c=a.n(l),p=a(1787),d=a(1229),u=a.n(d),m=a(1770),g=a(1777),h=a(1784),y=a(1788),f=a(306),b=a(1086),E=a(1293);function k(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class A extends i.a.Component{constructor(){super(...arguments),k(this,"state",{tokenCopied:!1}),k(this,"onCopy",e=>()=>{this.setState({[e]:!0});const t=this,a=e;setTimeout((function(){t.setState({[a]:!1})}),4e3)})}getTokeScopesString(e){return e?e.join(", "):""}render(){const{classes:e,token:t,consumerSecret:a,intl:n}=this.props,{tokenCopied:s}=this.state;return i.a.createElement("div",{className:e.root},a&&i.a.createElement("div",{className:e.secretWrapper},i.a.createElement(E.a,{secret:{consumerSecret:a}})),i.a.createElement(b.a,{type:"warn"},i.a.createElement(m.a,{variant:"h5",component:"h3"},t.isOauth&&i.a.createElement(f.a,{id:"Shared.AppsAndKeys.ViewToken.please.copy",defaultMessage:"Please Copy the Access Token"}),!t.isOauth&&i.a.createElement(f.a,{id:"Shared.AppsAndKeys.ViewToken.please.copy.apikey",defaultMessage:"Please Copy the API Key"})),i.a.createElement(m.a,{component:"p"},i.a.createElement(f.a,{id:"Shared.AppsAndKeys.ViewToken.please.copy.help",defaultMessage:"If the token type is JWT or API Key, please copy this generated token value as it will be displayed only for the current browser session. ( The token will not be visible in the UI after the page is refreshed. )"}))),i.a.createElement("div",{className:e.epWrapper},i.a.createElement("label",{for:"access-token",className:e.prodLabel},t.isOauth&&i.a.createElement(f.a,{id:"Shared.AppsAndKeys.ViewToken.access.token",defaultMessage:"Access Token"}),!t.isOauth&&i.a.createElement(f.a,{id:"Shared.AppsAndKeys.ViewToken.apikey",defaultMessage:"API Key"})),i.a.createElement(g.a,{defaultValue:t.accessToken,id:"access-token",multiline:!0,fullWidth:!0,rows:4,InputProps:{disableUnderline:!0,classes:{root:e.bootstrapRoot,input:e.bootstrapInput}},InputLabelProps:{shrink:!0,className:e.bootstrapFormLabel}}),i.a.createElement(p.a,{title:s?n.formatMessage({defaultMessage:"Copied",id:"Shared.AppsAndKeys.ViewToken.copied"}):n.formatMessage({defaultMessage:"Copy to clipboard",id:"Shared.AppsAndKeys.ViewToken.copy.to.clipboard"}),placement:"right"},i.a.createElement(c.a,{text:t.accessToken,onCopy:this.onCopy("tokenCopied")},i.a.createElement(y.a,{"aria-label":"Copy to clipboard"},i.a.createElement(u.a,{color:"secondary"},"file_copy"))))),i.a.createElement(h.a,null,i.a.createElement(f.a,{id:"Shared.AppsAndKeys.ViewToken.info.first",defaultMessage:"Above token has a validity period of "}),t.validityTime,i.a.createElement(f.a,{id:"Shared.AppsAndKeys.ViewToken.info.second",defaultMessage:" seconds"}),t.isOauth&&i.a.createElement(f.a,{id:"Shared.AppsAndKeys.ViewToken.info.third",defaultMessage:" and the token has ("}),this.getTokeScopesString(t.tokenScopes),t.isOauth&&i.a.createElement(f.a,{id:"Shared.AppsAndKeys.ViewToken.info.fourth",defaultMessage:") scopes"}),"."))}}A.defaultProps={consumerSecret:null},A.propTypes={classes:r.a.shape({}).isRequired,token:r.a.shape({accessToken:r.a.string.isRequired,validityTime:r.a.number.isRequired,tokenScopes:r.a.array.isRequired}).isRequired,consumerSecret:r.a.string},t.a=Object(f.d)(Object(o.a)(e=>({bootstrapRoot:{padding:0,"label + &":{marginTop:e.spacing(3)},flex:1,marginRight:e.spacing(1)},bootstrapInput:{borderRadius:4,backgroundColor:e.custom.apiDetailPages.tokenTextBoxBackground,color:e.palette.getContrastText(e.custom.apiDetailPages.tokenTextBoxBackground),border:"1px solid #ced4da",padding:"5px 12px",height:100,width:"100%",transition:e.transitions.create(["border-color","box-shadow"]),fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),"&:focus":{borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"}},epWrapper:{display:"flex",marginTop:20},secretWrapper:{display:"flex",marginBottom:20},prodLabel:{lineHeight:"30px",marginRight:10,width:100,"text-align-last":"center",whiteSpace:"nowrap"},contentWrapper:{maxWidth:e.custom.contentAreaWidth-e.custom.leftMenu.width},root:{marginTop:20,"& span, & h5, & label, & td, & li, & div, & input":{color:e.palette.getContrastText(e.palette.background.paper)}}}))(A))},1293:function(e,t,a){"use strict";var n=a(1),i=a.n(n),s=a(66),r=a.n(s),o=a(1016),l=a(1087),c=a.n(l),p=a(1787),d=a(1229),u=a.n(d),m=a(1770),g=a(1777),h=a(306),y=a(1086);function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class b extends i.a.Component{constructor(){super(...arguments),f(this,"state",{secretCopied:!1}),f(this,"onCopy",e=>()=>{this.setState({[e]:!0});const t=this,a=e;setTimeout((function(){t.setState({[a]:!1})}),4e3)})}getTokeScopesString(e){return e?e.join(", "):""}render(){const{classes:e,secret:t,intl:a}=this.props,{secretCopied:n}=this.state;return i.a.createElement("div",{className:e.root},i.a.createElement(y.a,{type:"warn"},i.a.createElement(m.a,{variant:"h5",component:"h3"},i.a.createElement(h.a,{id:"Shared.AppsAndKeys.ViewSecret.please.copy.secret",defaultMessage:"Please Copy the Consumer Secret"})),i.a.createElement(m.a,{component:"p"},i.a.createElement(h.a,{id:"Shared.AppsAndKeys.ViewSecret.please.copy.secret.help",defaultMessage:"Please make a note of the regenerated consumer \n                            secret value as it will be displayed only once."}))),i.a.createElement("div",{className:e.epWrapper},i.a.createElement(m.a,{className:e.prodLabel},i.a.createElement(h.a,{id:"Shared.AppsAndKeys.ViewSecret.consumer.secret",defaultMessage:"Consumer Secret"})),i.a.createElement(g.a,{defaultValue:t.consumerSecret,id:"bootstrap-input",multiline:!0,rows:4,InputProps:{disableUnderline:!0,classes:{root:e.bootstrapRoot,input:e.bootstrapInput}},InputLabelProps:{shrink:!0,className:e.bootstrapFormLabel}}),i.a.createElement(p.a,{title:n?a.formatMessage({defaultMessage:"Copied",id:"Shared.AppsAndKeys.ViewSecret.copied"}):a.formatMessage({defaultMessage:"Copy to clipboard",id:"Shared.AppsAndKeys.ViewSecret.copy.to.clipboard"}),placement:"right"},i.a.createElement(c.a,{text:t.consumerSecret,onCopy:this.onCopy("secretCopied")},i.a.createElement(u.a,{color:"secondary"},"file_copy")))))}}b.propTypes={classes:r.a.shape({}).isRequired,secret:r.a.shape({consumerSecret:r.a.string.isRequired}).isRequired},t.a=Object(h.d)(Object(o.a)(e=>({bootstrapRoot:{padding:0,"label + &":{marginTop:e.spacing(3)}},bootstrapInput:{borderRadius:4,backgroundColor:e.palette.common.white,border:"1px solid #ced4da",padding:"5px 12px",width:350,height:100,transition:e.transitions.create(["border-color","box-shadow"]),fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),"&:focus":{borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"}},epWrapper:{display:"flex",marginTop:20},prodLabel:{lineHeight:"30px",marginRight:10,width:100,"text-align-last":"center"},contentWrapper:{maxWidth:e.custom.contentAreaWidth-e.custom.leftMenu.width},root:{marginBottom:20}}))(b))},1294:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(120),i=a(130),s=a(7);class r extends i.a{constructor(){super(),this.client=(new n.a).getAPIClient(s.a.getEnvironment().label).client}getSubscriptions(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25;return this.client.then(n=>n.apis.Subscriptions.get_subscriptions({apiId:e,applicationId:t,limit:a}))}getSubscription(e){return this.client.then(t=>t.apis.Subscriptions.get_subscriptions__subscriptionId_({subscriptionId:e}))}getMonetizationInvoice(e){return this.client.then(t=>t.apis["API Monetization"].get_subscriptions__subscriptionId__usage({subscriptionId:e}))}deleteSubscription(e){return this.client.then(t=>t.apis.Subscriptions.delete_subscriptions__subscriptionId_({subscriptionId:e}))}updateSubscription(e,t,a,n,i,s){return this.client.then(r=>{let o=null;o={applicationId:e,apiId:t,subscriptionId:a,throttlingPolicy:n,status:i,requestedThrottlingPolicy:s};const l={subscriptionId:a};return r.apis.Subscriptions.put_subscriptions__subscriptionId_(l,{requestBody:o},{"Content-Type":"application/json"})})}}},1389:function(e,t,a){"use strict";var n=a(1),i=a.n(n),s=a(306),r=a(66),o=a.n(r),l=a(1016),c=a(1772),p=a(1771),d=a(1778),u=a(1770),m=a(2228),g=a(1785),h=a(2230);function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const b={PaperProps:{style:{maxHeight:224,width:250}},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null},E=e=>{const t=(t,a)=>{const{accessTokenRequest:n,updateAccessTokenRequest:i}=e,s=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){f(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},n),{target:r}=a;switch(t){case"scopesSelected":s.scopesSelected=r.value;break;case"keyType":s.keyType=r.value}i(s)},{classes:a,accessTokenRequest:n,subscriptionScopes:r}=e;return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.a,{margin:"normal",className:a.FormControlOdd,disabled:0===r.length},i.a.createElement(p.a,{htmlFor:"quota-helper",className:a.quotaHelp},i.a.createElement(s.a,{id:"Shared.AppsAndKeys.Tokens.when.you.generate.scopes",defaultMessage:"Scopes"})),i.a.createElement(h.a,{name:"scopesSelected",multiple:!0,value:n.scopesSelected,onChange:e=>t("scopesSelected",e),input:i.a.createElement(c.a,{id:"select-multiple-chip"}),renderValue:e=>i.a.createElement("div",{className:a.chips},e.map(e=>i.a.createElement(m.a,{key:e,label:e,className:a.chip}))),MenuProps:b},r.map(e=>i.a.createElement(g.a,{key:e,value:e},e))),i.a.createElement(u.a,{variant:"caption"},i.a.createElement(s.a,{id:"Shared.AppsAndKeys.Tokens.when.you.generate",defaultMessage:"When you generate access tokens to APIs protected by scope/s, you can select the scope/s and then generate the token for it. Scopes enable fine-grained access control to API resources based on user roles. You define scopes to an API resource. When a user invokes the API, his/her OAuth 2 bearer token cannot grant access to any API resource beyond its associated scopes."}))))};E.contextTypes={intl:o.a.shape({}).isRequired},t.a=Object(l.a)(e=>({FormControl:{padding:e.spacing(2),width:"100%"},FormControlOdd:{padding:e.spacing(2),backgroundColor:e.palette.background.paper,width:"100%"},quotaHelp:{position:"relative"},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:e.spacing(.25)}}))(E)},1539:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(1),i=a.n(n),s=a(1812),r=a(1055),o=a(5725),l=a(1770),c=a(306),p=a(14);const d=Object(s.a)(e=>({root:{flexGrow:1},messageWrapper:{marginTop:e.spacing(4),padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}));function u(){const e=d(),t=Object(r.a)();return i.a.createElement("div",{className:e.root},i.a.createElement(o.a,{container:!0,spacing:3},i.a.createElement(o.a,{item:!0,xs:12,className:e.messageWrapper},i.a.createElement("img",{alt:"API icon",src:p.app.context+t.custom.noApiImage,className:e.messageWrapper}),i.a.createElement(l.a,{id:"itest-no-apis",variant:"h5",gutterBottom:!0},i.a.createElement(c.a,{id:"Apis.Listing.NoApi.nodata.title",defaultMessage:"No APIs Available"})),i.a.createElement(l.a,{variant:"subtitle1",gutterBottom:!0},i.a.createElement(c.a,{id:"Apis.Listing.NoApi.nodata.content",defaultMessage:"There are no APIs to display right now."})))))}},1540:function(e,t,a){"use strict";var n=a(1),i=a.n(n),s=a(470),r=a(314),o=a(66),l=a.n(o),c=a(1029),p=a.n(c),d=a(1770),u=a(1812),m=a(1016),g=a(1787),h=a(1083);function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const f=Object(u.a)(e=>({arrow:{color:e.palette.common.black},tooltip:{backgroundColor:e.palette.common.black}}));function b(e){const t=f();return i.a.createElement(g.a,y({arrow:!0,classes:t},e))}function E(e){const[t,a]=Object(n.useState)(!1),{classes:r,theme:o,Icon:l,to:c,history:u,text:m,route:g,submenu:y,open:f,id:E}=e,k=g||m,{leftMenu:A}=o.custom,S=o.palette.getContrastText(A.background),{iconSize:T}=A,v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e||(e=window.location);const{pathname:t}=e,n=new RegExp("/"+k+"$","g"),i=new RegExp("/"+k+"/","g");t.match(n)||t.match(i)?a(!0):a(!1)};Object(n.useEffect)(()=>{v()},[]),u.listen(e=>{v(e)});let C="";return t&&!y?C=A.leftMenuActive:t&&y&&(C=A.leftMenuActiveSubmenu),i.a.createElement(b,{title:e.text,placement:"right"},i.a.createElement(s.a,{className:p()(r.leftLInk,{[r.leftLink_IconLeft]:"icon left"===A,[r.submenu]:y,selected:t},"leftLInk"),to:c,style:{backgroundColor:C},title:m,id:E},l?i.a.createElement("span",{className:g.replace(/[^a-zA-Z ]/g,"-")+"-left-menu-icon"},i.a.cloneElement(l,{className:p()(r.leftLink_Icon,{[r.noIcon]:"no icon"===A.style,[r.submenu]:y},"leftLink_Icon")})):i.a.createElement("span",{className:g.replace(/[^a-zA-Z ]/g,"-")+"-left-menu-icon"},i.a.createElement(h.a,{strokeColor:y?"#cccccc":S,width:y?T-10:T,height:y?T-10:T,icon:e.iconText,className:p()(r.leftLInk,{[r.noIcon]:"no icon"===A.style},"leftLink_Icon")})),f&&i.a.createElement(d.a,{className:p()(r.leftLInkText,{[r.leftLInkText_IconLeft]:"icon left"===A.style,[r.leftLInkText_NoText]:"no text"===A.style},r.leftLInkText_NoTextWhenSmall,"leftLInkText")},e.text),!f&&i.a.createElement(d.a,{className:p()({[r.leftLInkText_IconLeft]:"icon left"===A.style},r.leftLInkText_NoTextWhenSmall,"leftLInkText")})))}E.defaultProps={route:null,iconText:null,Icon:null,submenu:!1},E.propTypes={classes:l.a.shape({}).isRequired,theme:l.a.shape({}).isRequired,Icon:l.a.element,text:l.a.oneOfType([l.a.string,l.a.shape({})]).isRequired,to:l.a.string.isRequired,route:l.a.string,iconText:l.a.string,history:l.a.shape({location:l.a.shape({}).isRequired}).isRequired,submenu:l.a.bool},t.a=Object(r.h)(Object(m.a)(e=>({leftLInkText:{color:e.palette.getContrastText(e.custom.leftMenu.background),textTransform:"capitalize",width:"100%",textAlign:"left",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},leftLInkText_IconLeft:{paddingLeft:10},LeftMenu:{backgroundColor:e.custom.leftMenu.background,width:e.custom.leftMenu.width,textAlign:"center",fontFamily:e.typography.fontFamily,position:"absolute",bottom:0,left:0,top:0},leftLInk:{paddingTop:e.spacing(.6),paddingBottom:e.spacing(.6),paddingLeft:e.spacing(1),[e.breakpoints.down("sm")]:{paddingLeft:0},paddingRight:0,fontSize:e.typography.caption.fontSize,cursor:"pointer",textDecoration:"none",display:"flex",alignItems:"center",justifyContent:"center"},leftLink_Icon:{color:e.palette.getContrastText(e.custom.leftMenu.background),fontSize:e.custom.leftMenu.iconSize+"px"},leftLink_IconLeft:{display:"flex",alignItems:"center"},noIcon:{display:"none"},leftLInkText_NoText:{display:"none"},leftLInkText_NoTextWhenSmall:{[e.breakpoints.down("sm")]:{display:"none !important"}},submenu:{paddingLeft:12,[e.breakpoints.down("sm")]:{paddingLeft:0,color:e.palette.grey[500]}}}),{withTheme:!0})(E))},1543:function(e,t,a){"use strict";var n=a(1),i=a.n(n),s=a(5731),r=a(5735),o=a(5733),l=a(5734),c=a(5732),p=a(1819),d=a(5717),u=a(306),m=a(66),g=a.n(m);const h=e=>{const{handleAppDelete:t,isDeleteOpen:a,toggleDeleteConfirmation:n}=e;return i.a.createElement(s.a,{open:a,transition:d.a,role:"alertdialog"},i.a.createElement(r.a,null,i.a.createElement(u.a,{id:"Applications.Listing.DeleteConfirmation.dialog.title",defaultMessage:"Delete Application"})),i.a.createElement(o.a,null,i.a.createElement(l.a,null,i.a.createElement(u.a,{id:"Applications.Listing.DeleteConfirmation.dialog.text.description",defaultMessage:"The application will be removed"}))),i.a.createElement(c.a,null,i.a.createElement(p.a,{dense:!0,onClick:n},i.a.createElement(u.a,{id:"Applications.Listing.DeleteConfirmation.dialog.cancel",defaultMessage:"Cancel"})),i.a.createElement(p.a,{id:"itest-confirm-application-delete",size:"small",variant:"outlined",color:"primary",onClick:t},i.a.createElement(u.a,{id:"Applications.Listing.DeleteConfirmation.dialog,delete",defaultMessage:"Delete"}))))};h.propTypes={handleAppDelete:g.a.func.isRequired,isDeleteOpen:g.a.bool.isRequired,toggleDeleteConfirmation:g.a.func.isRequired},t.a=h},1740:function(e,t,a){"use strict";var n=a(1),i=a.n(n),s=a(66),r=a.n(s),o=a(1016),l=a(1819),c=a(1511),p=a(1770),d=a(306),u=a(1103),m=a(5701),g=a(5716),h=a(5760),y=a(5746),f=a(1027),b=a(5731),E=a(5732),k=a(5733),A=a(5735),S=a(1544),T=a.n(S),v=a(1088),C=a(1784),x=a(1778),M=a(5725),w=a(1777);function I(e){const{consumerKey:t,consumerSecret:a,onChange:n,isUserOwner:s,key:r,provideOAuthKeySecret:o,importDisabled:c}=e,u=Object(d.e)(),[m,g]=i.a.useState(!1),h=()=>{g(!1)};function y(e){n&&n(e)}return i.a.createElement(i.a.Fragment,null,i.a.createElement(l.a,{variant:"outlined",color:"secondary",startIcon:i.a.createElement(T.a,null),onClick:()=>{g(!0)},disabled:c},i.a.createElement(d.a,{defaultMessage:"Provide Existing OAuth Keys",id:"Shared.AppsAndKeys.ImportExternalApp.provide.oauth"})),i.a.createElement(b.a,{open:m,onClose:h,"aria-labelledby":"form-dialog-title"},i.a.createElement(A.a,{id:"form-dialog-title"},i.a.createElement(d.a,{defaultMessage:"Provide Existing OAuth Keys",id:"Shared.AppsAndKeys.ImportExternalApp.provide.oauth"})),i.a.createElement(k.a,null,i.a.createElement(M.a,{container:!0,spacing:3,direction:"column"},i.a.createElement(M.a,{item:!0,xs:12},i.a.createElement(w.a,{id:"provided-consumer-key",name:"providedConsumerKey",label:u.formatMessage({defaultMessage:"Consumer Key",id:"Shared.AppsAndKeys.ImportExternalApp.consumer.key"}),value:t,onChange:e=>y(e),margin:"normal",fullWidth:!0,disabled:!s,variant:"outlined"}),i.a.createElement(x.a,null,i.a.createElement(C.a,{id:"consumer-key-helper-text"},i.a.createElement(d.a,{id:"Shared.AppsAndKeys.ImportExternalApp.consumer.key.title",defaultMessage:"Consumer Key of the OAuth application"})))),i.a.createElement(M.a,{item:!0,xs:12},i.a.createElement(w.a,{id:"provided-consumer-secret",name:"providedConsumerSecret",label:u.formatMessage({defaultMessage:"Consumer Secret",id:"Shared.AppsAndKeys.ImportExternalApp.consumer.secret"}),value:a,onChange:e=>y(e),margin:"normal",fullWidth:!0,disabled:!s,variant:"outlined"}),i.a.createElement(x.a,null,i.a.createElement(C.a,{id:"consumer-secret-helper-text"},i.a.createElement(d.a,{id:"Shared.AppsAndKeys.ImportExternalApp.consumer.secret.of.application",defaultMessage:"Consumer Secret of the OAuth application"})))))),i.a.createElement(E.a,null,i.a.createElement(l.a,{onClick:h,color:"primary"},i.a.createElement(d.a,{defaultMessage:"Cancel",id:"Shared.AppsAndKeys.ImportExternalApp.cancel"})),i.a.createElement(v.a,{resourcePath:v.c.APPLICATION_GENERATE_KEYS,resourceMethod:v.b.POST},s?i.a.createElement(l.a,{variant:"contained",color:"primary",onClick:()=>o()},r?i.a.createElement(d.a,{defaultMessage:"Update",id:"Shared.AppsAndKeys.ImportExternalApp.provide.oauth.button.update"}):i.a.createElement(d.a,{defaultMessage:"Provide",id:"Shared.AppsAndKeys.ImportExternalApp.provide.oauth.button.provide"})):i.a.createElement(i.a.Fragment,null,i.a.createElement(l.a,{variant:"contained",color:"primary",onClick:()=>o(),disabled:!s},r?i.a.createElement(d.a,{defaultMessage:"Update",id:"Shared.AppsAndKeys.ImportExternalApp.provide. oauth.button.update"}):i.a.createElement(d.a,{defaultMessage:"Provide",id:"Shared.AppsAndKeys.ImportExternalApp.provide.oauth.button.provide"})),i.a.createElement(p.a,{variant:"caption"},i.a.createElement(d.a,{defaultMessage:"Only owner can provide keys",id:"Shared.AppsAndKeys.ImportExternalApp.key.provide.user.owner"})))))))}I.propTypes={intl:r.a.shape({}).isRequired,onChange:r.a.func.isRequired,consumerKey:r.a.string,consumerSecret:r.a.string,isUserOwner:r.a.string,key:r.a.shape({}).isRequired,provideOAuthKeySecret:r.a.func.isRequired,importDisabled:r.a.bool},I.defaultProps={consumerKey:"",consumerSecret:"",isUserOwner:!1,importDisabled:!1};var O=I,P=a(1092),R=a(32),K=a(1086),D=a(1386),N=a.n(D),L=a(308),q=(a(1188),a(230)),j=a.n(q),B=a(2226),_=a(1851),U=a(1087),W=a.n(U),V=a(1787),F=a(1788),z=a(5715),G=a(1841),H=a(1843),J=a(1844),Y=a(1845),$=a(14),X=a.n($),Z=a(1085),Q=a(1771),ee=a(1786),te=a(2228),ae=a(1785),ne=a(2230),ie=a(1772),se=a(1513),re=a.n(se);const oe=e=>{const{classes:t,config:a,isUserOwner:s,previousValue:r,handleChange:o}=e,[l,u]=Object(n.useState)(r),m=Object(d.e)(),g=e=>{const{target:t}=e;u(t.value),o("additionalProperties",e)},h=e=>{let t=!1;return(""===e||Array.isArray(e)&&!e.length)&&(t=m.formatMessage({defaultMessage:"Required field is empty",id:"Shared.AppsAndKeys.KeyConfCiguration.required.empty.error"})),t},y=Object(d.c)({application_access_token_expiry_time:{id:"Shared.AppsAndKeys.AppConfiguration.application.access.token.expiry.time",defaultMessage:"Application Access Token Expiry Time"},user_access_token_expiry_time:{id:"Shared.AppsAndKeys.AppConfiguration.user.access.token.expiry.time",defaultMessage:"User Access Token Expiry Time"},refresh_token_expiry_time:{id:"Shared.AppsAndKeys.AppConfiguration.refresh.token.expiry.time",defaultMessage:"Refresh Token Expiry Time"},id_token_expiry_time:{id:"Shared.AppsAndKeys.AppConfiguration.id.token.expiry.time",defaultMessage:"Id Token Expiry Time"}}),f=Object(d.c)({application_access_token_expiry_time:{id:"Shared.AppsAndKeys.AppConfiguration.application.access.token.expiry.time.tooltip",defaultMessage:"Type Application Access Token Expiry Time"},user_access_token_expiry_time:{id:"Shared.AppsAndKeys.AppConfiguration.user.access.token.expiry.time.tooltip",defaultMessage:"Type User Access Token Expiry Time"},refresh_token_expiry_time:{id:"Shared.AppsAndKeys.AppConfiguration.refresh.token.expiry.time.tooltip",defaultMessage:"Type Refresh Token Expiry Time"},id_token_expiry_time:{id:"Shared.AppsAndKeys.AppConfiguration.id.token.expiry.time.tooltip",defaultMessage:"Type ID Token Expiry Time"}}),b=()=>y[a.name]?e.intl.formatMessage(y[a.name]):a.label,E=()=>f[a.name]?e.intl.formatMessage(f[a.name]):a.tooltip;return Object(n.useEffect)(()=>{u(r)},[r]),i.a.createElement(i.a.Fragment,null,i.a.createElement(Y.a,null,i.a.createElement(J.a,{component:"th",scope:"row",className:t.leftCol},b()),i.a.createElement(J.a,null,i.a.createElement(c.a,{maxWidth:600},"select"===a.type&&!1===a.multiple?i.a.createElement(w.a,{classes:{root:t.removeHelperPadding},fullWidth:!0,id:a.name,select:!0,label:b(),value:l,name:a.name,onChange:e=>g(e),helperText:a.required&&h(l)||E(),margin:"dense",variant:"outlined",disabled:!s,required:a.required,error:a.required&&h(l)},a.values.map(e=>i.a.createElement(ae.a,{key:e,value:e},e))):"select"===a.type&&!0===a.multiple&&Array.isArray(l)?i.a.createElement(i.a.Fragment,null,i.a.createElement(x.a,{variant:"outlined",className:t.formControl,fullWidth:!0,error:a.required&&h(l),required:a.required},i.a.createElement(Q.a,{id:"multi-select-label"},a.label),i.a.createElement(ne.a,{labelId:"multi-select-label",id:"multi-select-outlined",margin:"dense",displayEmpty:!0,name:a.name,multiple:!0,value:l,onChange:e=>g(e),input:i.a.createElement(ie.a,{id:"multi-select-outlined"}),renderValue:e=>i.a.createElement("div",{className:t.chips},e.map(e=>i.a.createElement(te.a,{key:e,label:e,className:t.chip}))),label:b()},a.values.map(e=>i.a.createElement(ae.a,{key:e,value:e},i.a.createElement(B.a,{checked:l.indexOf(e)>-1}),i.a.createElement(ee.a,{primary:e})))),i.a.createElement(C.a,null,a.required&&h(l)||E()))):"input"===a.type&&!0===a.multiple?i.a.createElement(i.a.Fragment,null,i.a.createElement(re.a,{value:l,fullWidth:!0,variant:"outlined",id:"multi-input-outlined",label:a.label,onAdd:e=>{const t={target:{name:a.name,value:[...l,e]}};g(t)},chipRenderer:(e,t)=>{let{value:n}=e;return i.a.createElement(te.a,{key:t,size:"small",label:n,onDelete:()=>{const e={target:{name:a.name,value:l.filter(e=>e!==n)}};g(e)},style:{margin:"0 8px 12px 0",float:"left"}})},style:{display:"flex"}}),i.a.createElement(p.a,{variant:"caption"},a.tooltip)):"input"===a.type?i.a.createElement(w.a,{classes:{root:t.removeHelperPadding},fullWidth:!0,id:a.name,label:b(),value:l,name:a.name,onChange:e=>g(e),helperText:a.required&&h(l)||E(),margin:"dense",variant:"outlined",disabled:!s,required:a.required,error:a.required&&h(l)}):i.a.createElement(w.a,{classes:{root:t.removeHelperPadding},fullWidth:!0,id:a.name,label:b(),value:l,name:a.name,onChange:e=>g(e),helperText:i.a.createElement(p.a,{variant:"caption"},E()),margin:"dense",variant:"outlined",disabled:!s})))))};oe.defaultProps={notFound:!1},oe.propTypes={classes:r.a.instanceOf(Object).isRequired,previousValue:r.a.any.isRequired,isUserOwner:r.a.bool.isRequired,handleChange:r.a.func.isRequired,config:r.a.any.isRequired,notFound:r.a.bool,intl:r.a.shape({formatMessage:r.a.func}).isRequired};var le=Object(d.d)(Object(o.a)(e=>({FormControl:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2),paddingLeft:0,width:"100%"},FormControlOdd:{padding:e.spacing(2),width:"100%"},button:{marginLeft:e.spacing(1)},quotaHelp:{position:"relative"},checkboxWrapper:{display:"flex"},checkboxWrapperColumn:{display:"flex",flexDirection:"row"},group:{flexDirection:"row"},removeHelperPadding:{"& p":{margin:"8px 0px"}}}))(oe));const ce=e=>{const[t,a]=Object(n.useState)(!1),[s,r]=Object(n.useState)(!1),o=Object(d.e)(),{classes:l,notFound:p,isUserOwner:u,keyManagerConfig:m,updateKeyRequest:g,keyRequest:h,updateHasError:y,callbackError:f}=e,{selectedGrantTypes:b,callbackUrl:E}=h,{applicationConfiguration:k,availableGrantTypes:A,description:S,additionalProperties:T,enableMapOAuthConsumerApps:v,enableOAuthAppCreation:x,enableTokenEncryption:M,enableTokenGeneration:I,id:O,name:P,revokeEndpoint:R,tokenEndpoint:K,type:D,userInfoEndpoint:N}=m,L=(e,t)=>{const a=j()(h),{target:n}=t;let i=[...a.selectedGrantTypes];switch(a.keyManager=P,e){case"callbackUrl":(i.includes("implicit")||i.includes("authorization_code"))&&(""===n.value?(y(!0),r(o.formatMessage({defaultMessage:"Call back URL can not be empty when Implicit or Authorization Code grants are selected.",id:"Shared.AppsAndKeys.KeyConfCiguration.Invalid.callback.empty.error.text"}))):(r(!1),y(!1))),a.callbackUrl=n.value;break;case"grantType":n.checked?i=[...i,n.id]:(i=a.selectedGrantTypes.filter(e=>e!==n.id),"implicit"!==n.id&&"authorization_code"!==n.id||(a.callbackUrl="",r(!1),y(!1))),a.selectedGrantTypes=i;break;case"additionalProperties":const e=a.additionalProperties;e[n.name]=n.value,a.additionalProperties=e;let t=!1;m.applicationConfiguration.forEach(e=>{let n=a.additionalProperties[e.name];e.required&&(console.log(n),(""===n||Array.isArray(n)&&!n.length)&&(t=!0))}),y(t)}g(a)},q=()=>{a(!0);setTimeout((function(){a(!1)}),2e3)},U=e=>{const{additionalProperties:t}=h;let a;a="input"!=e.type||e.multiple?!(!t||!t[e.name]):!(!t||!t[e.name]&&""!==t[e.name]);let n=e.default;return e.multiple&&"string"==typeof n&&""===n&&(n=[]),a?t[e.name]:n};if(p)return i.a.createElement(Z.a,null);const $=((e,t)=>{const a={};return e.forEach(e=>{a[e]=t[e],t[e]||(a[e]=e)}),a})(A,X.a.grantTypes);return i.a.createElement(i.a.Fragment,null,i.a.createElement(c.a,{display:"flex",alignItems:"center"},i.a.createElement(G.a,{className:l.table},i.a.createElement(H.a,null,K&&""!==K&&i.a.createElement(Y.a,null,i.a.createElement(J.a,{component:"th",scope:"row",className:l.leftCol},i.a.createElement(d.a,{defaultMessage:"Token Endpoint",id:"Shared.AppsAndKeys.KeyConfiguration.token.endpoint.label"})),i.a.createElement(J.a,null,K,i.a.createElement(V.a,{title:t?o.formatMessage({defaultMessage:"Copied",id:"Shared.AppsAndKeys.KeyConfiguration.copied"}):o.formatMessage({defaultMessage:"Copy to clipboard",id:"Shared.AppsAndKeys.KeyConfiguration.copy.to.clipboard"}),placement:"right",className:l.iconStyle},i.a.createElement(W.a,{text:K,onCopy:q},i.a.createElement(F.a,{"aria-label":"Copy to clipboard",classes:{root:l.iconButton}},i.a.createElement(z.a,{color:"secondary"},"file_copy")))))),R&&""!==R&&i.a.createElement(Y.a,null,i.a.createElement(J.a,{component:"th",scope:"row",className:l.leftCol},i.a.createElement(d.a,{defaultMessage:"Revoke Endpoint",id:"Shared.AppsAndKeys.KeyConfiguration.revoke.endpoint.label"})),i.a.createElement(J.a,null,R,i.a.createElement(V.a,{title:t?o.formatMessage({defaultMessage:"Copied",id:"Shared.AppsAndKeys.KeyConfiguration.copied"}):o.formatMessage({defaultMessage:"Copy to clipboard",id:"Shared.AppsAndKeys.KeyConfiguration.copy.to.clipboard"}),placement:"right",className:l.iconStyle},i.a.createElement(W.a,{text:R,onCopy:q},i.a.createElement(F.a,{"aria-label":"Copy to clipboard",classes:{root:l.iconButton}},i.a.createElement(z.a,{color:"secondary"},"file_copy")))))),N&&""!==N&&i.a.createElement(Y.a,null,i.a.createElement(J.a,{component:"th",scope:"row",className:l.leftCol},i.a.createElement(d.a,{defaultMessage:"User Info Endpoint",id:"Shared.AppsAndKeys.KeyConfiguration.userinfo.endpoint.label"})),i.a.createElement(J.a,null,N,i.a.createElement(V.a,{title:t?o.formatMessage({defaultMessage:"Copied",id:"Shared.AppsAndKeys.KeyConfiguration.copied"}):o.formatMessage({defaultMessage:"Copy to clipboard",id:"Shared.AppsAndKeys.KeyConfiguration.copy.to.clipboard"}),placement:"right",className:l.iconStyle},i.a.createElement(W.a,{text:N,onCopy:q},i.a.createElement(F.a,{"aria-label":"Copy to clipboard",classes:{root:l.iconButton}},i.a.createElement(z.a,{color:"secondary"},"file_copy")))))),i.a.createElement(Y.a,null,i.a.createElement(J.a,{component:"th",scope:"row",className:l.leftCol},i.a.createElement(d.a,{id:"Shared.AppsAndKeys.KeyConfiguration.grant.types",defaultMessage:"Grant Types"})),i.a.createElement(J.a,null,i.a.createElement("div",{className:l.checkboxWrapperColumn},Object.keys($).map(e=>{const t=$[e];return i.a.createElement(_.a,{control:i.a.createElement(B.a,{id:e,checked:!(!b||!b.includes(e)),onChange:e=>L("grantType",e),value:t,disabled:!u,color:"primary"}),label:t,key:e})})),i.a.createElement(C.a,null,i.a.createElement(d.a,{defaultMessage:"The application can use the following grant types to generate \n                            Access Tokens. Based on the application requirement,you can enable or disable \n                            grant types for this application.",id:"Shared.AppsAndKeys.KeyConfiguration.the.application.can"})))),i.a.createElement(Y.a,null,i.a.createElement(J.a,{component:"th",scope:"row",className:l.leftCol},i.a.createElement(d.a,{defaultMessage:"Callback URL",id:"Shared.AppsAndKeys.KeyConfiguration.callback.url.label"})),i.a.createElement(J.a,null,i.a.createElement(c.a,{maxWidth:600},i.a.createElement(w.a,{margin:"dense",id:"callbackURL",label:i.a.createElement(d.a,{defaultMessage:"Callback URL",id:"Shared.AppsAndKeys.KeyConfiguration.callback.url.label"}),value:E,name:"callbackURL",onChange:e=>L("callbackUrl",e),helperText:s||i.a.createElement(d.a,{defaultMessage:"Callback URL is a redirection URI in the client\n                            application which is used by the authorization server to send the\n                            client's user-agent (usually web browser) back after granting access.",id:"Shared.AppsAndKeys.KeyConfCiguration.callback.url.helper.text"}),variant:"outlined",disabled:!u||b&&!b.includes("authorization_code")&&!b.includes("implicit"),error:f,placeholder:o.formatMessage({defaultMessage:"http://url-to-webapp",id:"Shared.AppsAndKeys.KeyConfiguration.url.to.webapp"}),fullWidth:!0})))),k.length>0&&k.map(e=>i.a.createElement(le,{config:e,previousValue:U(e),isUserOwner:u,handleChange:L}))))))};ce.defaultProps={notFound:!1,validating:!1},ce.propTypes={classes:r.a.instanceOf(Object).isRequired,keyRequest:r.a.shape({callbackUrl:r.a.string,selectedGrantTypes:r.a.array}).isRequired,isUserOwner:r.a.bool.isRequired,isKeysAvailable:r.a.bool.isRequired,keyManagerConfig:r.a.any.isRequired,notFound:r.a.bool,setGenerateEnabled:r.a.func.isRequired,updateKeyRequest:r.a.func.isRequired,validating:r.a.bool};var pe=Object(o.a)(e=>({FormControl:{paddingTop:0,paddingBottom:e.spacing(2),paddingLeft:0,width:"100%"},FormControlOdd:{padding:e.spacing(2),width:"100%"},button:{marginLeft:e.spacing(1)},quotaHelp:{position:"relative"},checkboxWrapper:{display:"flex"},checkboxWrapperColumn:{display:"flex",flexWrap:"wrap",flexDirection:"row",whiteSpace:"nowrap"},group:{flexDirection:"row"},removeHelperPadding:{"& p":{margin:"8px 0px"}},iconStyle:{cursor:"pointer",padding:"0 0 0 10px"},iconButton:{padding:"0 0 0 10px","& .material-icons":{fontSize:16}},titleColumn:{width:150,fontWeight:500},keyInfoTable:{marginBottom:20,borderCollapse:"collapse","& td":{paddingBottom:5,borderBottom:"solid 1px #cccc"}},leftCol:{width:180}}))(ce),de=a(5697),ue=a(5734),me=a(1389),ge=a(1292),he=a(1293),ye=a(1812),fe=a(1229),be=a.n(fe);const Ee=Object(ye.a)(e=>({code:{padding:e.spacing(1),marginBottom:e.spacing(2),background:e.palette.grey[200],color:"#da2316",flex:1},command:{color:"#2b62b0"},encodeVisible:{cursor:"pointer",textDecoration:"underline"},contentWrapper:{display:"flex"}}));function ke(e){const t=Ee(),{keys:{consumerKey:a,consumerSecret:s},intl:r,keyType:o,keyManagerConfig:l}=e,c=window.btoa(a+":"+s),[u,m]=Object(n.useState)(!1),[g,h]=Object(n.useState)(!1),y=()=>{h(!0);setTimeout((function(){h(!1)}),4e3)},f=()=>{m(!u)};let{tokenEndpoint:b}=l;return i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a,null,i.a.createElement(d.a,{id:"Shared.AppsAndKeys.ViewCurl.help",defaultMessage:"The following cURL command shows how to generate an access token using the Password Grant type."})),i.a.createElement("div",{className:t.contentWrapper},i.a.createElement("div",{className:t.code},i.a.createElement("div",null,i.a.createElement("span",{className:t.command},"curl -k -X POST ")," ",b,i.a.createElement("span",{className:t.command}," -d ")," ",'"grant_type=password&username=Username&password=Password"'),i.a.createElement("div",null,i.a.createElement("span",{className:t.command}," -H "),'"Authorization: Basic',i.a.createElement("a",{onClick:f,className:t.encodeVisible},u?" "+c:" Base64(consumer-key:consumer-secret)"),'"')),i.a.createElement("div",null,i.a.createElement(V.a,{title:g?r.formatMessage({defaultMessage:"Copied",id:"Shared.AppsAndKeys.ViewCurl.copied"}):r.formatMessage({defaultMessage:"Copy to clipboard",id:"Shared.AppsAndKeys.ViewCurl.copy.to.clipboard"}),placement:"right"},i.a.createElement(W.a,{text:`curl -k -X POST ${b} -d "grant_type=password&username=Username&password=Password" -H "Authorization: Basic ${c}"`,onCopy:y},i.a.createElement(be.a,{color:"secondary"}))))),i.a.createElement(p.a,null,i.a.createElement(d.a,{id:"Shared.AppsAndKeys.ViewCurl.help.in.a.similar",defaultMessage:"In a similar manner, you can generate an access token using the\n                    Client Credentials grant type with the following cURL command."})),i.a.createElement("div",{className:t.contentWrapper},i.a.createElement("div",{className:t.code},i.a.createElement("div",null,i.a.createElement("span",{className:t.command},"curl -k -X POST ")," ",b,i.a.createElement("span",{className:t.command}," -d ")," ",'"grant_type=client_credentials"'),i.a.createElement("div",null,i.a.createElement("span",{className:t.command}," -H "),'"Authorization: Basic',i.a.createElement("a",{onClick:f,className:t.encodeVisible},u?" "+c:" Base64(consumer-key:consumer-secret)"),'"')),i.a.createElement("div",null,i.a.createElement(V.a,{title:g?r.formatMessage({defaultMessage:"Copied",id:"Shared.AppsAndKeys.ViewCurl.copied"}):r.formatMessage({defaultMessage:"Copy to clipboard",id:"Shared.AppsAndKeys.ViewCurl.copy.to.clipboard"}),placement:"right"},i.a.createElement(W.a,{text:`curl -k -X POST ${b} -d "grant_type=client_credentials" -H "Authorization: Basic ${c}"`,onCopy:y},i.a.createElement(be.a,{color:"secondary"}))))))}ke.propTypes={classes:r.a.shape({}).isRequired,keys:r.a.shape({}).isRequired,apis:r.a.shape({}).isRequired};var Ae=Object(d.d)(ke);function Se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Te(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(a),!0).forEach((function(t){ve(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Se(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ve(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ce extends i.a.Component{constructor(e){super(e),ve(this,"updateAccessTokenRequest",e=>{this.setState({accessTokenRequest:e})}),ve(this,"onCopy",e=>{this.setState({[e]:!0});const t=this,a=e;setTimeout(()=>{t.setState({[a]:!1})},4e3)}),ve(this,"handleShowHidden",e=>{this.setState({[e]:!this.state[e]})}),ve(this,"handleMouseDownGeneric",e=>{e.preventDefault()}),ve(this,"handleClickOpen",()=>{this.setState({open:!0,showToken:!1})}),ve(this,"handleSecretRegenerate",(e,t,a,n)=>{this.applicationPromise.then(i=>i.regenerateSecret(e,t,a,n)).then(e=>{console.log("consumer secret regenerated successfully "+e),this.setState({open:!0,showSecretGen:!0,secretGenResponse:e})}).catch(e=>{const{status:t}=e;404===t&&this.setState({notFound:!0})})}),ve(this,"handleClickOpenCurl",()=>{this.setState({open:!0,showCurl:!0})}),ve(this,"handleClose",()=>{this.setState({open:!1,showCurl:!1,isKeyJWT:!1,showSecretGen:!1})}),ve(this,"generateAccessToken",()=>{const{accessTokenRequest:e,isUpdating:t}=this.state,{selectedTab:a,intl:n}=this.props;this.setState({isUpdating:!0}),this.applicationPromise.then(t=>t.generateToken(a,e.keyType,e.timeout,e.scopesSelected)).then(e=>{console.log("token generated successfully "+e),this.setState({showToken:!0,tokenResponse:e,token:e.accessToken,tokenScopes:e.tokenScopes,tokenValidityTime:e.validityTime}),this.setState({isUpdating:!1})}).catch(e=>{const{status:t}=e;404===t?this.setState({notFound:!0}):400===t&&f.a.error(e.description||n.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.generate.bad.request.error",defaultMessage:"Error occurred when generating Access Token"})),this.setState({isUpdating:!1});const{response:a}=e;a&&a.body&&f.a.error(a.body.message)})}),ve(this,"viewKeyAndSecret",(e,t,a,n,s)=>{const{classes:r,intl:o,selectedApp:{hashEnabled:c},keyType:p}=this.props,{keyCopied:u,secretCopied:m,showCS:g}=this.state;return i.a.createElement(i.a.Fragment,null,i.a.createElement(M.a,{item:!0,xs:6},i.a.createElement("div",{className:r.copyWrapper},i.a.createElement(w.a,{id:"consumer-key",value:e,margin:"dense",label:i.a.createElement(d.a,{id:"Shared.AppsAndKeys.ViewKeys.consumer.key",defaultMessage:"Consumer Key"}),fullWidth:!0,variant:"outlined",InputProps:{readOnly:!0,endAdornment:i.a.createElement(de.a,{position:"end"},i.a.createElement(V.a,{title:u?o.formatMessage({defaultMessage:"Copied",id:"Shared.AppsAndKeys.ViewKeys.copied"}):o.formatMessage({defaultMessage:"Copy to clipboard",id:"Shared.AppsAndKeys.ViewKeys.copy.to"}),placement:"right"},i.a.createElement(W.a,{text:e,onCopy:()=>this.onCopy("keyCopied"),classes:{root:r.iconButton}},i.a.createElement(F.a,{"aria-label":"Copy to clipboard",classes:{root:r.iconButton}},i.a.createElement(z.a,{color:"secondary"},"file_copy")))))}})),i.a.createElement(x.a,null,i.a.createElement(C.a,{id:"consumer-key-helper-text"},i.a.createElement(d.a,{id:"Shared.AppsAndKeys.ViewKeys.consumer.key.title",defaultMessage:"Consumer Key of the application"})))),i.a.createElement(M.a,{item:!0,xs:6},i.a.createElement("div",{className:r.copyWrapper},c?i.a.createElement(l.a,{variant:"contained",color:"primary",className:r.button,onClick:()=>this.handleSecretRegenerate(e,p,a,n),disabled:!s},i.a.createElement(d.a,{defaultMessage:"Regenerate Consumer Secret",id:"Shared.AppsAndKeys.ViewKeys.consumer.secret.button.regenerate"})):i.a.createElement(w.a,{id:"consumer-secret",label:i.a.createElement(d.a,{id:"Shared.AppsAndKeys.ViewKeys.consumer.secret",defaultMessage:"Consumer Secret"}),type:g||!t?"text":"password",value:t,margin:"dense",fullWidth:!0,variant:"outlined",InputProps:{readOnly:!0,endAdornment:i.a.createElement(de.a,{position:"end"},i.a.createElement(F.a,{classes:{root:r.iconButton},onClick:()=>this.handleShowHidden("showCS"),onMouseDown:this.handleMouseDownGeneric,id:"visibility-toggle-btn"},g?i.a.createElement(z.a,null,"visibility_off"):i.a.createElement(z.a,null,"visibility")),i.a.createElement(V.a,{title:m?o.formatMessage({defaultMessage:"Copied",id:"Shared.AppsAndKeys.ViewKeys.copied"}):o.formatMessage({defaultMessage:"Copy to clipboard",id:"Shared.AppsAndKeys.ViewKeys.copy.to.clipboard"}),placement:"right"},i.a.createElement(W.a,{text:t,onCopy:()=>this.onCopy("secretCopied"),classes:{root:r.iconButton}},i.a.createElement(F.a,{"aria-label":"Copy to clipboard",classes:{root:r.iconButton}},i.a.createElement(z.a,{color:"secondary"},"file_copy")))))}})),!c&&i.a.createElement(x.a,null,i.a.createElement(C.a,{id:"consumer-secret-helper-text"},i.a.createElement(d.a,{id:"Shared.AppsAndKeys.ViewKeys.consumer.secret.of.application",defaultMessage:"Consumer Secret of the application"})))))});const{selectedApp:t}=this.props;let a;t&&(a=t.appId||t.value),this.applicationPromise=P.a.get(a),this.state={showCS:!1,open:!1,showToken:!1,showCurl:!1,showSecretGen:!1,accessTokenRequest:{timeout:3600,scopesSelected:[],keyType:""},subscriptionScopes:[],isUpdating:!1}}componentDidMount(){const{accessTokenRequest:e}=this.state,{keyType:t}=this.props;this.applicationPromise.then(a=>{a.getKeys().then(()=>{const n=Te(Te({},e),{},{keyType:t}),i=a.subscriptionScopes.map(e=>e.key);this.setState({accessTokenRequest:n,subscriptionScopes:i})})}).catch(e=>{const{status:t}=e;404===t&&this.setState({notFound:!0})})}componentDidUpdate(e){const{isKeyJWT:t}=this.props;t&&!e.isKeyJWT&&this.setState({isKeyJWT:!0})}render(){const{notFound:e,showToken:t,showCurl:a,showSecretGen:n,tokenCopied:s,open:r,token:o,tokenScopes:c,tokenValidityTime:g,accessTokenRequest:h,subscriptionScopes:y,isKeyJWT:f,tokenResponse:S,secretGenResponse:T,isUpdating:v}=this.state,{intl:C,keyType:x,classes:w,fullScreen:I,keys:O,selectedApp:{tokenType:P},selectedGrantTypes:R,isUserOwner:K,summary:D,selectedTab:N,hashEnabled:L,keyManagerConfig:q,initialToken:j,initialValidityTime:B,initialScopes:_}=this.props;if(e)return i.a.createElement(Z.a,null);if(!O)return i.a.createElement(u.a,null);const U=O.size>0&&O.get(N)&&O.get(N).keyType===x&&O.get(N),W=U&&U.consumerKey,V=U&&U.consumerSecret,F=U&&U.keyMappingId;let z,G,H,J;o?(z=o,G=c,H=g):O.get(N)&&O.get(N).keyType===x&&O.get(N).token&&(({accessToken:z}=O.get(N).token),G=O.get(N).token.tokenScopes,H=O.get(N).token.validityTime,J=O.get(N).token,J&&!J.accessToken&&(J.accessToken=j,J.validityTime=B,J.tokenScopes=_));let Y="Undefined";if(Y=a?"Get CURL to Generate Access Token":n?"Generate Consumer Secret":"Generate Access Token",!W)return i.a.createElement(p.a,{variant:"caption",gutterBottom:!0},"PRODUCTION"===x?"Production ":"Sandbox ",i.a.createElement(d.a,{id:"Shared.AppsAndKeys.ViewKeys.key.secret.title",defaultMessage:"Key and Secret is not generated for this application"}));if(D)return i.a.createElement(M.a,{container:!0,spacing:3},this.viewKeyAndSecret(W,V,F,N,K));const{supportedGrantTypes:$}=O.get(N);return W&&i.a.createElement("div",{className:w.inputWrapper},i.a.createElement(M.a,{container:!0,spacing:3},this.viewKeyAndSecret(W,V,F,N,K),i.a.createElement(M.a,{item:!0,xs:12},i.a.createElement(b.a,{fullScreen:I,open:r||f&&J,onClose:this.handleClose,"aria-labelledby":"responsive-dialog-title",className:w.dialogWrapper},i.a.createElement(A.a,{id:"responsive-dialog-title"},Y),i.a.createElement(k.a,null,!a&&!f&&!n&&i.a.createElement(ue.a,null,!t&&i.a.createElement(me.a,{updateAccessTokenRequest:this.updateAccessTokenRequest,accessTokenRequest:h,subscriptionScopes:y}),t&&i.a.createElement(ge.a,{token:Te(Te({},S),{},{isOauth:!0})})),a&&i.a.createElement(ue.a,null,i.a.createElement(Ae,{keys:{consumerKey:W,consumerSecret:V},keyType:x,keyManagerConfig:q})),n&&i.a.createElement(ue.a,null,i.a.createElement(he.a,{secret:Te({},T)})),f&&J&&L&&i.a.createElement(ue.a,null,i.a.createElement(ge.a,{token:Te(Te({},J),{},{isOauth:!0}),consumerSecret:V})),f&&J&&!L&&i.a.createElement(ue.a,null,i.a.createElement(ge.a,{token:Te(Te({},J),{},{isOauth:!0})}))),i.a.createElement(E.a,null,v&&i.a.createElement(m.a,{size:24}),!t&&!a&&!f&&!n&&i.a.createElement(l.a,{onClick:this.generateAccessToken,color:"primary",id:"generate-access-token-generate-btn",disabled:v},i.a.createElement(d.a,{id:"Shared.AppsAndKeys.ViewKeys.consumer.generate.btn",defaultMessage:"Generate"})),i.a.createElement(l.a,{onClick:this.handleClose,id:"generate-access-token-close-btn",color:"primary",autoFocus:!0},i.a.createElement(d.a,{id:"Shared.AppsAndKeys.ViewKeys.consumer.close.btn",defaultMessage:"Close"})))),!L&&i.a.createElement("div",{className:w.tokenSection},q.enableTokenGeneration&&$&&$.find(e=>e.includes("client_credentials"))&&i.a.createElement(l.a,{id:"generate-access-token-oauth2",variant:"outlined",size:"small",color:"primary",className:w.margin,onClick:this.handleClickOpen,disabled:!$.includes("client_credentials")},i.a.createElement(d.a,{id:"Shared.AppsAndKeys.ViewKeys.generate.access.token",defaultMessage:"Generate Access Token"})),i.a.createElement(l.a,{id:"curl-to-generate-access-token-btn",variant:"outlined",size:"small",color:"primary",className:w.margin,onClick:this.handleClickOpenCurl},i.a.createElement(d.a,{id:"Shared.AppsAndKeys.ViewKeys.curl.to.generate",defaultMessage:"CURL to Generate Access Token"}))),$&&!$.includes("client_credentials")&&!L&&i.a.createElement(p.a,{variant:"caption",gutterBottom:!0},i.a.createElement(d.a,{id:"Shared.AppsAndKeys.ViewKeys.client.enable.client.credentials",defaultMessage:"Enable Client Credentials grant type to generate test access tokens"})))))}}Ce.defaultProps={fullScreen:!1,summary:!1},Ce.propTypes={classes:r.a.shape({}).isRequired,fullScreen:r.a.bool,isKeyJWT:r.a.bool.isRequired,isUserOwner:r.a.bool.isRequired,summary:r.a.bool};var xe=Object(d.d)(Object(o.a)(e=>({button:{margin:e.spacing(3),color:e.palette.getContrastText(e.palette.background.default),display:"flex",alignItems:"center",fontSize:"11px",cursor:"pointer","& span":{paddingLeft:6,display:"inline-block"}},inputWrapper:{display:"flex",flexDirection:"row",alignItems:"center","& span, & h5, & label, & td, & li, & div, & input":{color:e.palette.getContrastText(e.palette.background.paper)}},copyWrapper:{display:"flex",flexDirection:"row",alignItems:"center"},tokenSection:{marginTop:0,marginBottom:e.spacing(.5)},margin:{marginRight:e.spacing(2)},dialogWrapper:{"& label,& h5, & label, & td, & li, & input, & h2, & p.MuiTypography-root,& p.MuiFormHelperText-root":{color:e.palette.getContrastText(e.palette.background.paper)}},iconButton:{padding:"0 0 0 10px","& .material-icons":{fontSize:16}}}))(Ce));var Me=Object(d.d)(Object(o.a)(e=>({root:{padding:e.spacing(3)}}))(e=>{const{classes:t,keyState:a,states:n,intl:s}=e;let r=s.formatMessage({defaultMessage:"A request to register this application has been sent and is pending approval.",id:"Shared.AppsAndKeys.WaitingForApproval.msg.ok"});return a===n.REJECTED&&(r=s.formatMessage({defaultMessage:"This application has been rejected from generating keys",id:"Shared.AppsAndKeys.WaitingForApproval.msg.reject"})),i.a.createElement("div",{className:t.root},r)}));const we=Object(ye.a)(e=>({root:{padding:e.spacing(3,2)},noKeysRoot:{backgroundImage:`url(${$.app.context+e.custom.overviewPage.keysBackground})`,height:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",minHeight:192,display:"flex",alignItems:"center"}}));function Ie(e){const t=we(),{keys:a,keyStates:n,key:s,selectedApp:r,keyType:o,isKeyJWT:l,isUserOwner:c,selectedTab:u}=e;if(a.size>0&&s&&"APPROVED"===s.keyState&&!s.consumerKey)return i.a.createElement("div",{className:t.emptyBox},i.a.createElement(p.a,{variant:"h5",component:"h3"},"Error"),i.a.createElement(p.a,{variant:"body2"},i.a.createElement(d.a,{id:"Shared.AppsAndKeys.TokenManagerSummary",defaultMessage:"Error! You have partially-created keys. Use `Clean Up` option."})));if(s&&(s.keyState===n.CREATED||s.keyState===n.REJECTED))return i.a.createElement("div",{className:t.emptyBox},i.a.createElement(p.a,{variant:"body2"},i.a.createElement(Me,{keyState:s.keyState,states:n})));const m=s?s.supportedGrantTypes:[];return i.a.createElement(xe,{selectedApp:r,selectedTab:u,keyType:o,keys:a,isKeyJWT:l,selectedGrantTypes:m,isUserOwner:c,summary:!0})}var Oe=a(166);function Pe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Re(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(a),!0).forEach((function(t){Ke(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Pe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Ke(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function De(){return(De=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Ne(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Le(e){const{children:t,value:a,index:n}=e,s=Ne(e,["children","value","index"]);return i.a.createElement("div",De({role:"tabpanel",hidden:a!==n,id:"nav-tabpanel-"+n,"aria-labelledby":"nav-tab-"+n},s),a===n&&i.a.createElement(c.a,{p:3},t))}Le.propTypes={children:r.a.node,index:r.a.any.isRequired,value:r.a.any.isRequired};Object(o.a)({indicator:{display:"flex",justifyContent:"center",backgroundColor:"transparent","& > span":{width:"98%",backgroundColor:"#ffffff"},transition:"none"},flexContainer:{borderBottom:"solid 1px #666",backgroundColor:"#efefef","& button:first-child":{borderLeft:"none"}}})(e=>i.a.createElement(h.a,De({},e,{TabIndicatorProps:{children:i.a.createElement("span",null)}}))),Object(o.a)(e=>({root:{textTransform:"none",color:"#666",fontWeight:e.typography.fontWeightRegular,fontSize:e.typography.pxToRem(15),marginRight:e.spacing(1),"&:focus":{opacity:1}},selected:{backgroundColor:"#fff",borderLeft:"solid 1px #666",borderRight:"solid 1px #666"}}))(e=>i.a.createElement(y.a,De({disableRipple:!0},e)));class qe extends i.a.Component{constructor(e){super(e),Ke(this,"handleTabChange",(e,t)=>{const{keys:a,keyManagers:n,keyRequest:i}=this.state,{keyType:s}=this.props,r=n.find(e=>e.name===t),{availableGrantTypes:o}=r;if(a.size>0&&a.get(t)&&a.get(t).keyType===s){const{callbackUrl:e,supportedGrantTypes:n,additionalProperties:s,mode:l}=a.get(t),c=Re(Re({},i),{},{callbackUrl:e,selectedGrantTypes:n||o.filter(e=>"authorization_code"!==e&&"implicit"!==e),additionalProperties:s||this.getDefaultAdditionalProperties(r)});this.setState({keyRequest:c,selectedTab:t,mode:l})}else this.setState({keyRequest:Re(Re({},i),{},{selectedGrantTypes:o.filter(e=>"authorization_code"!==e&&"implicit"!==e),additionalProperties:this.getDefaultAdditionalProperties(r)}),selectedTab:t})}),Ke(this,"loadApplication",()=>{const{keyType:e}=this.props;if(this.appId){const t=(new L.a).getKeyManagers(),a=this.application.then(t=>t.getKeys(e));Promise.all([t,a]).then(t=>{const a=[];if(t[0].body.list.map(e=>{e.enabled&&a.push(e)}),0===a.length)return void this.setState({keyManagers:[]});let{selectedTab:n}=this.state;!n&&a.length>0&&(n=a.find(e=>"Resident Key Manager"===e.name)?"Resident Key Manager":a[0].name);const i=a.find(e=>e.name===n),s=t[1],{keyRequest:r}=this.state;if(s.size>0&&s.get(n)&&s.get(n).keyType===e){const{callbackUrl:e,supportedGrantTypes:t,additionalProperties:o,mode:l}=s.get(n),c=Re(Re({},r),{},{callbackUrl:e||"",selectedGrantTypes:t||[],additionalProperties:o||this.getDefaultAdditionalProperties(i)});this.setState({keys:s,keyRequest:c,keyManagers:a,selectedTab:n,importDisabled:"MAPPED"===l||"CREATED"===l,mode:l})}else{const e=i.availableGrantTypes||[];this.setState({keys:s,keyRequest:Re(Re({},r),{},{selectedGrantTypes:e.filter(e=>"authorization_code"!==e&&"implicit"!==e),additionalProperties:this.getDefaultAdditionalProperties(i)}),keyManagers:a,selectedTab:n})}}).catch(e=>{404===e.status&&this.setState({notFound:!0})})}}),Ke(this,"setValidating",e=>{this.setState({validating:e})}),Ke(this,"updateHasError",e=>{this.setState({hasError:e})}),Ke(this,"toTitleCase",e=>e.replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()));const{selectedApp:t,keyType:a}=this.props;this.state={isLoading:!1,keys:null,isKeyJWT:!1,hasError:!1,initialToken:"",initialValidityTime:0,initialScopes:[],keyRequest:{keyType:a,selectedGrantTypes:null,callbackUrl:"",additionalProperties:{},keyManager:"",validityTime:3600,scopes:["default"]},keyManagers:null,selectedTab:null,providedConsumerKey:"",providedConsumerSecret:"",validating:!1,importDisabled:!1,mode:null},this.keyStates={COMPLETED:"COMPLETED",APPROVED:"APPROVED",CREATED:"CREATED",REJECTED:"REJECTED"},t&&(this.appId=t.appId||t.value,this.application=P.a.get(this.appId)),this.updateKeyRequest=this.updateKeyRequest.bind(this),this.generateKeys=this.generateKeys.bind(this),this.updateKeys=this.updateKeys.bind(this),this.cleanUpKeys=this.cleanUpKeys.bind(this),this.handleOnChangeProvidedOAuth=this.handleOnChangeProvidedOAuth.bind(this),this.provideOAuthKeySecret=this.provideOAuthKeySecret.bind(this)}componentDidMount(){this.loadApplication()}componentDidUpdate(e){const{keyType:t}=e,{keyType:a}=this.props;t!==a&&this.loadApplication()}getDefaultAdditionalProperties(e){const{availableGrantTypes:t,applicationConfiguration:a}=e,n={};return a.forEach(e=>{"select"===e.type&&e.multiple?n[e.name]=e.default&&e.default.split(",")||[]:n[e.name]=e.default||""}),n}updateKeyRequest(e){this.setState({keyRequest:e})}generateKeys(){const{keyRequest:e,keys:t,selectedTab:a}=this.state,{keyType:n,updateSubscriptionData:i,selectedApp:{tokenType:s,hashEnabled:r},intl:o}=this.props;!e.selectedGrantTypes.includes("implicit")&&!e.selectedGrantTypes.includes("authorization_code")||""!==e.callbackUrl?(this.setState({isLoading:!0}),this.application.then(t=>t.generateKeys(n,e.selectedGrantTypes,e.callbackUrl,e.additionalProperties,this.getKeyManagerIdentifier())).then(e=>{i&&i();const n=new Map([...t]),l="JWT"===s||r;n.set(a,e);const c=e.token?e.token.accessToken:"",p=e.token?e.token.validityTime:0,d=e.token?e.token.tokenScopes:[];this.setState({keys:n,isKeyJWT:l,initialToken:c,initialValidityTime:p,initialScopes:d}),e.keyState===this.keyStates.CREATED||e.keyState===this.keyStates.REJECTED?f.a.info(o.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.generate.success.blocked",defaultMessage:"Application keys generate request is currently pending approval by the site administrator."})):(f.a.info(o.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.generate.success",defaultMessage:"Application keys generated successfully"})),this.loadApplication())}).catch(e=>{const{status:t}=e;404===t?this.setState({notFound:!0}):500===t&&this.loadApplication(),f.a.error(`${o.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.generate.error",defaultMessage:"Error occurred when generating application keys"})}, ${e.response.body.message}`)}).finally(()=>this.setState({isLoading:!1}))):f.a.error(o.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.generate.error.callbackempty",defaultMessage:"Callback URL can not be empty when the Implicit or Application Code grant types selected"}))}updateKeys(){const{keys:e,keyRequest:t,selectedTab:a}=this.state,{keyType:n,intl:i}=this.props,s=e.get(a).keyType===n&&e.get(a);!t.selectedGrantTypes.includes("implicit")&&!t.selectedGrantTypes.includes("authorization_code")||""!==t.callbackUrl?(this.setState({isLoading:!0}),this.application.then(e=>e.updateKeys(s.tokenType,n,t.selectedGrantTypes,t.callbackUrl,s.consumerKey,s.consumerSecret,t.additionalProperties,a,s.keyMappingId)).then(t=>{const n=new Map([...e]);n.set(a,t),this.setState({keys:n}),f.a.info(i.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.update.success",defaultMessage:"Application keys updated successfully"}))}).catch(e=>{const{status:t}=e;404===t?this.setState({notFound:!0}):500===t&&this.loadApplication();const{response:a}=e;a&&a.body&&f.a.error(a.body.message)}).finally(()=>this.setState({isLoading:!1}))):f.a.error(i.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.generate.error.callbackempty",defaultMessage:"Callback URL can not be empty when the Implicit or Application Code grant types selected"}))}cleanUpKeys(e,t){const{keyType:a,intl:n}=this.props;this.application.then(n=>n.cleanUpKeys(a,e,t)).then(()=>{this.loadApplication(),f.a.info(n.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.cleanup.success",defaultMessage:"Application keys cleaned successfully"}))}).catch(e=>{const{status:t}=e;404===t&&this.setState({notFound:!0}),f.a.error(n.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.cleanup.error",defaultMessage:"Error occurred while cleaning up application keys"}))})}handleOnChangeProvidedOAuth(e){this.setState({[e.target.name]:e.target.value})}provideOAuthKeySecret(){const{keyType:e,intl:t}=this.props,{providedConsumerKey:a,providedConsumerSecret:n,selectedTab:i}=this.state;this.application.then(t=>t.provideKeys(e,a,n,i)).then(()=>{this.setState({providedConsumerKey:"",providedConsumerSecret:""}),this.loadApplication(),f.a.info(t.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.provide.success",defaultMessage:"Application keys provided successfully"}))}).catch(e=>{const{status:a}=e;404===a&&this.setState({notFound:!0}),f.a.error(t.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.provide.error",defaultMessage:"Error occurred when providing application keys"}))})}getKeyManagerDescription(){const{keyManagers:e,selectedTab:t}=this.state,a=e.filter(e=>e.name===t);return a&&1===a.length?a[0].description:""}getKeyManagerIdentifier(){const{keyManagers:e,selectedTab:t}=this.state,a=e.filter(e=>e.name===t);return a&&1===a.length?a[0].id:t}render(){const{classes:e,selectedApp:t,keyType:a,summary:n,selectedApp:{hashEnabled:s}}=this.props,{keys:r,keyRequest:o,isLoading:f,isKeyJWT:b,providedConsumerKey:E,providedConsumerSecret:k,selectedTab:A,keyManagers:S,validating:T,hasError:C,initialToken:x,initialValidityTime:M,initialScopes:w,importDisabled:I,mode:P}=this.state;if(S&&0===S.length)return i.a.createElement("div",{className:e.root},i.a.createElement(c.a,{mb:1},i.a.createElement(p.a,{variant:"h5",className:e.keyTitle},this.toTitleCase(a),i.a.createElement(d.a,{id:"Shared.AppsAndKeys.TokenManager.oauth2.keys.main.title",defaultMessage:" OAuth2 Keys"}))),i.a.createElement(K.a,{type:"info",className:e.dialogContainer},i.a.createElement(p.a,{variant:"h5",component:"h3"},i.a.createElement(d.a,{id:"Shared.AppsAndKeys.TokenManager.no.km",defaultMessage:"No Key Managers"})),i.a.createElement(p.a,{component:"p"},i.a.createElement(d.a,{id:"Shared.AppsAndKeys.TokenManager.no.km.content",defaultMessage:"No Key Managers active to generate keys."}))));if(!r||!A||!o.selectedGrantTypes)return i.a.createElement(u.a,null);const D=R.a.getUser().name;let L=!1;t.owner&&D.toLowerCase()===t.owner.toLowerCase()&&(L=!0);const q=r.size>0&&r.get(A)&&r.get(A).keyType===a?r.get(A):null;return n?r?i.a.createElement(Ie,{keys:r,key:q,keyStates:this.keyStates,selectedApp:t,selectedTab:A,keyType:a,isKeyJWT:b,isUserOwner:L}):i.a.createElement(Oe.a,null):q&&"APPROVED"===q.keyState&&!q.consumerKey?i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a,{className:e.cleanUpInfoText,variant:"subtitle1"},i.a.createElement(d.a,{id:"Shared.AppsAndKeys.TokenManager.cleanup.text",defaultMessage:"Error! You have partially-created keys. Please click `Clean Up` button and try again."})),i.a.createElement(l.a,{variant:"contained",color:"primary",className:e.cleanUpButton,onClick:()=>this.cleanUpKeys(A,r.get(A).keyMappingId)},i.a.createElement(d.a,{defaultMessage:"Clean up",id:"Shared.AppsAndKeys.TokenManager.cleanup"}))):!q||q.keyState!==this.keyStates.CREATED&&q.keyState!==this.keyStates.REJECTED?i.a.createElement(i.a.Fragment,null,S&&S.length>1&&i.a.createElement(g.a,{position:"static",color:"default"},i.a.createElement(h.a,{value:A,onChange:this.handleTabChange,indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto","aria-label":"scrollable auto tabs example"},S.map(e=>i.a.createElement(y.a,{label:e.displayName||e.name,value:e.name,disabled:!e.enabled,id:e.name.replace(/\s/g,"")})))),i.a.createElement("div",{className:e.root},i.a.createElement(c.a,{mb:1},i.a.createElement(p.a,{variant:"h5",className:e.keyTitle},this.toTitleCase(a),i.a.createElement(d.a,{id:"Shared.AppsAndKeys.TokenManager.oauth2.keys.main.title",defaultMessage:" OAuth2 Keys"}))),S&&S.length>0&&S.map(n=>i.a.createElement(Le,{value:A,index:n.name,className:e.tabPanel},i.a.createElement(c.a,{display:"flex",flexDirection:"row"},i.a.createElement(p.a,{className:e.heading,variant:"h6",component:"h6",className:e.subTitle},i.a.createElement(d.a,{defaultMessage:"Key and Secret",id:"Shared.AppsAndKeys.TokenManager.key.and.secret"})),n.enableMapOAuthConsumerApps&&i.a.createElement(c.a,{ml:2},i.a.createElement(O,{onChange:this.handleOnChangeProvidedOAuth,consumerKey:E,consumerSecret:k,isUserOwner:L,key:q,provideOAuthKeySecret:this.provideOAuthKeySecret,importDisabled:I}))),i.a.createElement(c.a,{m:2},i.a.createElement(xe,{initialToken:x,initialValidityTime:M,initialScopes:w,selectedApp:t,selectedTab:A,keyType:a,keys:r,selectedGrantTypes:o.selectedGrantTypes,isUserOwner:L,hashEnabled:n.enableTokenHashing||s,keyManagerConfig:n})),i.a.createElement(p.a,{className:e.heading,variant:"h6",component:"h6",className:e.subTitle},q?i.a.createElement(d.a,{defaultMessage:"Key Configurations",id:"Shared.AppsAndKeys.TokenManager.update.configuration"}):i.a.createElement(d.a,{defaultMessage:"Key Configuration",id:"Shared.AppsAndKeys.TokenManager.key.configuration"})),i.a.createElement(c.a,{m:2},i.a.createElement(pe,{keys:r,key:q,selectedApp:t,selectedTab:A,keyType:a,updateKeyRequest:this.updateKeyRequest,keyRequest:o,isUserOwner:L,isKeysAvailable:q,keyManagerConfig:n,validating:T,updateHasError:this.updateHasError,callbackError:C,setValidating:this.setValidating}),i.a.createElement("div",{className:e.generateWrapper},i.a.createElement(v.a,{resourcePath:v.c.APPLICATION_GENERATE_KEYS,resourceMethod:v.b.POST},L?i.a.createElement(c.a,{display:"flex"},i.a.createElement(l.a,{id:"generate-keys",variant:"contained",color:"primary",className:e.button,onClick:q?this.updateKeys:this.generateKeys,disabled:C||f||!n.enableOAuthAppCreation||P&&"MAPPED"===P},q?this.props.intl.formatMessage({id:"Shared.AppsAndKeys.TokenManager.update",defaultMessage:"Update"}):this.props.intl.formatMessage({id:"Shared.AppsAndKeys.TokenManager.generate.keys",defaultMessage:"Generate Keys"}),f&&i.a.createElement(m.a,{size:20})),!n.enableOAuthAppCreation&&i.a.createElement(c.a,{m:2,display:"flex"},i.a.createElement(N.a,{className:e.warningIcon}),i.a.createElement(p.a,{variant:"body1"},i.a.createElement(d.a,{defaultMessage:"Oauth app creation disabled for {kmName} key manager",id:"Shared.AppsAndKeys.TokenManager.app.creation.disable.warn",values:{kmName:n.displayName||n.name}})))):i.a.createElement(i.a.Fragment,null,i.a.createElement(l.a,{id:"generate-keys",variant:"contained",color:"primary",className:e.button,onClick:q?this.updateKeys:this.generateKeys,disabled:!L||f||!n.enableOAuthAppCreation},q?this.props.intl.formatMessage({id:"Shared.AppsAndKeys.TokenManager.update.keys",defaultMessage:"Update Keys"}):this.props.intl.formatMessage({id:"Shared.AppsAndKeys.TokenManager.generate.keys",defaultMessage:"Generate Keys"}),f&&i.a.createElement(m.a,{size:20})),i.a.createElement(p.a,{variant:"caption"},i.a.createElement(d.a,{defaultMessage:"Only owner can generate or update keys",id:"Shared.AppsAndKeys.TokenManager.key.and.user.owner"})))))))))):i.a.createElement(Me,{keyState:q.keyState,states:this.keyStates})}}Ke(qe,"contextType",Settings),qe.defaultProps={updateSubscriptionData:()=>{},summary:!1},qe.propTypes={classes:r.a.instanceOf(Object).isRequired,selectedApp:r.a.shape({tokenType:r.a.string.isRequired,appId:r.a.string,value:r.a.string,owner:r.a.string,hashEnabled:r.a.bool}).isRequired,keyType:r.a.string.isRequired,updateSubscriptionData:r.a.func,intl:r.a.shape({formatMessage:r.a.func}).isRequired,summary:r.a.bool};t.a=Object(d.d)(Object(o.a)(e=>({root:{padding:e.spacing(3),"& span, & h6, & label, & input":{color:e.palette.getContrastText(e.palette.background.paper)},"& .Mui-disabled span":{color:e.palette.grey[500]},"& input:disabled":{backgroundColor:e.palette.grey[100],color:e.palette.grey[500]},"& label>span:nth-child(1)":{color:"red"},position:"relative"},button:{marginLeft:0,"& span":{color:e.palette.getContrastText(e.palette.primary.main)}},cleanUpButton:{marginLeft:15},cleanUpInfoText:{padding:"10px 0px 10px 15px"},tokenSection:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},margin:{marginRight:e.spacing(2)},keyConfigWrapper:{flexDirection:"column",marginBottom:0},generateWrapper:{padding:"10px 0px",marginLeft:e.spacing(1.25)},paper:{background:"none",marginBottom:e.spacing(2),marginTop:e.spacing(2)},muiFormGroupRoot:{flexDirection:"row"},formControl:{},subTitle:{fontWeight:400},tabPanel:{paddingLeft:e.spacing(2),"& .MuiBox-root":{padding:0}},warningIcon:{color:"#ff9a00",fontSize:20,marginRight:10}}))(qe))},5755:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),s=a(66),r=a.n(s),o=a(470),l=a(314),c=a(2424),p=a.n(c),d=a(2423),u=a.n(d),m=a(1016),g=a(1770),h=a(306),y=a(308),f=a(14),b=a(1103),E=a(1085),k=a(1083),A=a(1540),S=a(1740),T=a(1819),v=a(5731),C=a(5732),x=a(5733),M=a(5734),w=a(5735),I=a(1852),O=a(5725),P=a(1292),R=a(1777),K=a(1778),D=a(1851),N=a(2226),L=a(1188);function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function j(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const B=e=>{const[t,a]=Object(n.useState)(!0),[s,r]=Object(n.useState)(!1),o=(t,n)=>{const{accessTokenRequest:i,updateAccessTokenRequest:s}=e,o=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(Object(a),!0).forEach((function(t){j(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},i),{target:l}=n;switch(t){case"infiniteValidity":a(l.checked),l.checked?o.timeout=-1:o.timeout=null;break;case"timeout":void 0===L.a.number.validate(l.value).error?(o.timeout=l.value,r(!1)):(o.timeout=null,r(!0))}s(o)},{classes:l,intl:c,accessTokenRequest:p}=e;return i.a.createElement(i.a.Fragment,null,i.a.createElement(K.a,{margin:"normal",className:l.FormControl},i.a.createElement(D.a,{control:i.a.createElement(N.a,{checked:t,onChange:e=>o("infiniteValidity",e),value:p.timeout,color:"primary"}),label:c.formatMessage({defaultMessage:"API Key with infinite validity period",id:"Shared.AppsAndKeys.Tokens.apikey.validity.period.label"})}),!t&&i.a.createElement(R.a,{required:!0,label:c.formatMessage({defaultMessage:"API Key validity period",id:"Shared.AppsAndKeys.Tokens.apikey"}),InputLabelProps:{shrink:!0},helperText:s?c.formatMessage({defaultMessage:"Please use a valid number for API Key expiry time",id:"Shared.AppsAndKeys.Tokens.apikey.set.validity.error"}):c.formatMessage({defaultMessage:"You can set an expiration period to determine the validity period of the token after generation. Set this as -1 to ensure that the apikey never expires.",id:"Shared.AppsAndKeys.Tokens.apikey.set.validity.help"}),fullWidth:!0,name:"timeout",onChange:e=>o("timeout",e),placeholder:c.formatMessage({defaultMessage:"Enter time in seconds",id:"Shared.AppsAndKeys.Tokens.apikey.enter.time"}),value:p.timeout,autoFocus:!0,className:l.inputText,error:s})))};B.contextTypes={intl:r.a.shape({}).isRequired};var _=Object(h.d)(Object(m.a)(e=>({FormControl:{"margin-bottom":"8px",width:"100%",padding:"0px 10px"}}))(B)),U=a(1788),W=a(1855),V=a.n(W),F=a(1787),z=a(5739),G=a(2417),H=a.n(G),J=a(5708),Y=a(5709),$=a(5740),X=a(1786),Z=a(1511),Q=a(5762),ee=a(1854);const te=e=>{const[t,a]=Object(n.useState)(!1),[s,r]=Object(n.useState)(!1),{intl:o,classes:l,newIP:c,updateNewIp:p,ipList:d,updateIpList:u,restrictSchema:m,updateRestrictSchema:y,newReferer:f,updateNewReferer:b,refererList:E,updateRefererList:k}=e;return i.a.createElement(i.a.Fragment,null,i.a.createElement(Z.a,{border:1,borderRadius:5,className:l.outterBox},i.a.createElement(g.a,{variant:"body1"},i.a.createElement(h.a,{defaultMessage:"Key Restrictions",id:"Shared.ApiKeyRestriction.key.restrictions"})),i.a.createElement(K.a,{component:"fieldset"},i.a.createElement(ee.a,{"aria-label":"API Key Restrictions",value:m,row:!0,onChange:e=>{y(e.target.value),u([]),k([]),p(""),b(""),a(!1),r(!1)}},i.a.createElement(D.a,{value:"none",control:i.a.createElement(Q.a,{color:"primary",id:"api-key-restriction-none"}),label:o.formatMessage({defaultMessage:"None",id:"Shared.ApiKeyRestriction.key.restrictions.none"}),labelPlacement:"end"}),i.a.createElement(D.a,{value:"ip",control:i.a.createElement(Q.a,{color:"primary",id:"api-key-restriction-ip"}),label:o.formatMessage({defaultMessage:"IP Addresses",id:"Shared.ApiKeyRestriction.key.restrictions.ip.addresses"}),labelPlacement:"end"}),i.a.createElement(D.a,{value:"referer",control:i.a.createElement(Q.a,{color:"primary",id:"api-key-restriction-referer"}),label:o.formatMessage({defaultMessage:"HTTP Referrers (Web Sites)",id:"Shared.ApiKeyRestriction.key.restrictions.http.referrers"}),labelPlacement:"end"}))),"ip"===m&&i.a.createElement(Z.a,{component:"div",id:"ipPanel"},i.a.createElement(O.a,{container:!0,direction:"row",spacing:0,justify:"left",alignItems:"left"},i.a.createElement(O.a,{item:!0,md:10,xs:10},i.a.createElement(R.a,{label:o.formatMessage({defaultMessage:"IP Address",id:"Shared.AppsAndKeys.Tokens.apiKeyRestriction.ip.address.label"}),value:c,onChange:e=>{p(e.target.value.trim()),""===e.target.value.trim()&&a(!1)},className:l.inputText,helperText:t?o.formatMessage({defaultMessage:"Invalid IP Address",id:"Shared.AppsAndKeys.Tokens.apiKeyRestriction.ip.validity.error"}):"",error:t,margin:"dense",variant:"outlined",placeholder:o.formatMessage({defaultMessage:"Enter IP Address",id:"Shared.AppsAndKeys.Tokens.apiKeyRestriction.enter.ip"}),fullWidth:!0,id:"ip-address-txt"})),i.a.createElement(O.a,{item:!0,md:2,xs:2},i.a.createElement("span",null,i.a.createElement(z.a,{className:l.Fab,size:"small",color:"primary","aria-label":"add",onClick:()=>{null!==c&&""!==c&&(L.a.ipAddress.validate(c).error?a(!0):(a(!1),d.push(c),u(d),p("")))},id:"ip-address-add-btn"},i.a.createElement(H.a,null))))),i.a.createElement(O.a,{container:!0,direction:"row",spacing:0,justify:"left",alignItems:"left",md:10,xs:10},d.length>0&&i.a.createElement(J.a,null,d.map((e,t)=>i.a.createElement(Y.a,null,i.a.createElement(X.a,{primary:e}),i.a.createElement($.a,null,i.a.createElement(F.a,{title:o.formatMessage({defaultMessage:"Delete task",id:"Shared.ApiKeyRestriction.key.restrictions.delete.task.tooltip"}),placement:"top"},i.a.createElement(U.a,{edge:"end","aria-label":"delete",onClick:()=>{return t=e,d.splice(d.indexOf(t),1),void u(d);var t}},i.a.createElement(V.a,null))))))))),"referer"===m&&i.a.createElement(Z.a,{component:"div",id:"refererPanel"},i.a.createElement(O.a,{container:!0,direction:"row",spacing:0,justify:"left",alignItems:"left"},i.a.createElement(O.a,{item:!0,md:10,xs:10},i.a.createElement(R.a,{label:o.formatMessage({defaultMessage:"Referer",id:"Shared.AppsAndKeys.Tokens.apiKeyRestriction.referer.label"}),value:f,onChange:e=>{b(e.target.value.trim()),""===e.target.value.trim()&&r(!1)},className:l.inputText,helperText:s?o.formatMessage({defaultMessage:"Invalid Http Referer",id:"Shared.AppsAndKeys.Tokens.apiKeyRestriction.referer.validity.error"}):"",error:s,margin:"dense",variant:"outlined",placeholder:o.formatMessage({defaultMessage:"Enter Http Referer",id:"Shared.AppsAndKeys.Tokens.apiKeyRestriction.enter.referer"}),fullWidth:!0,id:"referer-txt"})),i.a.createElement(O.a,{item:!0,md:2,xs:2},i.a.createElement("span",null,i.a.createElement(z.a,{size:"small",className:l.Fab,color:"primary","aria-label":"add",onClick:()=>{null!==f&&""!==f?(r(!1),E.push(f.trim()),k(E),b("")):r(!0)},id:"referer-add-btn"},i.a.createElement(H.a,null))))),i.a.createElement(O.a,{container:!0,direction:"row",spacing:0,justify:"left",alignItems:"left",md:10,xs:10},E.length>0&&i.a.createElement(J.a,null,E.map((e,t)=>i.a.createElement(Y.a,null,i.a.createElement(X.a,{primary:e}),i.a.createElement($.a,null,i.a.createElement(F.a,{title:o.formatMessage({defaultMessage:"Delete task",id:"Shared.ApiKeyRestriction.key.restrictions.delete.task.tooltip"}),placement:"top"},i.a.createElement(U.a,{edge:"end","aria-label":"delete",onClick:()=>{return t=e,E.splice(E.indexOf(t),1),void k(E);var t}},i.a.createElement(V.a,null)))))))))))};te.contextTypes={intl:r.a.shape({}).isRequired};var ae=Object(h.d)(Object(m.a)(e=>({FormControl:{"margin-bottom":e.spacing(1),width:"100%",padding:e.spacing(0,1)},outterBox:{margin:e.spacing(1),padding:e.spacing(1),borderColor:e.palette.text.secondary,marginLeft:20,borderColor:"#cccccc"},Fab:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}}))(te)),ne=a(2397),ie=a(2398),se=a(5701);function re(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class oe extends i.a.Component{constructor(e){super(e),re(this,"updateIpList",e=>{this.setState(()=>({ipList:e}))}),re(this,"updateNewIp",e=>{this.setState(()=>({newIP:e}))}),re(this,"updateRefererList",e=>{this.setState(()=>({refererList:e}))}),re(this,"updateNewReferer",e=>{this.setState(()=>({newReferer:e}))}),re(this,"updateRestrictSchema",e=>{this.setState(()=>({restrictSchema:e}))}),re(this,"handleClose",()=>{this.setState(()=>({open:!1,accessTokenRequest:{timeout:-1}}))}),re(this,"handleClickOpen",()=>{this.setState(()=>({open:!0,showToken:!1}))}),re(this,"updateAccessTokenRequest",e=>{this.setState(()=>({accessTokenRequest:e}))}),re(this,"generateKeys",()=>{const{selectedApp:e,keyType:t}=this.props;this.setState({isGenerating:!0});const a=new y.a,n={permittedIP:this.state.ipList.join(","),permittedReferer:this.state.refererList.join(",")};a.generateApiKey(e.appId,t,this.state.accessTokenRequest.timeout,n).then(e=>{console.log("Non empty response received");const t={accessToken:e.body.apikey,validityTime:e.body.validityTime,isOauth:!1};this.setState(()=>({apikey:t,open:!0,showToken:!0,ipList:[],refererList:[]})),this.setState({isGenerating:!1})}).catch(e=>{const{status:t}=e;404===t&&this.setState({notFound:!0,ipList:[],refererList:[]}),this.setState({isGenerating:!1})})});const{classes:t,selectedApp:a,keyType:n}=this.props;this.state={apikey:null,open:!1,showToken:!1,accessTokenRequest:{timeout:-1},ipList:[],newIP:null,restrictSchema:"none",refererList:[],newReferer:null,isGenerating:!1}}render(){const{classes:e,keyType:t}=this.props,{showToken:a,accessTokenRequest:n,open:s,apikey:r,newIP:o,ipList:l,newReferer:c,refererList:p,restrictSchema:d,isGenerating:u}=this.state;return i.a.createElement(O.a,{container:!0,direction:"row",spacing:0,justify:"left",alignItems:"left"},i.a.createElement(O.a,{item:!0,md:5,xs:12},i.a.createElement(ae,{updateNewIp:this.updateNewIp,newIP:o,updateIpList:this.updateIpList,ipList:l,restrictSchema:d,updateRestrictSchema:this.updateRestrictSchema,refererList:p,newReferer:c,updateNewReferer:this.updateNewReferer,updateRefererList:this.updateRefererList}),i.a.createElement(I.a,{row:!0,className:e.formGroup},i.a.createElement(T.a,{variant:"contained",color:"primary",onClick:this.handleClickOpen,className:e.generateKey,id:"generate-key-btn"},this.props.intl.formatMessage({id:"Shared.AppsAndKeys.ApiKeyManager.generate.key.btn",defaultMessage:"Generate Key"})),i.a.createElement(g.a,{component:"div",variant:"body2",className:e.formLabel},i.a.createElement(h.a,{id:"Shared.AppsAndKeys.ApiKeyManager.generate.key.help",defaultMessage:"Use the Generate Key button to generate a self-contained JWT token."}))),i.a.createElement(v.a,{open:s,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",className:e.dialog},i.a.createElement(w.a,{id:"responsive-dialog-title",className:e.dialogTitle},this.props.intl.formatMessage({id:"Shared.AppsAndKeys.ApiKeyManager.generate.api.key.btn",defaultMessage:"Generate API Key"})),i.a.createElement(x.a,{className:e.dialogContent},i.a.createElement(M.a,null,!a&&i.a.createElement(_,{updateAccessTokenRequest:this.updateAccessTokenRequest,accessTokenRequest:n}),a&&i.a.createElement(P.a,{token:r}))),i.a.createElement(C.a,null,!a&&i.a.createElement(T.a,{onClick:this.generateKeys,disabled:!n.timeout||u,color:"primary",variant:"contained",className:e.button,id:"generate-api-keys-btn"},i.a.createElement(h.a,{id:"Shared.AppsAndKeys.ViewKeys.consumer.generate.btn",defaultMessage:"Generate"}),u&&i.a.createElement(se.a,{size:24})),i.a.createElement(T.a,{onClick:this.handleClose,color:"primary",autoFocus:!0,id:"generate-api-keys-close-btn"},i.a.createElement(h.a,{id:"Shared.AppsAndKeys.ViewKeys.consumer.close.btn",defaultMessage:"Close"}))))),"ip"===d&&i.a.createElement(O.a,{item:!0,md:5,xs:12},i.a.createElement(ne.a,null,i.a.createElement(ie.a,null,i.a.createElement(g.a,{variant:"h5",component:"h2"},i.a.createElement(h.a,{id:"Shared.AppsAndKeys.ViewKeys.apiKeyRestriction.ip.example.heading",defaultMessage:"Examples of IP Addresses allowed"})),i.a.createElement(g.a,{variant:"body1",component:"p",className:e.cardBody},i.a.createElement(h.a,{id:"Shared.AppsAndKeys.ViewKeys.apiKeyRestriction.ip.example.content",defaultMessage:"Specify one IPv4 or IPv6 or a subnet using CIDR notation{linebreak}Examples: {ip1}, {ip2}, {ip3} or {ip4}",values:{linebreak:i.a.createElement("br",null),ip1:i.a.createElement("b",null,"192.168.1.2"),ip2:i.a.createElement("b",null,"152.12.0.0/13"),ip3:i.a.createElement("b",null,"2002:eb8::2"),ip4:i.a.createElement("b",null,"1001:ab8::/44")}}))))),"referer"===d&&i.a.createElement(O.a,{item:!0,md:5,xs:12},i.a.createElement(ne.a,null,i.a.createElement(ie.a,null,i.a.createElement(g.a,{variant:"h5",component:"h2"},i.a.createElement(h.a,{id:"Shared.AppsAndKeys.ViewKeys.apiKeyRestriction.referer.example.heading",defaultMessage:"Examples of URLs allowed to restrict websites"})),i.a.createElement(g.a,{variant:"body1",component:"p",className:e.cardBody},i.a.createElement(h.a,{id:"Shared.AppsAndKeys.ViewKeys.apiKeyRestriction.ip.example.content.message",defaultMessage:"A specific URL with an exact path: {url1}{linebreak}Any URL in a single subdomain, using a wildcard asterisk (*): {url2}{linebreak}Any subdomain or path URLs in a single domain, using wildcard asterisks (*): {url3}",values:{linebreak:i.a.createElement("br",null),url1:i.a.createElement("b",null,"www.example.com/path"),url2:i.a.createElement("b",null,"sub.example.com/*"),url3:i.a.createElement("b",null,"*.example.com/*")}}))))))}}oe.propTypes={classes:r.a.shape({}).isRequired,selectedApp:r.a.shape({tokenType:r.a.string.isRequired}).isRequired,keyType:r.a.string.isRequired,intl:r.a.shape({formatMessage:r.a.func}).isRequired};var le=Object(h.d)(Object(m.a)(e=>({root:{padding:e.spacing(3),"& span, & h5, & label, & input":{color:e.palette.getContrastText(e.palette.background.paper)}},dialog:{"& span, & h2, & label":{color:e.palette.getContrastText(e.palette.background.paper)}},button:{"& span":{color:e.palette.getContrastText(e.palette.primary.main)}},tokenSection:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},margin:{marginRight:e.spacing(2)},keyConfigWrapper:{flexDirection:"column",marginBottom:0},generateWrapper:{padding:"10px","margin-inline-end":"auto"},paper:{display:"flex",marginTop:e.spacing(2),marginBottom:e.spacing(2),marginLeft:e.spacing(10)},dialogTitle:{padding:"24px 24px 0px"},dialogContent:{padding:"0 24px 0px"},formGroup:{padding:"20px"},gridWrapper:{"align-self":"center"},keyTitle:{textTransform:"capitalize"},cardBody:{padding:e.spacing(1),lineHeight:2},generateKey:{"& span":{color:e.palette.getContrastText(e.palette.primary.main)}}}))(oe)),ce=a(1029),pe=a.n(ce),de=a(1783),ue=a(317),me=a(1841),ge=a(1843),he=a(1844),ye=a(1846),fe=a(1845),be=a(5715),Ee=a(1773),ke=a(2420),Ae=a.n(ke),Se=a(1535),Te=a.n(Se),ve=a(166),Ce=a(1027),xe=a(1387),Me=a.n(xe),we=a(1539),Ie=a(2230),Oe=a(1785),Pe=a(1088);class Re extends i.a.Component{constructor(e){super(e),this.state={selectedPolicy:null}}componentDidMount(){const{policies:e}=this.props;this.setState({selectedPolicy:e[0]})}render(){const{classes:e,policies:t,apiId:a,handleSubscribe:n,applicationId:s}=this.props,{selectedPolicy:r}=this.state;return t&&i.a.createElement("div",{className:e.root},i.a.createElement(Ie.a,{className:e.select,value:r,onChange:e=>{this.setState({selectedPolicy:e.target.value})},id:"policy-select"},t.map(e=>i.a.createElement(Oe.a,{value:e,key:e,id:"policy-select-"+e},e))),i.a.createElement(Pe.a,{resourcePath:Pe.c.SUBSCRIPTIONS,resourceMethod:Pe.b.POST},i.a.createElement(T.a,{variant:"contained",size:"small",className:e.buttonGap,onClick:()=>{n(s,a,r)},id:"policy-subscribe-btn-"+a},i.a.createElement(h.a,{defaultMessage:"Subscribe",id:"Apis.Listing.SubscriptionPolicySelect.subscribe"}))))}}Re.propTypes={classes:r.a.shape({}).isRequired,policies:r.a.shape({}).isRequired,apiId:r.a.string.isRequired,handleSubscribe:r.a.func.isRequired,applicationId:r.a.string.isRequired};var Ke=Object(m.a)(e=>({root:{display:"flex"},buttonGap:{marginLeft:20,"& span span":{color:e.palette.getContrastText(e.palette.primary.main)}},select:{width:100}}),{withTheme:!0})(Re);function De(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ne extends i.a.Component{constructor(e){super(e),De(this,"getData",()=>{const{intl:e}=this.props;this.xhrRequest().then(e=>{const{body:t}=e,{list:a,pagination:n}=t,{total:i}=n;this.count=i,this.setState({data:this.updateUnsubscribedAPIsList(a)})}).catch(t=>{const{response:a}=t,{setTenantDomain:n}=this.props;a&&901300===a.body.code?(n("INVALID"),Ce.a.error(e.formatMessage({defaultMessage:"Invalid tenant domain",id:"Apis.Listing.ApiTableView.invalid.tenant.domain"}))):Ce.a.error(e.formatMessage({defaultMessage:"Error While Loading APIs",id:"Apis.Listing.ApiTableView.error.loading"}))}).finally(()=>{this.setState({loading:!1})})}),De(this,"changePage",e=>{const{intl:t}=this.props;this.page=e,this.setState({loading:!0}),this.xhrRequest().then(e=>{const{body:t}=e,{list:a}=t;this.setState({data:this.updateUnsubscribedAPIsList(a)})}).catch(()=>{Ce.a.error(t.formatMessage({defaultMessage:"Error While Loading APIs",id:"Apis.Listing.ApiTableView.error.loading"}))}).finally(()=>{this.setState({loading:!1})})}),De(this,"xhrRequest",()=>{const{searchText:e}=this.props,{page:t,rowsPerPage:a}=this,n=new y.a;return e&&""!==e?n.getAllAPIs({query:e+" status:published",limit:this.rowsPerPage,offset:t*a}):n.getAllAPIs({query:"status:published",limit:this.rowsPerPage,offset:t*a})}),this.state={data:null,loading:!0},this.page=0,this.count=100,this.rowsPerPage=10,this.pageType=null}componentDidMount(){this.getData()}componentDidUpdate(e){const{subscriptions:t,searchText:a}=this.props;t.length!==e.subscriptions.length?this.getData():a!==e.searchText&&(this.page=0,this.getData())}getIdsOfSubscribedEntities(){const{subscriptions:e}=this.props;return e.map(e=>e.apiId).filter(Boolean)}updateUnsubscribedAPIsList(e){const t=e,a=this.getIdsOfSubscribedEntities();for(let e=0;e<t.length;e++)(a.includes(t[e].id)||t[e].advertiseInfo.advertised||!t[e].isSubscriptionAvailable)&&(t[e].throttlingPolicies=null);return t}render(){const{apisNotFound:e}=this.props,{loading:t,data:a}=this.state,{page:n,count:s,rowsPerPage:r}=this;if(e)return i.a.createElement(E.a,null);const{handleSubscribe:o,applicationId:l,intl:c}=this.props,p=[{name:"id",label:c.formatMessage({id:"Apis.Listing.APIList.id",defaultMessage:"Id"}),options:{display:"excluded"}},{name:"isSubscriptionAvailable",label:c.formatMessage({id:"Apis.Listing.APIList.isSubscriptionAvailable",defaultMessage:"Is Subscription Available"}),options:{display:"excluded"}},{name:"name",label:c.formatMessage({id:"Apis.Listing.APIList.name",defaultMessage:"Name"})},{name:"version",label:c.formatMessage({id:"Apis.Listing.APIList.version",defaultMessage:"Version"})},{name:"throttlingPolicies",label:c.formatMessage({id:"Apis.Listing.APIList.subscription.status",defaultMessage:"Subscription Status"}),options:{customBodyRender:(e,t)=>{if(t.rowData){const a=t.rowData[0],n=e;return t.rowData[1]?n?i.a.createElement(Ke,{key:a,policies:n,apiId:a,handleSubscribe:(e,t,a)=>o(e,t,a),applicationId:l}):c.formatMessage({id:"Apis.Listing.APICardView.already.subscribed",defaultMessage:"Subscribed"}):c.formatMessage({id:"Apis.Listing.APICardView.not.allowed",defaultMessage:"Not Allowed"})}return i.a.createElement("span",null)}}}],d={search:!1,title:!1,filter:!1,print:!1,download:!1,viewColumns:!1,customToolbar:!1,responsive:"stacked",serverSide:!0,count:s,page:n,onTableChange:(e,t)=>{switch(e){case"changePage":this.changePage(t.page)}},selectableRows:"none",rowsPerPage:r,onChangeRowsPerPage:e=>{const{page:t,count:a}=this;t*e>a&&(this.page=0),this.rowsPerPage=e,this.getData()},textLabels:{pagination:{rowsPerPage:c.formatMessage({id:"Apis.Listing.APICardView.rows.per.page",defaultMessage:"Rows per page"})}}};return t?i.a.createElement(b.a,null):a&&0===a.length||!a?i.a.createElement(we.a,null):i.a.createElement(Me.a,{title:"",data:a,columns:p,options:d})}}Ne.propTypes={intl:r.a.shape({formatMessage:r.a.func}).isRequired};var Le=Object(h.d)(Object(m.a)(()=>({root:{display:"flex"},buttonGap:{marginRight:10}}),{withTheme:!0})(Ne)),qe=a(1294),je=a(1086),Be=a(5717),_e=a(2419),Ue=a(2418);const We=["Name","Value"],Ve={filterType:"checkbox",sort:!1,search:!1,viewColumns:!1,filter:!1,selectableRowsHeader:!1,selectableRows:"none",pagination:!1,download:!1};function Fe(e){const{subscriptionId:t,classes:a,tiers:s}=e,[r,o]=Object(n.useState)(!1),[l,c]=Object(n.useState)(!1),[p,d]=Object(n.useState)(null),u=()=>{c(!1)};return i.a.createElement(i.a.Fragment,null,i.a.createElement(T.a,{color:"default",onClick:()=>{o(!0),d(null);(new qe.a).getMonetizationInvoice(t).then(e=>{if(e&&e.obj){const t=[],{obj:{properties:a}}=e;Object.keys(a).forEach(e=>{const n=[];n.push(e),n.push(a[e]),t.push(n)}),d(t)}}).catch(e=>{console.error(e),c(!0)})},startIcon:i.a.createElement(be.a,null,"receipt"),disabled:0===s.length},i.a.createElement(h.a,{id:"Applications.Details.Invoice.view.btn",defaultMessage:"View Invoice"})),p?i.a.createElement(v.a,{open:r,onClose:()=>{o(!1)},fullWidth:"true",className:a.dialogWrapper},p&&i.a.createElement(Me.a,{title:"Upcoming Invoice",data:p,columns:We,options:Ve})):i.a.createElement(v.a,{open:l,onClose:u,fullWidth:"true",className:a.dialogWrapper},i.a.createElement(w.a,null,i.a.createElement(h.a,{id:"Applications.Details.Invoice.no.data.available",defaultMessage:"No Data Available"})),i.a.createElement(x.a,null,i.a.createElement(M.a,{id:"invoice-dialog-description"},i.a.createElement(h.a,{id:"Applications.Details.Invoice.pending.invoice.data",defaultMessage:"Pending invoice data not found for this subscription."}))),i.a.createElement(C.a,null,i.a.createElement(T.a,{onClick:u,color:"primary"},i.a.createElement(h.a,{id:"Applications.Details.Invoice.close",defaultMessage:"Close"})))))}Fe.defaultProps={tiers:[]},Fe.propTypes={subscriptionId:r.a.string.isRequired,tiers:r.a.arrayOf(r.a.string)};var ze=Object(m.a)(e=>({dialogWrapper:{"& span,& p , & h5, & label, & td, & li":{color:e.palette.getContrastText(e.palette.background.paper)},"& div, & input, & p.MuiFormHelperText-root":{color:e.palette.getContrastText(e.palette.background.paper)}}}))(Fe);class Ge extends i.a.Component{constructor(e){super(e),this.state={openMenu:!1,openMenuEdit:!1,isMonetizedAPI:!1,isDynamicUsagePolicy:!1,tiers:[],selectedTier:""},this.handleRequestClose=this.handleRequestClose.bind(this),this.handleRequestOpen=this.handleRequestOpen.bind(this),this.handleRequestDelete=this.handleRequestDelete.bind(this),this.checkIfDynamicUsagePolicy=this.checkIfDynamicUsagePolicy.bind(this),this.checkIfMonetizedAPI=this.checkIfMonetizedAPI.bind(this),this.populateSubscriptionTiers=this.populateSubscriptionTiers.bind(this),this.handleSubscriptionTierUpdate=this.handleSubscriptionTierUpdate.bind(this),this.handleRequestCloseEditMenu=this.handleRequestCloseEditMenu.bind(this),this.handleRequestOpenEditMenu=this.handleRequestOpenEditMenu.bind(this),this.setSelectedTier=this.setSelectedTier.bind(this)}componentDidMount(){this.checkIfMonetizedAPI(this.props.subscription.apiId),this.checkIfDynamicUsagePolicy(this.props.subscription.subscriptionId),this.populateSubscriptionTiers(this.props.subscription.apiId)}setSelectedTier(e){this.setState({selectedTier:e})}handleRequestDelete(e){const{handleSubscriptionDelete:t}=this.props;this.setState({openMenu:!1}),t&&t(e)}handleRequestCloseEditMenu(){this.setState({openMenuEdit:!1})}handleRequestOpenEditMenu(){this.setState({openMenuEdit:!0})}handleRequestOpen(){this.setState({openMenu:!0})}handleRequestClose(){this.setState({openMenu:!1})}handleSubscriptionTierUpdate(e,t,a,n,i){const{handleSubscriptionUpdate:s}=this.props;this.setState({openMenuEdit:!1}),s&&s(e,t,i,n,a)}populateSubscriptionTiers(e){(new y.a).getAPIById(e).then(e=>{if(e&&e.data){const t=JSON.parse(e.data).tiers,a=[];for(let e=0;e<t.length;e++){const{tierName:n}=t[e];a.push({value:n,label:n})}this.setState({tiers:a})}})}checkIfMonetizedAPI(e){(new y.a).getAPIById(e).then(e=>{if(e&&e.data){const t=JSON.parse(e.data);this.setState({isMonetizedAPI:t.monetization.enabled})}})}checkIfDynamicUsagePolicy(e){(new qe.a).getSubscription(e).then(e=>{if(e&&e.body){const t=JSON.parse(e.data);if(t.throttlingPolicy){(new y.a).getTierByName(t.throttlingPolicy,"subscription").then(e=>{const t=JSON.parse(e.data);t.monetizationAttributes.billingType&&"DYNAMICRATE"===t.monetizationAttributes.billingType&&this.setState({isDynamicUsagePolicy:!0})})}}})}render(){const{subscription:{apiInfo:e,status:t,throttlingPolicy:a,subscriptionId:n,apiId:s,requestedThrottlingPolicy:r,applicationId:l}}=this.props,{openMenu:c,isMonetizedAPI:p,isDynamicUsagePolicy:d,openMenuEdit:u,selectedTier:m,tiers:g}=this.state;let y=i.a.createElement(o.a,{to:0===g.length?"":"/apis/"+s,style:{cursor:0===g.length?"default":""},external:!0},e.name+" - "+e.version+" ",i.a.createElement(Ue.Icon,{path:_e.a,size:"12px"}));return"WEBSUB"===e.type&&(y=i.a.createElement(o.a,{to:0===g.length?"":"/applications/"+l+"/webhooks/"+s,style:{cursor:0===g.length?"default":""}},e.name+" - "+e.version)),i.a.createElement(fe.a,{hover:!0},i.a.createElement(he.a,null,y),i.a.createElement(he.a,null,e.lifeCycleStatus),i.a.createElement(he.a,null,a),i.a.createElement(he.a,null,t),i.a.createElement(he.a,null,i.a.createElement(Pe.a,{resourcePath:Pe.c.SINGLE_SUBSCRIPTION,resourceMethod:Pe.b.PUT},i.a.createElement(T.a,{id:"edit-api-subscription-"+s,color:"default",onClick:this.handleRequestOpenEditMenu,startIcon:i.a.createElement(be.a,null,"edit"),disabled:0===g.length},i.a.createElement(h.a,{id:"Applications.Details.SubscriptionTableData.edit.text",defaultMessage:"Edit"}))),i.a.createElement(v.a,{open:u,transition:Be.a},i.a.createElement(w.a,null,i.a.createElement(h.a,{id:"Applications.Details.SubscriptionTableData.update.subscription",defaultMessage:"Update Subscription"})),i.a.createElement(x.a,null,i.a.createElement(M.a,null,i.a.createElement(h.a,{id:"Applications.Details.SubscriptionTableData.update.business.plan",defaultMessage:"Current Business Plan : "}),a,i.a.createElement("div",null,"BLOCKED"===t?i.a.createElement(h.a,{id:"Applications.Details.SubscriptionTableData.update.throttling.policy.blocked",defaultMessage:"Subscription is in BLOCKED state. You need to unblock the subscription inorder to edit the tier"}):"ON_HOLD"===t?i.a.createElement(h.a,{id:"Applications.Details.SubscriptionTableData.update.throttling.policy.onHold",defaultMessage:"Subscription is currently ON_HOLD state. You need to get approval to the subscription before editing the tier"}):"REJECTED"===t?i.a.createElement(h.a,{id:"Applications.Details.SubscriptionTableData.update.throttling.policy.rejected",defaultMessage:"Subscription is currently REJECTED state. You need to get approval to the subscription before editing the tier"}):i.a.createElement("div",null,i.a.createElement(R.a,{required:!0,fullWidth:!0,id:"outlined-select-currency",select:!0,label:i.a.createElement(h.a,{defaultMessage:"Business Plan",id:"Applications.Details.SubscriptionTableData.update.business.plan.name"}),value:m,name:"throttlingPolicy",onChange:e=>this.setSelectedTier(e.target.value),helperText:i.a.createElement(h.a,{defaultMessage:"Assign a new Business plan to the existing subscription",id:"Applications.Details.SubscriptionTableData.update.throttling.policy.helper"}),margin:"normal",variant:"outlined"},this.state.tiers.map(e=>i.a.createElement(Oe.a,{key:e.value,value:e.value},e.label))),"TIER_UPDATE_PENDING"===t&&i.a.createElement("div",null,i.a.createElement(h.a,{id:"Applications.Details.SubscriptionTableData.update.throttling.policy.tier.update",defaultMessage:"Pending Tier Update : "}),r))))),i.a.createElement(C.a,null,i.a.createElement(T.a,{dense:!0,onClick:this.handleRequestCloseEditMenu},i.a.createElement(h.a,{id:"Applications.Details.SubscriptionTableData.cancel",defaultMessage:"Cancel"})),i.a.createElement(T.a,{variant:"contained",disabled:"BLOCKED"===t||"ON_HOLD"===t||"REJECTED"===t,dense:!0,color:"primary",onClick:()=>this.handleSubscriptionTierUpdate(s,n,m,t,a)},i.a.createElement(h.a,{id:"Applications.Details.SubscriptionTableData.update",defaultMessage:"Update"})))),i.a.createElement(Pe.a,{resourcePath:Pe.c.SINGLE_SUBSCRIPTION,resourceMethod:Pe.b.DELETE},i.a.createElement(T.a,{id:"delete-api-subscription-"+s,color:"default",onClick:this.handleRequestOpen,startIcon:i.a.createElement(be.a,null,"delete"),disabled:0===g.length},i.a.createElement(h.a,{id:"Applications.Details.SubscriptionTableData.delete.text",defaultMessage:"Delete"}))),i.a.createElement(v.a,{open:c,transition:Be.a},i.a.createElement(w.a,null,i.a.createElement(h.a,{id:"Applications.Details.SubscriptionTableData.delete.subscription.confirmation.dialog.title",defaultMessage:"Confirm"})),i.a.createElement(x.a,null,i.a.createElement(M.a,null,i.a.createElement(h.a,{id:"Applications.Details.SubscriptionTableData.delete.subscription.confirmation",defaultMessage:"Are you sure you want to delete the Subscription?"}))),i.a.createElement(C.a,null,i.a.createElement(T.a,{dense:!0,onClick:this.handleRequestClose},i.a.createElement(h.a,{id:"Applications.Details.SubscriptionTableData.cancel",defaultMessage:"Cancel"})),i.a.createElement(T.a,{id:"delete-api-subscription-confirm-btn",dense:!0,variant:"contained",color:"primary",onClick:()=>this.handleRequestDelete(n)},i.a.createElement(h.a,{id:"Applications.Details.SubscriptionTableData.delete",defaultMessage:"Delete"})))),p&&i.a.createElement(ze,{tiers:g,subscriptionId:n,isDynamicUsagePolicy:d})))}}Ge.propTypes={subscription:r.a.shape({apiInfo:r.a.shape({name:r.a.string.isRequired,version:r.a.string.isRequired,lifeCycleStatus:r.a.string.isRequired}).isRequired,throttlingPolicy:r.a.string.isRequired,subscriptionId:r.a.string.isRequired,apiId:r.a.string.isRequired,status:r.a.string.isRequired,requestedThrottlingPolicy:r.a.string.isRequired}).isRequired,handleSubscriptionDelete:r.a.func.isRequired,handleSubscriptionUpdate:r.a.func.isRequired};var He=Ge;class Je extends i.a.Component{constructor(e){super(e),this.state={subscriptions:null,apisNotFound:!1,subscriptionsNotFound:!1,isAuthorize:!0,openDialog:!1,searchText:""},this.handleSubscriptionDelete=this.handleSubscriptionDelete.bind(this),this.handleSubscriptionUpdate=this.handleSubscriptionUpdate.bind(this),this.updateSubscriptions=this.updateSubscriptions.bind(this),this.handleSubscribe=this.handleSubscribe.bind(this),this.handleOpenDialog=this.handleOpenDialog.bind(this),this.handleSearchTextChange=this.handleSearchTextChange.bind(this),this.handleSearchTextTmpChange=this.handleSearchTextTmpChange.bind(this),this.handleClearSearch=this.handleClearSearch.bind(this),this.handleEnterPress=this.handleEnterPress.bind(this),this.searchTextTmp=""}componentDidMount(){const{match:{params:{applicationId:e}}}=this.props;this.updateSubscriptions(e)}handleOpenDialog(){this.setState(e=>({openDialog:!e.openDialog,searchText:""}))}updateSubscriptions(e){const t=new qe.a,a=f.app.subscriptionLimit||1e3;t.getSubscriptions(null,e,a).then(e=>{this.setState({subscriptions:e.body.list})}).catch(e=>{const{status:t}=e;404===t?this.setState({subscriptionsNotFound:!0}):401===t&&this.setState({isAuthorize:!1})})}handleSubscriptionDelete(e){const{intl:t}=this.props;(new qe.a).deleteSubscription(e).then(a=>{if(200!==a.status)return console.log(a),void Ce.a.info(t.formatMessage({defaultMessage:"Something went wrong while deleting the Subscription!",id:"Applications.Details.Subscriptions.something.went.wrong"}));Ce.a.info(t.formatMessage({defaultMessage:"Subscription deleted successfully!",id:"Applications.Details.Subscriptions.delete.success"}));const{subscriptions:n}=this.state;for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&n[t].subscriptionId===e){n.splice(t,1);break}this.setState({subscriptions:n})}).catch(e=>{const{status:a}=e;401===a&&this.setState({isAuthorize:!1}),Ce.a.error(t.formatMessage({defaultMessage:"Error occurred when deleting subscription",id:"Applications.Details.Subscriptions.error.while.deleting"}))})}handleSubscriptionUpdate(e,t,a,n,i){const{intl:s,match:{params:{applicationId:r}}}=this.props;(new qe.a).updateSubscription(r,e,t,a,n,i).then(e=>{if(200!==e.status&&201!==e.status)return console.log(e),void Ce.a.info(s.formatMessage({defaultMessage:"Something went wrong while updating the Subscription!",id:"Applications.Details.Subscriptions.wrong.with.subscription"}));Ce.a.info(s.formatMessage({defaultMessage:"Business Plan updated successfully!",id:"Applications.Details.Subscriptions.business.plan.updated"})),this.updateSubscriptions(r)}).catch(e=>{const{status:t}=e;401===t&&this.setState({isAuthorize:!1}),Ce.a.error(s.formatMessage({defaultMessage:"Error occurred when updating subscription",id:"Applications.Details.Subscriptions.error.when.updating"}))})}handleSubscribe(e,t,a){const n=new y.a,{intl:i}=this.props;if(!a)return void Ce.a.error(i.formatMessage({id:"Applications.Details.Subscriptions.select.a.subscription.policy",defaultMessage:"Select a subscription policy"}));n.subscribe(t,e,a).then(t=>{201!==t.status?Ce.a.error(i.formatMessage({id:"Applications.Details.Subscriptions.error.occurred.during.subscription.not.201",defaultMessage:"Error occurred during subscription"})):("ON_HOLD"===t.body.status?Ce.a.info(i.formatMessage({defaultMessage:"Your subscription request has been submitted and is now awaiting approval.",id:"subscription.pending"})):Ce.a.info(i.formatMessage({id:"Applications.Details.Subscriptions.subscription.successful",defaultMessage:"Subscription successful"})),this.updateSubscriptions(e))}).catch(e=>{const{status:t}=e;401===t&&this.setState({isAuthorize:!1}),Ce.a.error(i.formatMessage({id:"Applications.Details.Subscriptions.error.occurred.during.subscription",defaultMessage:"Error occurred during subscription"}))})}handleSearchTextChange(){this.setState({searchText:this.searchTextTmp})}handleSearchTextTmpChange(e){this.searchTextTmp=e.target.value}handleClearSearch(){this.setState({searchText:""}),this.searchInputElem.value=""}handleEnterPress(e){13===e.keyCode&&(e.preventDefault(),this.handleSearchTextChange())}render(){const{isAuthorize:e,openDialog:t,searchText:a}=this.state;e||(window.location=f.app.context+"/services/configs");const{subscriptions:n,apisNotFound:s,subscriptionsNotFound:r}=this.state,{match:{params:{applicationId:o}}}=this.props,{classes:l,intl:c}=this.props;return n?i.a.createElement("div",{className:l.root},i.a.createElement("div",{className:l.titleWrapper},i.a.createElement(g.a,{variant:"h5",className:l.keyTitle},i.a.createElement(h.a,{id:"Applications.Details.Subscriptions.subscription.management",defaultMessage:"Subscription Management"})),i.a.createElement(T.a,{color:"secondary",className:l.buttonElm,size:"small",onClick:this.handleOpenDialog},i.a.createElement(be.a,null,"add_circle_outline"),i.a.createElement(h.a,{id:"Applications.Details.Subscriptions.subscription.management.add",defaultMessage:"Subscribe APIs"}))),i.a.createElement(O.a,{container:!0,className:"tab-grid",spacing:2},i.a.createElement(O.a,{item:!0,xs:12,xl:11},n&&0===n.length?i.a.createElement("div",{className:l.genericMessageWrapper},i.a.createElement(je.a,{type:"info",className:l.dialogContainer},i.a.createElement(g.a,{variant:"h5",component:"h3"},i.a.createElement(h.a,{id:"Applications.Details.Subscriptions.no.subscriptions",defaultMessage:"No Subscriptions Available"})),i.a.createElement(g.a,{component:"p"},i.a.createElement(h.a,{id:"Applications.Details.Subscriptions.no.subscriptions.content",defaultMessage:"No subscriptions are available for this Application"})))):i.a.createElement("div",{className:l.cardContent},r?i.a.createElement(E.a,null):i.a.createElement(me.a,{className:l.subsTable},i.a.createElement(ye.a,null,i.a.createElement(fe.a,null,i.a.createElement(he.a,{className:l.firstCell},i.a.createElement(h.a,{id:"Applications.Details.Subscriptions.api.name",defaultMessage:"API"})),i.a.createElement(he.a,null,i.a.createElement(h.a,{id:"Applications.Details.Subscriptions\n                                                                        .subscription.state",defaultMessage:"Lifecycle State"})),i.a.createElement(he.a,null,i.a.createElement(h.a,{id:"Applications.Details.Subscriptions\n                                                                        .business.plan",defaultMessage:"Business Plan"})),i.a.createElement(he.a,null,i.a.createElement(h.a,{id:"Applications.Details.Subscriptions.Status",defaultMessage:"Subscription Status"})),i.a.createElement(he.a,null,i.a.createElement(h.a,{id:"Applications.Details.Subscriptions.action",defaultMessage:"Action"})))),i.a.createElement(ge.a,null,n&&n.map(e=>i.a.createElement(He,{key:e.subscriptionId,subscription:e,handleSubscriptionDelete:this.handleSubscriptionDelete,handleSubscriptionUpdate:this.handleSubscriptionUpdate}))))))),i.a.createElement(v.a,{onClose:this.handleOpenDialog,"aria-labelledby":"simple-dialog-title",open:t,maxWidth:"lg",className:l.subscribePop},i.a.createElement(w.a,{disableTypography:!0,className:l.dialogTitle},i.a.createElement(g.a,{variant:"h6"},i.a.createElement(h.a,{id:"Applications.Details.Subscriptions.subscription.management.add",defaultMessage:"Subscribe APIs"})),i.a.createElement(Z.a,{className:l.searchWrapper},i.a.createElement(de.a,{component:"form",className:l.searchRoot},a&&i.a.createElement(Ae.a,{className:l.clearSearchIcon,onClick:this.handleClearSearch}),i.a.createElement(Ee.a,{className:l.input,placeholder:c.formatMessage({defaultMessage:"Search APIs",id:"Applications.Details.Subscriptions.search"}),inputProps:{"aria-label":c.formatMessage({defaultMessage:"Search APIs",id:"Applications.Details.Subscriptions.search"})},inputRef:e=>{this.searchInputElem=e},onChange:this.handleSearchTextTmpChange,onKeyDown:this.handleEnterPress}),i.a.createElement(U.a,{className:l.iconButton,"aria-label":"search",onClick:this.handleSearchTextChange},i.a.createElement(Te.a,null))),i.a.createElement(Z.a,{className:l.searchResults},a&&""!==a?i.a.createElement(i.a.Fragment,null,i.a.createElement(g.a,{variant:"caption"},i.a.createElement(h.a,{id:"Applications.Details.Subscriptions.filter.msg",defaultMessage:"Filtered APIs for "}),a)):i.a.createElement(g.a,{variant:"caption"},i.a.createElement(h.a,{id:"Applications.Details.Subscriptions.filter.msg.all.apis",defaultMessage:"Displaying all APIs"})))),i.a.createElement(U.a,{"aria-label":"close",className:l.closeButton,onClick:this.handleOpenDialog},i.a.createElement(be.a,null,"cancel"))),i.a.createElement(Z.a,{padding:2},i.a.createElement(Le,{apisNotFound:s,subscriptions:n,applicationId:o,handleSubscribe:(e,t,a)=>this.handleSubscribe(e,t,a),searchText:a})))):i.a.createElement(ve.a,null)}}Je.propTypes={classes:r.a.shape({}).isRequired,match:r.a.shape({params:r.a.shape({applicationId:r.a.string}).isRequired}).isRequired,intl:r.a.shape({}).isRequired};var Ye=Object(h.d)(Object(m.a)(e=>({searchRoot:{padding:"2px 4px",display:"flex",alignItems:"center",width:400,flex:1,marginLeft:e.spacing(2),marginRight:e.spacing(2)},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:10},divider:{height:28,margin:4},root:{padding:e.spacing(3),"& h5":{color:e.palette.getContrastText(e.palette.background.default)}},subscribePop:{"& span, & h5, & label, & input, & td, & li":{color:e.palette.getContrastText(e.palette.background.paper)}},firstCell:{paddingLeft:0},cardTitle:{paddingLeft:e.spacing(2)},cardContent:{"& table tr td":{paddingLeft:e.spacing(1)},"& table tr:nth-child(even)":{backgroundColor:e.custom.listView.tableBodyEvenBackgrund,"& td, & a":{color:e.palette.getContrastText(e.custom.listView.tableBodyEvenBackgrund)}},"& table tr:nth-child(odd)":{backgroundColor:e.custom.listView.tableBodyOddBackgrund,"& td, & a":{color:e.palette.getContrastText(e.custom.listView.tableBodyOddBackgrund)}},"& table th":{backgroundColor:e.custom.listView.tableHeadBackground,color:e.palette.getContrastText(e.custom.listView.tableHeadBackground),paddingLeft:e.spacing(1)}},titleWrapper:{display:"flex",alignItems:"center",paddingBottom:e.spacing(2),"& h5":{marginRight:e.spacing(1)}},dialogTitle:{display:"flex",alignItems:"flex-start",padding:e.spacing(1)},genericMessageWrapper:{margin:e.spacing(2)},searchWrapper:{flex:1},searchResults:{height:30,display:"flex",paddingTop:e.spacing(1),paddingRight:0,paddingBottom:0,paddingLeft:e.spacing(2)},clearSearchIcon:{cursor:"pointer"},subsTable:{"& td":{padding:"4px 8px"}}}))(Je)),$e=a(1183),Xe=a(1092),Ze=a(32),Qe=a(1543);class et extends i.a.Component{constructor(e){var t,a,n;super(e),n=()=>{this.setState(e=>{let{isDeleteOpen:t}=e;return{isDeleteOpen:!t}})},(a="toggleDeleteConfirmation")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,this.state={notFound:!1,showOverview:!0,isDeleteOpen:!1,applicationOwner:""},this.toggleOverview=this.toggleOverview.bind(this),this.handleAppDelete=this.handleAppDelete.bind(this),this.handleDeleteConfimation=this.handleDeleteConfimation.bind(this),this.toggleDeleteConfirmation=this.toggleDeleteConfirmation.bind(this)}componentDidMount(){const e=new y.a,{applicationId:t}=this.props;e.getApplication(t).then(t=>{this.setState({applicationOwner:t.obj.owner});const a=e.getTierByName(t.obj.throttlingPolicy,"application");return Promise.all([t,a])}).then(e=>{const[t]=e.map(e=>e.obj);this.setState({application:t})}).catch(e=>{const{status:t}=e;404===t&&this.setState({notFound:!0})})}handleAppDelete(){const{applicationId:e,intl:t}=this.props,{application:a}=this.state,n=Xe.a.deleteApp(e);let i=t.formatMessage({defaultMessage:"Application {name} deleted successfully!",id:"Applications.Details.InfoBar.application.deleted.successfully"},{name:a.name});n.then(e=>{e&&(Ce.a.info(i),this.toggleDeleteConfirmation()),this.props.history.push("/applications")}).catch(e=>{console.log(e),i=t.formatMessage({defaultMessage:"Error while deleting application {name}",id:"Applications.Details.InfoBar.application.deleting.error"},{name:a.name}),Ce.a.error(i)})}handleDeleteConfimation(){const{isDeleteOpen:e}=this.state;this.setState({isDeleteOpen:!e})}toggleOverview(e){"boolean"==typeof e?this.setState({showOverview:e}):this.setState(e=>({showOverview:!e.showOverview}))}render(){const{classes:e,theme:t,applicationId:a}=this.props,{application:n,notFound:s,isDeleteOpen:r,applicationOwner:l}=this.state;if(s)return i.a.createElement(E.a,{message:i.a.createElement(h.a,{id:"Applications.Details.InfoBar.listing.resource.not.found",defaultMessage:"Resource Not Fount"})});if(!n)return i.a.createElement(b.a,null);const c=Ze.a.getUser().name===l;return i.a.createElement("div",{className:e.infoBarMain},i.a.createElement("div",{className:e.root},i.a.createElement(O.a,{item:!0,xs:10},i.a.createElement("div",{style:{marginLeft:t.spacing(1)}},i.a.createElement(o.a,{to:"/applications/"+a+"/overview",className:e.linkTitle},i.a.createElement(g.a,{id:"itest-info-bar-application-name",variant:"h4"},n.name))),i.a.createElement("div",{style:{marginLeft:t.spacing(1)}},i.a.createElement(g.a,{variant:"caption",gutterBottom:!0,align:"left"},n.subscriptionCount," ",i.a.createElement(h.a,{id:"Applications.Details.InfoBar.subscriptions",defaultMessage:"Subscriptions"})))),c&&i.a.createElement(Pe.a,{resourcePath:Pe.c.SINGLE_APPLICATION,resourceMethod:Pe.b.PUT},i.a.createElement($e.a,{height:70}),i.a.createElement(O.a,{item:!0,xs:1,m:1,className:e.editButton},i.a.createElement(o.a,{to:`/applications/${a}/edit/fromView`,className:e.editButton},i.a.createElement(T.a,{id:"edit-application",style:{padding:"4px"},color:"default",className:"application-info-bar-edit-button",classes:{label:e.iconButton},"aria-label":i.a.createElement(h.a,{id:"Applications.Details.InfoBar.edit",defaultMessage:"Edit"})},i.a.createElement(be.a,null,"edit"),i.a.createElement(g.a,{variant:"caption",style:{marginTop:"2px"}},i.a.createElement(h.a,{id:"Applications.Details.InfoBar.edit.text",defaultMessage:"Edit"}))))),i.a.createElement($e.a,{height:70}),i.a.createElement(O.a,{item:!0,xs:1,m:1,className:e.button},i.a.createElement(T.a,{onClick:this.handleDeleteConfimation,disabled:Ze.a.getUser().name!==l,color:"default",classes:{label:e.iconButton},className:"application-info-bar-delete-button","aria-label":i.a.createElement(h.a,{id:"Applications.Details.InfoBar.delete",defaultMessage:"Delete"})},i.a.createElement(be.a,null,"delete"),i.a.createElement(g.a,{variant:"caption",style:{marginTop:"2px"}},i.a.createElement(h.a,{id:"Applications.Details.InfoBar.text",defaultMessage:"Delete"}))),i.a.createElement(Qe.a,{handleAppDelete:this.handleAppDelete,isDeleteOpen:r,toggleDeleteConfirmation:this.toggleDeleteConfirmation})))))}}et.propTypes={classes:r.a.shape({}).isRequired,theme:r.a.shape({}).isRequired,applicationId:r.a.string.isRequired};var tt=Object(h.d)(Object(l.h)(Object(m.a)(e=>{const t=e.custom.infoBar.background||"#ffffff",a=e.custom.infoBar.height||70,n=e.custom.infoBar.starColor||e.palette.getContrastText(t);return{root:{height:a,background:t,color:e.palette.getContrastText(t),borderBottom:"solid 1px "+e.palette.grey.A200,display:"flex",alignItems:"center",paddingLeft:e.spacing(2)},backIcon:{color:e.palette.primary.main,fontSize:56,cursor:"pointer"},backText:{color:e.palette.primary.main,cursor:"pointer",fontFamily:e.typography.fontFamily},starRate:{fontSize:40,color:n},starRateMy:{fontSize:70,color:e.palette.primary.main},rateLink:{cursor:"pointer",lineHeight:"70px"},topBar:{display:"flex",paddingBottom:e.spacing(2)},infoContent:{color:e.palette.getContrastText(t),background:t,padding:e.spacing(3),"& td, & th":{color:e.palette.getContrastText(t)}},infoContentBottom:{background:e.custom.infoBar.sliderBackground,color:e.palette.getContrastText(e.custom.infoBar.sliderBackground),borderBottom:"solid 1px "+e.palette.grey.A200},bootstrapRoot:{padding:0,"label + &":{marginTop:e.spacing(3)}},bootstrapInput:{borderRadius:4,backgroundColor:e.palette.common.white,border:"1px solid #ced4da",padding:"5px 12px",width:350,transition:e.transitions.create(["border-color","box-shadow"]),fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),"&:focus":{borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"}},epWrapper:{display:"flex"},prodLabel:{lineHeight:"30px",marginRight:10,width:100},contentWrapper:{maxWidth:e.custom.contentAreaWidth-e.custom.leftMenu.width,alignItems:"center"},ratingBoxWrapper:{position:"relative",display:"flex",alignItems:"center"},ratingBox:{backgroundColor:e.custom.leftMenu.background,border:"1px solid rgb(71, 211, 244)",borderRadius:"5px",display:"flex",position:"absolute",top:14,height:"40px",color:e.palette.getContrastText(e.custom.leftMenu.background),alignItems:"center",left:"0",paddingLeft:"5px",paddingRight:"5px"},userRating:{display:"flex",alignItems:"flex-end"},verticalDividerStar:{borderLeft:"solid 1px "+e.palette.grey.A200,height:40,marginRight:e.spacing(1),marginLeft:e.spacing(1)},backLink:{alignItems:"center",textDecoration:"none",display:"flex"},ratingSummery:{alignItems:"center",flexDirection:"column",display:"flex"},infoBarMain:{width:"100%"},buttonView:{textAlign:"left",justifyContent:"left",display:"flex",paddingLeft:e.spacing(2),cursor:"pointer"},buttonOverviewText:{display:"inline-block",paddingTop:3},button:{display:"inline-grid",cursor:"pointer","& .material-icons, & span":{color:e.palette.getContrastText(e.custom.infoBar.background)}},editButton:{display:"inline-grid",cursor:"pointer","& .material-icons, & span":{color:e.palette.getContrastText(e.custom.infoBar.background)}},iconButton:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},appNameXSmall:{whiteSpace:"nowrap",overflowX:"auto",overflowY:"hidden",maxWidth:200,lineHeight:1.3},appNameSmall:{whiteSpace:"nowrap",overflowX:"auto",overflowY:"hidden",maxWidth:310,lineHeight:1.3},appNameMid:{whiteSpace:"nowrap",overflowX:"auto",overflowY:"hidden",maxWidth:640,lineHeight:1.3},appNameBig:{whiteSpace:"nowrap",overflowX:"auto",overflowY:"hidden",maxWidth:980,lineHeight:1.3},linkTitle:{color:e.palette.getContrastText(e.custom.infoBar.background)}}},{withTheme:!0})(et))),at=a(1812);const nt=Object(at.a)(e=>({root:{padding:e.spacing(3,2),"& td, & th":{color:e.palette.getContrastText(e.custom.infoBar.background)},background:e.custom.infoBar.background},table:{minWidth:"100%"},leftCol:{width:200},iconAligner:{display:"flex",justifyContent:"flex-start",alignItems:"center"},iconTextWrapper:{display:"inline-block",paddingLeft:20},iconEven:{color:e.custom.infoBar.iconOddColor,width:e.spacing(3)},iconOdd:{color:e.custom.infoBar.iconOddColor,width:e.spacing(3)},noKeysRoot:{backgroundImage:`url(${f.app.context+e.custom.overviewPage.keysBackground})`,height:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",minHeight:192,display:"flex",alignItems:"center"},heading:{color:e.palette.getContrastText(e.palette.background.paper),paddingLeft:e.spacing(1)},emptyBox:{background:"#ffffff55",color:e.palette.getContrastText(e.palette.background.paper),border:"solid 1px #fff",padding:e.spacing(2),width:"100%"},summaryRoot:{display:"flex",alignItems:"center"},actionPanel:{justifyContent:"flex-start"}}));var it=Object(h.d)((function(e){const t=nt(),[a,s]=Object(n.useState)(null),[r,o]=Object(n.useState)(null),[l,c]=Object(n.useState)(!1),{match:{params:{applicationId:p}}}=e;return Object(n.useEffect)(()=>{const e=new y.a;e.getApplication(p).then(t=>{const a=e.getTierByName(t.obj.throttlingPolicy,"application"),n=t.obj;a.then(e=>{o(e.obj.description),s(n)})}).catch(e=>{const{status:t}=e;c(404===t)})},[]),l?i.a.createElement(E.a,null):a?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:t.root},i.a.createElement(me.a,{className:t.table},i.a.createElement(ge.a,null,i.a.createElement(fe.a,{className:"app-description-row"},i.a.createElement(he.a,{component:"th",scope:"row",className:t.leftCol},i.a.createElement("div",{className:t.iconAligner},i.a.createElement(be.a,{className:t.iconEven},"description"),i.a.createElement("span",{className:t.iconTextWrapper},i.a.createElement(g.a,{variant:"caption",gutterBottom:!0,align:"left"},i.a.createElement(h.a,{id:"Applications.Details.Overview.description",defaultMessage:"Description"}))))),i.a.createElement(he.a,null,a.description)),r&&i.a.createElement(fe.a,{className:"app-business-plan-row"},i.a.createElement(he.a,{component:"th",scope:"row",className:t.leftCol},i.a.createElement("div",{className:t.iconAligner},i.a.createElement(be.a,{className:t.iconOdd},"settings_input_component"),i.a.createElement("span",{className:t.iconTextWrapper},i.a.createElement(g.a,{variant:"caption",gutterBottom:!0,align:"left"},i.a.createElement(h.a,{id:"Applications.Details.InfoBar.business.plan",defaultMessage:"Business Plan"}))))),a&&i.a.createElement(he.a,null,a.throttlingPolicy," ",`(${r})`)),i.a.createElement(fe.a,{className:"app-workflow-status-row"},i.a.createElement(he.a,{component:"th",scope:"row",className:t.leftCol},i.a.createElement("div",{className:t.iconAligner},i.a.createElement(be.a,{className:t.iconOdd},"assignment_turned_in"),i.a.createElement("span",{className:t.iconTextWrapper},i.a.createElement(g.a,{variant:"caption",gutterBottom:!0,align:"left"},i.a.createElement(h.a,{id:"Applications.Details.Overview.workflow.status",defaultMessage:"Workflow Status"}))))),i.a.createElement(he.a,null,a.status)),i.a.createElement(fe.a,{className:"app-owner-row"},i.a.createElement(he.a,{component:"th",scope:"row",className:t.leftCol},i.a.createElement("div",{className:t.iconAligner},i.a.createElement(be.a,{className:t.iconEven},"account_box"),i.a.createElement("span",{className:t.iconTextWrapper},i.a.createElement(g.a,{variant:"caption",gutterBottom:!0,align:"left"},i.a.createElement(h.a,{id:"Applications.Details.Overview.application.owner",defaultMessage:"Application Owner"}))))),i.a.createElement(he.a,null,a.owner)),a.attributes&&Object.keys(a.attributes).map((e,n)=>{const s=a.attributes[e];return i.a.createElement(fe.a,{key:e,className:"app-web-asset-row"},i.a.createElement(he.a,{component:"th",scope:"row",className:t.leftCol},i.a.createElement("div",{className:t.iconAligner},i.a.createElement(be.a,{className:pe()({[t.iconEven]:n%2!=0},{[t.iconOdd]:n%2==0})},"web_asset"),i.a.createElement("span",{className:t.iconTextWrapper},i.a.createElement(g.a,{variant:"caption",gutterBottom:!0,align:"left"},e)))),i.a.createElement(he.a,null,s))}))))):i.a.createElement(b.a,null)})),st=a(1295),rt=a(5711),ot=a(1837),lt=a.n(ot),ct=a(2421),pt=a.n(ct),dt=a(1545),ut=a.n(dt),mt=a(1546),gt=a.n(mt),ht=a(1538),yt=a.n(ht),ft=a(2422),bt=a.n(ft);ut.a.extend(gt.a);const Et=Object(st.makeStyles)(e=>({buttonIcon:{marginRight:10},paper:{margin:e.spacing(1),padding:e.spacing(1)},grid:{marginTop:e.spacing(4),marginBottom:e.spacing(4),paddingRight:e.spacing(2),justifyContent:"center"},userNotificationPaper:{padding:e.spacing(2)},titleSub:{marginLeft:e.spacing(2),paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},root:{padding:e.spacing(3),"& h5":{color:e.palette.getContrastText(e.palette.background.default)}},titleWrapper:{display:"flex",alignItems:"center",paddingBottom:e.spacing(2),"& h5":{marginRight:e.spacing(1)}},listWrapper:{width:"50%"},subscriptionRow:{paddingLeft:"16px"},callbackurl:{fontSize:"12px"},subscriptionTimestamp:{float:"right"},SubscriptionHeader:{paddingBottom:"0px",paddingLeft:"0px",paddingTop:"0px"}}));function kt(e){const t=Et(),{location:{pathname:a}}=e,s=Object(h.e)(),r=Object(l.f)(a,{path:"/applications/:applicationId/webhooks/:apiId",exact:!0,strict:!1}),{applicationId:o}=e.match.params,{apiId:c}=r.params,[p,d]=Object(n.useState)("");return Object(n.useEffect)(()=>{(new y.a).getWebhookubScriptions(c,o).then(e=>{const t=pt.a.groupBy(e.obj.list,"topic");d(t)}).catch(e=>{console.log(e),Ce.a.error(s.formatMessage({id:"Applications.Details.Subscriptions.error.occurred.webhook.subscription",defaultMessage:"Error while retrieving webhook subscriptions"}))})},[]),i.a.createElement("div",{className:t.root},i.a.createElement("div",{className:t.titleWrapper},i.a.createElement(g.a,{variant:"h5",className:t.keyTitle},i.a.createElement(h.a,{id:"Applications.Details.Subscriptions.api.webhooks",defaultMessage:"Web Hooks"}))),i.a.createElement(J.a,{className:t.listWrapper},Object.keys(p).length<1&&i.a.createElement(g.a,{color:"textPrimary",display:"block"},i.a.createElement(h.a,{id:"Applications.Details.Subscriptions.api.webhooks.subscriptions.unavailable",defaultMessage:"No Webhook subscriptions available at this time."})),Object.keys(p).map(e=>i.a.createElement(i.a.Fragment,null,i.a.createElement(Y.a,{className:t.SubscriptionHeader},i.a.createElement(X.a,{primary:e})),p[e].map(e=>i.a.createElement(O.a,{container:!0,direction:"row"},i.a.createElement(O.a,{item:!0,xs:1},(e=>{switch(e.deliveryStatus){case 1:return i.a.createElement(lt.a,{style:{color:"green",fontSize:"14px",paddingTop:"3px"}});case 2:return i.a.createElement(yt.a,{style:{color:"red",fontSize:"14px",paddingTop:"3px"}});default:return i.a.createElement(bt.a,{style:{color:"black",fontSize:"14px",paddingTop:"3px"}})}})(e)),i.a.createElement(O.a,{item:!0,xs:8},i.a.createElement(g.a,{color:"textPrimary",display:"block",className:t.callbackurl},e.callBackUrl)),i.a.createElement(O.a,{item:!0,xs:3},e.deliveryTime?i.a.createElement(g.a,{color:"textSecondary",display:"block",variant:"caption",className:t.subscriptionTimestamp},e.deliveryTime):i.a.createElement(g.a,{color:"textSecondary",display:"block",variant:"caption",className:t.subscriptionTimestamp},i.a.createElement(h.a,{id:"Applications.Details.Subscriptions.api.webhooks.delivery.time.unavailable",defaultMessage:"Delivery data unavailable"}))),i.a.createElement(rt.a,{component:"li"}))),i.a.createElement(rt.a,{component:"li"})))))}function At(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class St extends n.Component{constructor(e){super(e),At(this,"handleMenuSelect",e=>{const{history:t,match:a}=this.props;t.push({pathname:"/applications/"+a.params.application_uuid+"/"+e})}),At(this,"toTitleCase",e=>e.replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase())),At(this,"renderManager",(e,t,a)=>{const{classes:n}=this.props;return i.a.createElement(de.a,null,"oauth"===a&&i.a.createElement(S.a,{keyType:t,selectedApp:{appId:e.applicationId,label:e.name,tokenType:e.tokenType,owner:e.owner,hashEnabled:e.hashEnabled}}),"apikey"===a&&i.a.createElement("div",{className:n.root},i.a.createElement("div",{className:n.titleWrapper},i.a.createElement(g.a,{variant:"h5",className:n.keyTitle},this.toTitleCase(t),i.a.createElement(h.a,{id:"Applications.Details.api.keys.title",defaultMessage:" API Key"}))),i.a.createElement("div",{className:n.contentWrapper},i.a.createElement(le,{keyType:t,selectedApp:{appId:e.applicationId,label:e.name,tokenType:e.tokenType,owner:e.owner}}))))}),this.state={application:null}}componentDidMount(){const{match:e}=this.props;(new y.a).getApplication(e.params.application_uuid).then(e=>{this.setState({application:e.obj})}).catch(e=>{const{status:t}=e;404===t&&this.setState({notFound:!0})})}render(){const{classes:e,match:t,theme:a,intl:n}=this.props,{notFound:s,application:r}=this.state,c="/applications/"+t.params.application_uuid,d=c+"/overview",{custom:{leftMenu:{rootIconSize:m,rootIconTextVisible:y,rootIconVisible:f,position:S},title:{prefix:T,suffix:v}}}=a;return s?i.a.createElement(E.a,null):r?i.a.createElement(i.a.Fragment,null,i.a.createElement(ue.Helmet,null,i.a.createElement("title",null,`${T} ${r.name}${v}`)),i.a.createElement("nav",{role:"navigation","aria-label":n.formatMessage({id:"Applications.Details.index.secondary.navigation",defaultMessage:"Secondary Navigation"}),className:pe()(e.LeftMenu,{[e.leftMenuHorizontal]:"horizontal"===S},{[e.leftMenuVerticalLeft]:"vertical-left"===S},{[e.leftMenuVerticalRight]:"vertical-right"===S},"left-menu")},f&&i.a.createElement(o.a,{to:"/applications",className:e.leftLInkMain,"aria-label":"All applications"},i.a.createElement("span",{className:"applications-icon-wrapper"},i.a.createElement(k.a,{width:m,height:m,icon:"applications"})),y&&i.a.createElement(g.a,{className:e.leftLInkMainText},i.a.createElement(h.a,{id:"Applications.Details.applications.all",defaultMessage:"ALL APPs"}))),i.a.createElement(A.a,{text:i.a.createElement(h.a,{id:"Applications.Details.menu.overview",defaultMessage:"Overview"}),iconText:"overview",route:"overview",to:c+"/overview",open:!0}),i.a.createElement(A.a,{text:i.a.createElement(h.a,{id:"Applications.Details.menu.prod.keys",defaultMessage:"Production Keys"}),iconText:"productionkeys",route:"productionkeys",to:c+"/productionkeys/oauth",open:!0,id:"production-keys"}),i.a.createElement(A.a,{text:i.a.createElement(h.a,{id:"Applications.Details.menu.oauth.tokens",defaultMessage:"OAuth2 Tokens"}),route:"productionkeys/oauth",to:c+"/productionkeys/oauth",submenu:!0,Icon:i.a.createElement(u.a,null),open:!0,id:"production-keys-oauth"}),i.a.createElement(A.a,{text:i.a.createElement(h.a,{id:"Applications.Details.menu.api.key",defaultMessage:"API Key"}),route:"productionkeys/apikey",to:c+"/productionkeys/apikey",submenu:!0,Icon:i.a.createElement(p.a,null),open:!0,id:"production-keys-apikey"}),i.a.createElement(A.a,{text:i.a.createElement(h.a,{id:"Applications.Details.menu.sandbox.keys",defaultMessage:"Sandbox Keys"}),iconText:"productionkeys",route:"sandboxkeys",to:c+"/sandboxkeys/oauth",open:!0,id:"sandbox-keys"}),i.a.createElement(A.a,{text:i.a.createElement(h.a,{id:"Applications.Details.menu.oauth.tokens",defaultMessage:"OAuth2 Tokens"}),route:"sandboxkeys/oauth",to:c+"/sandboxkeys/oauth",submenu:!0,Icon:i.a.createElement(u.a,null),open:!0,id:"sandbox-keys-oauth"}),i.a.createElement(A.a,{text:i.a.createElement(h.a,{id:"Applications.Details.menu.api.key",defaultMessage:"API Key"}),route:"sandboxkeys/apikey",to:c+"/sandboxkeys/apikey",submenu:!0,Icon:i.a.createElement(p.a,null),open:!0,id:"sandbox-keys-apikey"}),i.a.createElement(A.a,{text:i.a.createElement(h.a,{id:"Applications.Details.menu.subscriptions",defaultMessage:"Subscriptions"}),iconText:"subscriptions",route:"subscriptions",to:c+"/subscriptions",open:!0,id:"left-menu-subscriptions"})),i.a.createElement("div",{className:e.content},i.a.createElement(tt,{applicationId:t.params.application_uuid,innerRef:e=>{this.infoBar=e}}),i.a.createElement("div",{className:pe()({[e.contentLoader]:"horizontal"===S},{[e.contentLoaderRightMenu]:"vertical-right"===S})},i.a.createElement(l.d,null,i.a.createElement(l.a,{exact:!0,from:"/applications/:applicationId",to:d}),i.a.createElement(l.b,{path:"/applications/:applicationId/overview",component:it}),i.a.createElement(l.b,{path:"/applications/:applicationId/webhooks/:apiId",component:kt}),i.a.createElement(l.b,{path:"/applications/:applicationId/productionkeys/oauth",component:()=>this.renderManager(r,"PRODUCTION","oauth")}),i.a.createElement(l.b,{path:"/applications/:applicationId/productionkeys/apikey",component:()=>this.renderManager(r,"PRODUCTION","apikey")}),i.a.createElement(l.b,{path:"/applications/:applicationId/sandboxkeys/oauth",component:()=>this.renderManager(r,"SANDBOX","oauth")}),i.a.createElement(l.b,{path:"/applications/:applicationId/sandboxkeys/apikey",component:()=>this.renderManager(r,"SANDBOX","apikey")}),i.a.createElement(l.b,{path:"/applications/:applicationId/subscriptions",component:Ye}),i.a.createElement(l.b,{component:E.a}))))):i.a.createElement(b.a,null)}}St.propTypes={classes:r.a.shape({}).isRequired,theme:r.a.shape({}).isRequired,match:r.a.shape({params:r.a.shape({application_uuid:r.a.string.isRequired}).isRequired}).isRequired,history:r.a.shape({push:r.a.func.isRequired}).isRequired,intl:r.a.shape({formatMessage:r.a.func}).isRequired};t.default=Object(m.a)(e=>{const{custom:{leftMenu:{width:t,position:a}}}=e,n="vertical-left"===a?t-4:0,i="vertical-right"===a?t:0,s="horizontal"===a?e.spacing(3):0;return{LeftMenu:{backgroundColor:e.custom.leftMenu.background,backgroundImage:`url(${f.app.context}${e.custom.leftMenu.backgroundImage})`,textAlign:"left",fontFamily:e.typography.fontFamily,position:"absolute",bottom:0,paddingLeft:s},leftMenuHorizontal:{top:e.custom.infoBar.height,width:"100%",overflowX:"auto",height:60,display:"flex",left:0},leftMenuVerticalLeft:{width:e.custom.leftMenu.width,top:0,left:0,overflowY:"auto",[e.breakpoints.down("sm")]:{width:50}},leftMenuVerticalRight:{width:e.custom.leftMenu.width,top:0,right:0,overflowY:"auto"},leftLInkMain:{borderRight:"solid 1px "+e.custom.leftMenu.background,cursor:"pointer",background:e.custom.leftMenu.rootBackground,color:e.palette.getContrastText(e.custom.leftMenu.rootBackground),textDecoration:"none",alignItems:"center",justifyContent:"center",display:"flex",height:e.custom.infoBar.height},leftLInkMainText:{fontSize:18,color:e.palette.grey[500],textDecoration:"none",paddingLeft:e.spacing(2)},detailsContent:{display:"flex",flex:1},content:{display:"flex",flex:1,flexDirection:"column",marginLeft:n,marginRight:i,paddingBottom:e.spacing(3),overflowX:"hidden",[e.breakpoints.down("sm")]:{marginLeft:0!==n&&50,marginRight:0!==i&&50}},contentLoader:{paddingTop:e.spacing(3)},contentLoaderRightMenu:{paddingRight:e.custom.leftMenu.width},titleWrapper:{paddingLeft:25,paddingTop:28,textTransform:"capitalize"},contentWrapper:{paddingLeft:25},keyTitle:{textTransform:"capitalize"}}},{withTheme:!0})(Object(h.d)(St))}}]);
//# sourceMappingURL=ApplicationDetails.60a18b0dee22c2ed34cd.bundle.js.map