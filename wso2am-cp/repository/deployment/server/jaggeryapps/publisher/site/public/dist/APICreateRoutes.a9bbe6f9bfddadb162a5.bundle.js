(this.webpackJsonp=this.webpackJsonp||[]).push([[5],{1943:function(e,t,a){"use strict";(function(e){var r,n=a(0),i=a.n(n),o=a(20),l=a.n(o),c=a(71),s=a(4279),u=a(26),p=a(110),d=a(1384),m=a(139),f=a(16),b=a(553),g=a(4301),y=a(546),v=a(628),h=a(680),A=a(907),P=a(848),E=a(632),C=a(78);function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){w(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function x(e){var t=e.isWebSocket,a=e.isAPIProduct,r=e.history,o=e.intl,l=Object(v.c)().settings,p=O(Object(n.useState)(null),2),f=p[0],S=p[1],j=O(Object(n.useState)(),2),L=j[0],k=j[1],D=O(Object(n.useState)(!1),2),G=D[0],M=D[1],R=O(Object(n.useState)([]),2),H=R[0],W=R[1];Object(n.useEffect)((function(){y.a.policies("subscription").then((function(e){var t=e.body.list;0===t.length?b.a.info(o.formatMessage({id:"Apis.Create.Default.APICreateDefault.error.policies.not.available",defaultMessage:[{type:0,value:"Throttling policies not available. Contact your administrator"}]})):t.filter((function(e){return"Unlimited"===e.name})).length>0?W(["Unlimited"]):W([t[0].name])}))}),[]);var V=O(Object(n.useState)(!1),2),T=V[0],F=V[1],B=O(Object(n.useState)(!1),2),U=B[0],N=B[1],Q=O(Object(n.useState)(!1),2),z=Q[0],_=Q[1];var q=O(Object(n.useReducer)((function(e,t){var a=t.action,r=t.value;switch(a){case"name":case"version":case"endpoint":case"context":case"isFormValid":return I(I({},e),{},w({},a,r));default:return e}}),{formValidity:!1}),2),$=q[0],K=q[1],J=$.endpoint,X=!($.name&&$.version&&$.context)||L||G;function Y(){k(!0);var e,n=$.name,i=$.version,o=$.context,l=$.endpoint,c={name:n,version:i,context:o,policies:H};(l&&(c.endpointConfig={endpoint_type:"http",sandbox_endpoints:{url:l},production_endpoints:{url:l}}),t&&(c.type="WS"),a)?e=new E.a(c).saveProduct(c).then((function(e){return b.a.info("API Product created successfully"),r.push("/api-products/".concat(e.id,"/overview")),e})).catch((function(e){if(e.response)b.a.error(e.response.body.description),S(e.response.body);else{var t="Something went wrong while adding the API Product";b.a.error(t),S(t)}console.error(e)})):e=new y.a(c).save().then((function(e){return b.a.info("API created successfully"),e})).catch((function(e){if(e.response)b.a.error(e.response.body.description),S(e.response.body);else{var t="Something went wrong while adding the API";b.a.error(t),S(t)}console.error(e),M(!1)})).finally((function(){k(!1)}));return e.finally((function(){return k(!1)}))}var Z=i.a.createElement(i.a.Fragment,null,i.a.createElement(c.a,{variant:"h5"},i.a.createElement(u.a,{id:"Apis.Create.Default.APICreateDefault.api.heading",defaultMessage:[{type:0,value:"Create an API"}]})),i.a.createElement(c.a,{variant:"caption"},i.a.createElement(u.a,{id:"Apis.Create.Default.APICreateDefault.api.sub.heading",defaultMessage:[{type:0,value:"Create an API by providing a Name, a Version, a Context and Backend Endpoint (optional)"}]})));return a?Z=i.a.createElement(i.a.Fragment,null,i.a.createElement(c.a,{variant:"h5"},i.a.createElement(u.a,{id:"Apis.Create.Default.APICreateDefault.apiProduct.heading",defaultMessage:[{type:0,value:"Create an API Product"}]})),i.a.createElement(c.a,{variant:"caption"},i.a.createElement(u.a,{id:"Apis.Create.Default.APICreateDefault.apiProduct.sub.heading",defaultMessage:[{type:0,value:"Create an API Product by providing a Name, a Context, and Business Plans (optional)."}]}))):t&&(Z=i.a.createElement(i.a.Fragment,null,i.a.createElement(c.a,{variant:"h5"},i.a.createElement(u.a,{id:"Apis.Create.Default.APICreateDefault.webSocket.heading",defaultMessage:[{type:0,value:"Create a WebSocket API"}]})),i.a.createElement(c.a,{variant:"caption"},i.a.createElement(u.a,{id:"Apis.Create.Default.APICreateDefault.webSocket.sub.heading",defaultMessage:[{type:0,value:"Create a WebSocket API by providing a Name, and a Context."}]})))),i.a.createElement(A.a,{title:Z},i.a.createElement(s.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:3},f&&i.a.createElement(s.a,{item:!0,xs:11},i.a.createElement(h.a,{onClose:function(){return S(null)},disableActions:!0,dense:!0,paperProps:{elevation:1},type:"error",message:f})),i.a.createElement(s.a,{item:!0,xs:12}),i.a.createElement(s.a,{item:!0,md:1,xs:0}),i.a.createElement(s.a,{item:!0,md:11,xs:12},i.a.createElement(P.a,{onValidate:function(e){K({action:"isFormValid",value:e})},onChange:function(e){var t=e.target,a=t.name,r=t.value;K({action:a,value:r})},api:$,isAPIProduct:a,isWebSocket:t})),i.a.createElement(s.a,{item:!0,md:1,xs:0}),i.a.createElement(s.a,{item:!0,md:11,xs:12},i.a.createElement(s.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:2},i.a.createElement(s.a,{item:!0},i.a.createElement(d.a,{id:"itest-create-default-api-button",variant:"contained",color:"primary",disabled:X||!$.isFormValid,onClick:function(){Y().then((function(e){r.push("/apis/".concat(e.id,"/overview"))}))}},"Create"," ",L&&!z&&i.a.createElement(g.a,{size:24}))),!C.a.isNotPublisher()&&i.a.createElement(s.a,{item:!0},i.a.createElement(d.a,{id:"itest-id-apicreatedefault-createnpublish",variant:"contained",color:"primary",disabled:U||T||!J||X||!$.isFormValid,onClick:function(){var e=new y.a;_(!0),Y().then((function(t){F(!0);e.createRevision(t.id,{description:"Initial Revision"}).then((function(a){var n=a.body.id;b.a.info("API Revision created successfully"),F(!1);var i=l.environment.map((function(e){return e.name})),c=[],s=function(e){var t=l.environment.find((function(t){return t.name===e&&t.vhosts.length>0}));return t&&t.vhosts[0].host};i&&i.length>0&&(i.includes("Default")&&s("Default")?c.push({name:"Default",displayOnDevportal:!0,vhost:s("Default")}):s(i[0])&&c.push({name:i[0],displayOnDevportal:!0,vhost:s(i[0])})),N(!0),e.deployRevision(t.id,n,c).then((function(){b.a.info("API Revision Deployed Successfully"),N(!1),M(!0),t.publish().then((function(e){e.body.workflowStatus===x.WORKFLOW_STATUS.CREATED?b.a.info(o.formatMessage({id:"Apis.Create.Default.APICreateDefault.success.publishStatus",defaultMessage:[{type:0,value:"Lifecycle state change request has been sent"}]})):b.a.info(o.formatMessage({id:"Apis.Create.Default.APICreateDefault.success.otherStatus",defaultMessage:[{type:0,value:"API updated successfully"}]})),r.push("/apis/".concat(t.id,"/overview"))})).catch((function(e){e.response?(b.a.error(e.response.body.description),S(e.response.body)):(b.a.error(o.formatMessage({id:"Apis.Create.Default.APICreateDefault.error.errorMessage.publish",defaultMessage:[{type:0,value:"Something went wrong while publishing the API"}]})),S("Something went wrong while publishing the API")),console.error(e)})).finally((function(){M(!1),_(!1)}))})).catch((function(e){e.response?(b.a.error(e.response.body.description),S(e.response.body)):(b.a.error(o.formatMessage({id:"Apis.Create.Default.APICreateDefault.error.errorMessage.deploy.revision",defaultMessage:[{type:0,value:"Something went wrong while deploying the API Revision"}]})),S("Something went wrong while deploying the API Revision")),console.error(e)})).finally((function(){N(!1)}))})).catch((function(e){e.response?(b.a.error(e.response.body.description),S(e.response.body)):(b.a.error(o.formatMessage({id:"Apis.Create.Default.APICreateDefault.error.errorMessage.create.revision",defaultMessage:[{type:0,value:"Something went wrong while creating the API Revision"}]})),S("Something went wrong while creating the API Revision")),console.error(e)})).finally((function(){F(!1)}))}))}},!G&&!T&&!U&&"Create & Publish",(G||T||U)&&i.a.createElement(g.a,{size:24}),L&&G&&"Creating API . . .",!L&&T&&!U&&"Creating Revision . . .",!L&&G&&!T&&!U&&"Publishing API . . .",!L&&G&&!T&&U&&"Deploying Revision . . .")),i.a.createElement(s.a,{item:!0},i.a.createElement(m.b,{to:"/apis/"},i.a.createElement(d.a,{variant:"text"},i.a.createElement(u.a,{id:"Apis.Create.Default.APICreateDefault.cancel",defaultMessage:[{type:0,value:"Cancel"}]}))))))))}(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(x,"useAppContext{{ settings }}\nuseState{[pageError, setPageError](null)}\nuseState{[isCreating, setIsCreating]}\nuseState{[isPublishing, setIsPublishing](false)}\nuseState{[policies, setPolicies]([])}\nuseEffect{}\nuseState{[isRevisioning, setIsRevisioning](false)}\nuseState{[isDeploying, setIsDeploying](false)}\nuseState{[isPublishButtonClicked, setIsPublishButtonClicked](false)}\nuseReducer{[apiInputs, inputsDispatcher]({\n        formValidity: false,\n    })}",(function(){return[v.c]})),x.defaultProps={isWebSocket:!1,isAPIProduct:!1},x.WORKFLOW_STATUS={CREATED:"CREATED"},x.propTypes={history:l.a.shape({push:l.a.func}).isRequired,isAPIProduct:l.a.shape({}),isWebSocket:l.a.shape({}),intl:l.a.shape({formatMessage:l.a.func}).isRequired};var L,k,D=Object(f.withRouter)(Object(p.c)(x));t.a=D,(L="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(L.register(x,"APICreateDefault","/home/jenkins/workspace/update-2/full/carbon-apimgt/carbon-apimgt-9.0.174.x-full/target/checkout/features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Create/Default/APICreateDefault.jsx"),L.register(D,"default","/home/jenkins/workspace/update-2/full/carbon-apimgt/carbon-apimgt-9.0.174.x-full/target/checkout/features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Create/Default/APICreateDefault.jsx")),(k="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&k(e)}).call(this,a(33)(e))},3980:function(e,t,a){"use strict";a.r(t),function(e){var r,n=a(0),i=a.n(n),o=a(16),l=a(62),c=a(20),s=a.n(c),u=a(679),p=a(1943),d=a(3981),m=a(3983),f=a(3984),b=a(3985),g=a(3986),y=a(3987),v=a(3988);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var h={content:{flexGrow:1}};function A(e){var t=e.classes;return i.a.createElement("main",{className:t.content},i.a.createElement(o.Switch,null,i.a.createElement(o.Route,{path:"/apis/create/rest",component:p.a}),i.a.createElement(o.Route,{path:"/api-products/create",component:d.a}),i.a.createElement(o.Route,{path:"/apis/create/graphQL",component:b.a}),i.a.createElement(o.Route,{path:"/apis/create/openapi",component:m.a}),i.a.createElement(o.Route,{path:"/apis/create/wsdl",component:f.a}),i.a.createElement(o.Route,{path:"/apis/create/ws",component:g.a}),i.a.createElement(o.Route,{path:"/apis/create/streamingapi/:apiType",component:y.a}),i.a.createElement(o.Route,{path:"/apis/create/asyncapi",component:v.a}),i.a.createElement(o.Route,{component:u.a})))}A.propTypes={classes:s.a.shape({content:s.a.string}).isRequired};var P,E,C=Object(l.a)(h)(A);t.default=C,(P="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(P.register(h,"styles","/home/jenkins/workspace/update-2/full/carbon-apimgt/carbon-apimgt-9.0.174.x-full/target/checkout/features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Create/APICreateRoutes.jsx"),P.register(A,"APICreateRoutes","/home/jenkins/workspace/update-2/full/carbon-apimgt/carbon-apimgt-9.0.174.x-full/target/checkout/features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Create/APICreateRoutes.jsx"),P.register(C,"default","/home/jenkins/workspace/update-2/full/carbon-apimgt/carbon-apimgt-9.0.174.x-full/target/checkout/features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Create/APICreateRoutes.jsx")),(E="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&E(e)}.call(this,a(33)(e))},3981:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return H}));var r,n=a(0),i=a.n(n),o=a(20),l=a.n(o),c=a(165),s=a(4279),u=a(1508),p=a(26),d=a(4333),m=a(4330),f=a(4331),b=a(246),g=a(1384),y=a(71),v=a(139),h=a(632),A=a(553),P=a(4301),E=a(3982),C=a(848),S=a(628),I=a(1929),w=a(546);function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){x(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);var D,G,M="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},R=Object(b.a)((function(e){return{Paper:{height:"40px"},saveButton:{padding:"0px 0px 0px 10px"},titleWrapper:{display:"flex",flexDirection:"row",alignItems:"center",paddingBottom:e.spacing(2)},buttonWrapper:{marginTop:e.spacing(4)},alternativeLabel:{marginTop:e.spacing(1)}}}));function H(e){var t=e.history,a=Object(u.a)(),r=L(Object(n.useState)(0),2),o=r[0],l=r[1],b=L(Object(n.useState)([]),2),O=b[0],k=b[1],D=Object(S.c)().settings,G=L(Object(n.useState)([]),2),M=G[0],H=G[1];Object(n.useEffect)((function(){w.a.policies("subscription").then((function(e){var t=e.body.list;0===t.length?A.a.info(a.formatMessage({id:"Apis.Create.APIProduct.APIProductCreateWrapper.error.policies.not.available",defaultMessage:[{type:0,value:"Throttling policies not available. Contact your administrator"}]})):t.filter((function(e){return"Unlimited"===e.name})).length>0?H(["Unlimited"]):H([t[0].name])}))}),[]);var W=i.a.createElement(i.a.Fragment,null,i.a.createElement(y.a,{variant:"h5"},i.a.createElement(p.a,{id:"Apis.Create.APIProduct.APIProductCreateWrapper.heading",defaultMessage:[{type:0,value:"Create an API Product"}]})),i.a.createElement(y.a,{variant:"caption"},i.a.createElement(p.a,{id:"Apis.Create.APIProduct.APIProductCreateWrapper.sub.heading",defaultMessage:[{type:0,value:"Create an API Product by providing a Name, a Context, Resources, and Business Plans (optional)."}]})));var V=L(Object(n.useReducer)((function(e,t){var a=t.action,r=t.value;switch(a){case"type":case"name":case"context":case"version":case"isFormValid":case"apiResources":return j(j({},e),{},x({},a,r));case"preSetAPI":return j(j({},e),{},{name:r.name.replace(/[&/\\#,+()$~%.'":*?<>{}\s]/g,""),context:r.context});default:return e}}),{type:"ApiProductCreateWrapper",inputValue:"",formValidity:!1}),2),T=V[0],F=V[1];var B=L(Object(n.useState)(),2),U=B[0],N=B[1],Q=R(),z=[i.a.createElement(p.a,{variant:"caption",id:"Apis.Create.APIProduct.APIProductCreateWrapper.defineProvide",defaultMessage:[{type:0,value:"Define API Product"}]}),i.a.createElement(p.a,{variant:"caption",id:"Apis.Create.APIProduct.APIProductCreateWrapper.resources",defaultMessage:[{type:0,value:"Add Resources"}]})];return i.a.createElement(i.a.Fragment,null,i.a.createElement(E.a,{title:W},i.a.createElement(c.a,null,0===o&&i.a.createElement(d.a,{alternativeLabel:!0,activeStep:0},z.map((function(e){return i.a.createElement(m.a,{key:e},i.a.createElement(f.a,{className:Q.alternativeLabel},e))}))),1===o&&i.a.createElement(d.a,{alternativeLabel:!0,activeStep:1},z.map((function(e){return i.a.createElement(m.a,{key:e},i.a.createElement(f.a,null,e))})))),i.a.createElement(s.a,{container:!0,spacing:2},0===o&&i.a.createElement(s.a,{item:!0,md:12}),0===o&&i.a.createElement(s.a,{item:!0,md:1}),i.a.createElement(s.a,{item:!0,md:0===o?11:12},0===o&&i.a.createElement(C.a,{onValidate:function(e){F({action:"isFormValid",value:e})},onChange:function(e){var t=e.target,a=t.name,r=t.value;F({action:a,value:r})},api:T,isAPIProduct:!0}),1===o&&i.a.createElement(I.a,{apiResources:O,setApiResources:k,isStateCreate:!0,api:T})),0===o&&i.a.createElement(s.a,{item:!0,md:1}),i.a.createElement(s.a,{item:!0,md:9},i.a.createElement(s.a,{className:1===o&&Q.saveButton,container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:2},i.a.createElement(s.a,{item:!0},1===o&&i.a.createElement(g.a,{onClick:function(){return l((function(e){return e-1}))}},i.a.createElement(p.a,{id:"Apis.Create.APIProduct.APIProductCreateWrapper.back",defaultMessage:[{type:0,value:"Back"}]})),0===o&&i.a.createElement(v.b,{to:"/api-products/"},i.a.createElement(g.a,null,i.a.createElement(p.a,{id:"Apis.Create.APIProduct.APIProductCreateWrapper.cancel",defaultMessage:[{type:0,value:"Cancel"}]})))),i.a.createElement(s.a,{item:!0},1===o&&i.a.createElement(g.a,{variant:"contained",color:"primary",disabled:!T.isFormValid||U||0===O.length,onClick:function(){N(!0);var e={name:T.name,context:T.context,policies:M,apis:O,transport:["http","https"]},r=new h.a(e);r.saveProduct(e).then((function(e){A.a.info("API Product created successfully");r.createProductRevision(e.id,{description:"Initial Revision"}).then((function(t){var n=t.body.id;A.a.info("API Revision created successfully");var i=D.environment.map((function(e){return e.name})),o=[],l=function(e){var t=D.environment.find((function(t){return t.name===e&&t.vhosts.length>0}));return t&&t.vhosts[0].host};i&&i.length>0&&(i.includes("Default")&&l("Default")?o.push({name:"Default",displayOnDevportal:!0,vhost:l("Default")}):l(i[0])&&o.push({name:i[0],displayOnDevportal:!0,vhost:l(i[0])})),r.deployProductRevision(e.id,n,o).then((function(){A.a.info("API Revision Deployed Successfully")})).catch((function(e){e.response?A.a.error(e.response.body.description):A.a.error(a.formatMessage({id:"Apis.APIProductCreateWrapper.error.errorMessage.deploy.revision",defaultMessage:[{type:0,value:"Something went wrong while deploying the API Revision"}]})),console.error(e)}))})).catch((function(e){e.response?A.a.error(e.response.body.description):A.a.error(a.formatMessage({id:"Apis.APIProductCreateWrapper.error.errorMessage.create.revision",defaultMessage:[{type:0,value:"Something went wrong while creating the API Revision"}]})),console.error(e)})),t.push("/api-products/".concat(e.id,"/overview"))})).catch((function(e){e.response?A.a.error(e.response.body.description):A.a.error("Something went wrong while adding the API Product")})).finally((function(){return N(!1)}))},id:"create-api-product-btn"},i.a.createElement(p.a,{id:"Apis.Create.APIProduct.APIProductCreateWrapper.publish",defaultMessage:[{type:0,value:"Publish"}]}),U&&i.a.createElement(P.a,{size:24})),0===o&&i.a.createElement(g.a,{onClick:function(){return l((function(e){return e+1}))},variant:"contained",color:"primary",disabled:!T.isFormValid,id:"api-product-next-btn"},i.a.createElement(p.a,{id:"Apis.Create.APIProduct.APIProductCreateWrapper.next",defaultMessage:[{type:0,value:"Next"}]}))))))))}M(H,"useIntl{intl}\nuseState{[wizardStep, setWizardStep](0)}\nuseState{[apiResources, setApiResources]([])}\nuseAppContext{{ settings }}\nuseState{[policies, setPolicies]([])}\nuseEffect{}\nuseReducer{[apiInputs, inputsDispatcher]({\n        type: 'ApiProductCreateWrapper',\n        inputValue: '',\n        formValidity: false,\n    })}\nuseState{[isCreating, setCreating]}\nuseStyles{classes}",(function(){return[u.a,S.c,R]})),H.propTypes={history:l.a.shape({push:l.a.func}).isRequired},(D="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(D.register(R,"useStyles","/home/jenkins/workspace/update-2/full/carbon-apimgt/carbon-apimgt-9.0.174.x-full/target/checkout/features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Create/APIProduct/APIProductCreateWrapper.jsx"),D.register(H,"ApiProductCreateWrapper","/home/jenkins/workspace/update-2/full/carbon-apimgt/carbon-apimgt-9.0.174.x-full/target/checkout/features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Create/APIProduct/APIProductCreateWrapper.jsx")),(G="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&G(e)}).call(this,a(33)(e))},3982:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return d}));var r,n=a(0),i=a.n(n),o=a(20),l=a.n(o),c=a(288),s=a(4279);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);var u,p;"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function d(e){var t=e.title,a=e.children;return i.a.createElement(s.a,{container:!0,spacing:3},i.a.createElement(s.a,{item:!0,sm:12,md:12}),i.a.createElement(s.a,{item:!0,sm:0,md:2}),i.a.createElement(s.a,{item:!0,sm:12,md:8},i.a.createElement(s.a,{container:!0,spacing:5},i.a.createElement(s.a,{item:!0,md:12},t),i.a.createElement(s.a,{item:!0,md:12},i.a.createElement(c.a,{elevation:0},a)))),i.a.createElement(s.a,{item:!0,sm:0,md:2}))}d.propTypes={title:l.a.element.isRequired,children:l.a.element.isRequired},(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&u.register(d,"APICreateProductBase","/home/jenkins/workspace/update-2/full/carbon-apimgt/carbon-apimgt-9.0.174.x-full/target/checkout/features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Create/Components/APICreateProductBase.jsx"),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&p(e)}).call(this,a(33)(e))},3983:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return L}));var r,n,i,o=a(0),l=a.n(o),c=a(20),s=a.n(c),u=a(71),p=a(165),d=a(4279),m=a(26),f=a(4333),b=a(4330),g=a(4331),y=a(1384),v=a(139),h=a(546),A=a(553),P=a(4301),E=a(848),C=a(907),S=a(1940);function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){O(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function O(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function L(e){var t=j(Object(o.useState)(0),2),a=t[0],r=t[1],n=e.history;var i=j(Object(o.useReducer)((function(e,t){var a,r=t.action,n=t.value;switch(r){case"type":case"inputValue":case"name":case"version":case"endpoint":case"context":case"policies":case"isFormValid":return w(w({},e),{},O({},r,n));case"inputType":return w(w({},e),{},(O(a={},r,n),O(a,"inputValue","url"===n?"":null),a));case"preSetAPI":return w(w({},e),{},{name:n.name.replace(/[&/\\#,+()$~%.'":*?<>{}\s]/g,""),version:n.version,context:n.context,endpoint:n.endpoints&&n.endpoints[0]});default:return e}}),{type:"ApiCreateOpenAPI",inputType:"url",inputValue:"",formValidity:!1}),2),c=i[0],s=i[1];function I(e){s({action:"isFormValid",value:e})}var x=j(Object(o.useState)(),2),L=x[0],k=x[1];return l.a.createElement(C.a,{title:l.a.createElement(l.a.Fragment,null,l.a.createElement(u.a,{variant:"h5"},l.a.createElement(m.a,{id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.heading",defaultMessage:[{type:0,value:"Create an API using an OpenAPI definition."}]})),l.a.createElement(u.a,{variant:"caption"},l.a.createElement(m.a,{id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.sub.heading",defaultMessage:[{type:0,value:"Create an API using an existing OpenAPI definition file or URL."}]})))},l.a.createElement(p.a,null,l.a.createElement(f.a,{alternativeLabel:!0,activeStep:0},l.a.createElement(b.a,null,l.a.createElement(g.a,null,l.a.createElement(m.a,{id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.wizard.one",defaultMessage:[{type:0,value:"Provide OpenAPI"}]}))),l.a.createElement(b.a,null,l.a.createElement(g.a,null,l.a.createElement(m.a,{id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.wizard.two",defaultMessage:[{type:0,value:"Create API"}]}))))),l.a.createElement(d.a,{container:!0,spacing:3},l.a.createElement(d.a,{item:!0,xs:12}),l.a.createElement(d.a,{item:!0,xs:1}),l.a.createElement(d.a,{item:!0,xs:11},0===a&&l.a.createElement(S.a,{onValidate:I,apiInputs:c,inputsDispatcher:s}),1===a&&l.a.createElement(E.a,{onValidate:I,onChange:function(e){var t=e.target,a=t.name,r=t.value;s({action:a,value:r})},api:c,isAPIProduct:!1})),l.a.createElement(d.a,{item:!0,xs:1}),l.a.createElement(d.a,{item:!0,xs:11},l.a.createElement(d.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:2},l.a.createElement(d.a,{item:!0},0===a&&l.a.createElement(v.b,{to:"/apis/"},l.a.createElement(y.a,null,l.a.createElement(m.a,{id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.cancel",defaultMessage:[{type:0,value:"Cancel"}]}))),1===a&&l.a.createElement(y.a,{onClick:function(){return r((function(e){return e-1}))}},"Back")),l.a.createElement(d.a,{item:!0},0===a&&l.a.createElement(y.a,{onClick:function(){return r((function(e){return e+1}))},variant:"contained",color:"primary",disabled:!c.isFormValid,id:"open-api-create-next-btn"},"Next"),1===a&&l.a.createElement(y.a,{variant:"contained",color:"primary",disabled:!c.isFormValid||L,onClick:function(){k(!0);var e=c.name,t=c.version,a=c.context,r=c.endpoint,i=c.policies,o=c.inputValue,l=c.inputType,s={name:e,version:t,context:a,policies:i};r&&(s.endpointConfig={endpoint_type:"http",sandbox_endpoints:{url:r},production_endpoints:{url:r}});var u=new h.a(s);("file"===l?u.importOpenAPIByFile(o):u.importOpenAPIByUrl(o)).then((function(e){A.a.info("API created successfully"),n.push("/apis/".concat(e.id,"/overview"))})).catch((function(e){e.response?A.a.error(e.response.body.description):A.a.error("Something went wrong while adding the API"),console.error(e)})).finally((function(){return k(!1)}))},id:"open-api-create-btn"},"Create"," ",L&&l.a.createElement(P.a,{size:24})))))))}(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(L,"useState{[wizardStep, setWizardStep](0)}\nuseReducer{[apiInputs, inputsDispatcher]({\n        type: 'ApiCreateOpenAPI',\n        inputType: 'url',\n        inputValue: '',\n        formValidity: false,\n    })}\nuseState{[isCreating, setCreating]}"),L.propTypes={history:s.a.shape({push:s.a.func}).isRequired},(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&n.register(L,"ApiCreateOpenAPI","/home/jenkins/workspace/update-2/full/carbon-apimgt/carbon-apimgt-9.0.174.x-full/target/checkout/features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Create/OpenAPI/ApiCreateOpenAPI.jsx"),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}).call(this,a(33)(e))},3984:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return D}));var r,n,i,o=a(0),l=a.n(o),c=a(546),s=a(20),u=a.n(s),p=a(71),d=a(165),m=a(4279),f=a(1508),b=a(26),g=a(4333),y=a(4330),v=a(4331),h=a(1384),A=a(139),P=a(1938),E=a(553),C=a(4301),S=a(848),I=a(907),w=a(1937);function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){x(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function D(e){var t=Object(f.a)(),a=L(Object(o.useState)(0),2),r=a[0],n=a[1],i=e.history,s=L(Object(o.useState)([]),2),u=s[0],O=s[1];Object(o.useEffect)((function(){c.a.policies("subscription").then((function(e){var a=e.body.list;0===a.length?E.a.info(t.formatMessage({id:"Apis.Create.WSDL.ApiCreateWSDL.error.policies.not.available",defaultMessage:[{type:0,value:"Throttling policies not available. Contact your administrator"}]})):a.filter((function(e){return"Unlimited"===e.name})).length>0?O(["Unlimited"]):O([a[0].name])}))}),[]);var k=L(Object(o.useReducer)((function(e,t){var a,r=t.action,n=t.value;switch(r){case"type":case"inputValue":case"name":case"version":case"endpoint":case"context":case"isFormValid":return j(j({},e),{},x({},r,n));case"inputType":return j(j({},e),{},(x(a={},r,n),x(a,"inputValue","url"===n?"":null),a));default:return e}}),{type:"SOAP",inputType:"url",inputValue:"",formValidity:!1,mode:"create"}),2),D=k[0],G=k[1];function M(e){G({action:"isFormValid",value:e})}var R=L(Object(o.useState)(),2),H=R[0],W=R[1];return l.a.createElement(I.a,{title:l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{variant:"h5"},l.a.createElement(b.a,{id:"Apis.Create.WSDL.ApiCreateWSDL.heading",defaultMessage:[{type:0,value:"Expose a SOAP Service as a REST API"}]})),l.a.createElement(p.a,{variant:"caption"},l.a.createElement(b.a,{id:"Apis.Create.WSDL.ApiCreateWSDL.sub.heading",defaultMessage:[{type:0,value:"Expose an existing SOAP service as a REST API by importing the WSDL of the SOAP service."}]})))},l.a.createElement(d.a,null,l.a.createElement(g.a,{alternativeLabel:!0,activeStep:r},l.a.createElement(y.a,null,l.a.createElement(v.a,null,"Provide WSDL")),l.a.createElement(y.a,null,l.a.createElement(v.a,null,"Create API")))),l.a.createElement(m.a,{container:!0,spacing:3},l.a.createElement(m.a,{item:!0,md:12}),l.a.createElement(m.a,{item:!0,md:1}),l.a.createElement(m.a,{item:!0,md:11},0===r&&l.a.createElement(w.a,{onValidate:M,apiInputs:D,inputsDispatcher:G}),1===r&&l.a.createElement(S.a,{onValidate:M,onChange:function(e){var t=e.target,a=t.name,r=t.value;G({action:a,value:r})},api:D,isAPIProduct:!1})),l.a.createElement(m.a,{item:!0,md:1}),l.a.createElement(m.a,{item:!0,md:9},l.a.createElement(m.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:2},l.a.createElement(m.a,{item:!0},0===r&&l.a.createElement(A.b,{to:"/apis/"},l.a.createElement(h.a,null,l.a.createElement(b.a,{id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.cancel",defaultMessage:[{type:0,value:"Cancel"}]}))),1===r&&l.a.createElement(h.a,{onClick:function(){return n((function(e){return e-1}))}},"Back")),l.a.createElement(m.a,{item:!0},0===r&&l.a.createElement(h.a,{onClick:function(){return n((function(e){return e+1}))},variant:"contained",color:"primary",disabled:!D.isFormValid},"Next"),1===r&&l.a.createElement(h.a,{variant:"contained",color:"primary",disabled:!D.isFormValid||H,onClick:function(){W(!0);var e=D.name,t=D.version,a=D.context,r=D.endpoint,n=D.type,o={name:e,version:t,context:a,policies:u};r&&(o.endpointConfig={endpoint_type:"SOAPTOREST"===n?"address":"http",sandbox_endpoints:{type:"SOAPTOREST"===n?"address":void 0,url:r},production_endpoints:{type:"SOAPTOREST"===n?"address":void 0,url:r}}),("url"===D.inputType?P.a.importByUrl(D.inputValue,o,D.type):P.a.importByFileOrArchive(D.inputValue,o,D.type)).then((function(e){E.a.info("API created successfully"),i.push("/apis/".concat(e.id,"/overview"))})).catch((function(e){e.response?E.a.error(e.response.body.description):E.a.error("Something went wrong while adding the API"),console.error(e)})).finally((function(){return W(!1)}))}},"Create"," ",H&&l.a.createElement(C.a,{size:24})))))))}(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(D,"useIntl{intl}\nuseState{[wizardStep, setWizardStep](0)}\nuseState{[policies, setPolicies]([])}\nuseEffect{}\nuseReducer{[apiInputs, inputsDispatcher]({\n        type: 'SOAP',\n        inputType: 'url',\n        inputValue: '',\n        formValidity: false,\n        mode: 'create',\n    })}\nuseState{[isCreating, setCreating]}",(function(){return[f.a]})),D.propTypes={history:u.a.shape({push:u.a.func}).isRequired},(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&n.register(D,"ApiCreateWSDL","/home/jenkins/workspace/update-2/full/carbon-apimgt/carbon-apimgt-9.0.174.x-full/target/checkout/features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Create/WSDL/ApiCreateWSDL.jsx"),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}).call(this,a(33)(e))},3985:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return k}));var r,n,i,o=a(0),l=a.n(o),c=a(20),s=a.n(c),u=a(71),p=a(165),d=a(4279),m=a(1508),f=a(26),b=a(4333),g=a(4330),y=a(4331),v=a(1384),h=a(139),A=a(546),P=a(553),E=a(4301),C=a(848),S=a(907),I=a(1942);function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){j(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function j(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return L(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function k(e){var t=Object(m.a)(),a=x(Object(o.useState)(0),2),r=a[0],n=a[1],i=e.history,c=x(Object(o.useState)([]),2),s=c[0],w=c[1];Object(o.useEffect)((function(){A.a.policies("subscription").then((function(e){var a=e.body.list;0===a.length?P.a.info(t.formatMessage({id:"Apis.Create.GraphQL.ApiCreateGraphQL.error.policies.not.available",defaultMessage:[{type:0,value:"Throttling policies not available. Contact your administrator"}]})):a.filter((function(e){return"Unlimited"===e.name})).length>0?w(["Unlimited"]):w([a[0].name])}))}),[]);var L=x(Object(o.useReducer)((function(e,t){var a,r=t.action,n=t.value;switch(r){case"type":case"inputValue":case"name":case"version":case"endpoint":case"context":case"isFormValid":return O(O({},e),{},j({},r,n));case"inputType":return O(O({},e),{},(j(a={},r,n),j(a,"inputValue","url"===n?"":null),a));case"graphQLInfo":return O(O({},e),{},j({},r,n));case"preSetAPI":return O(O({},e),{},{name:n.name.replace(/[&/\\#,+()$~%.'":*?<>{}\s]/g,""),version:n.version,context:n.context});default:return e}}),{type:"ApiCreateGraphQL",inputType:"file",inputValue:"",formValidity:!1}),2),k=L[0],D=L[1];function G(e){D({action:"isFormValid",value:e})}var M=x(Object(o.useState)(),2),R=M[0],H=M[1];return l.a.createElement(S.a,{title:l.a.createElement(l.a.Fragment,null,l.a.createElement(u.a,{variant:"h5"},l.a.createElement(f.a,{id:"Apis.Create.GraphQL.ApiCreateGraphQL.heading",defaultMessage:[{type:0,value:"Create an API using a GraphQL SDL definition"}]})),l.a.createElement(u.a,{variant:"caption"},l.a.createElement(f.a,{id:"Apis.Create.GraphQL.ApiCreateGraphQL.sub.heading",defaultMessage:[{type:0,value:"Create an API by importing an existing GraphQL SDL definition."}]})))},l.a.createElement(p.a,null,0===r&&l.a.createElement(b.a,{alternativeLabel:!0,activeStep:0},l.a.createElement(g.a,null,l.a.createElement(y.a,null,l.a.createElement(f.a,{id:"Apis.Create.GraphQL.ApiCreateGraphQL.wizard.one",defaultMessage:[{type:0,value:"Provide GraphQL"}]}))),l.a.createElement(g.a,null,l.a.createElement(y.a,null,l.a.createElement(f.a,{id:"Apis.Create.GraphQL.ApiCreateGraphQL.wizard.two",defaultMessage:[{type:0,value:"Create API"}]})))),1===r&&l.a.createElement(b.a,{alternativeLabel:!0,activeStep:1},l.a.createElement(g.a,null,l.a.createElement(y.a,null,l.a.createElement(f.a,{id:"Apis.Create.GraphQL.ApiCreateGraphQL.wizard.one",defaultMessage:[{type:0,value:"Provide GraphQL"}]}))),l.a.createElement(g.a,null,l.a.createElement(y.a,null,l.a.createElement(f.a,{id:"Apis.Create.GraphQL.ApiCreateGraphQL.wizard.two",defaultMessage:[{type:0,value:"Create API"}]}))))),l.a.createElement(d.a,{container:!0,spacing:3,style:{marginBottom:20}},l.a.createElement(d.a,{item:!0,md:12}),l.a.createElement(d.a,{item:!0,md:1}),l.a.createElement(d.a,{item:!0,md:11},0===r&&l.a.createElement(I.a,{onValidate:G,apiInputs:k,inputsDispatcher:D}),1===r&&l.a.createElement(C.a,{onValidate:G,onChange:function(e){var t=e.target,a=t.name,r=t.value;D({action:a,value:r})},api:k,isAPIProduct:!1})),l.a.createElement(d.a,{item:!0,md:1}),l.a.createElement(d.a,{item:!0,md:9},l.a.createElement(d.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:2},l.a.createElement(d.a,{item:!0},0===r&&l.a.createElement(h.b,{to:"/apis/"},l.a.createElement(v.a,null,l.a.createElement(f.a,{id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.cancel",defaultMessage:[{type:0,value:"Cancel"}]}))),1===r&&l.a.createElement(v.a,{onClick:function(){return n((function(e){return e-1}))}},l.a.createElement(f.a,{id:"Apis.Create.GraphQL.ApiCreateGraphQL.back",defaultMessage:[{type:0,value:"Back"}]}))),l.a.createElement(d.a,{item:!0},0===r&&l.a.createElement(v.a,{onClick:function(){return n((function(e){return e+1}))},variant:"contained",color:"primary",disabled:!k.isFormValid,"data-testid":"create-graphql-next-btn"},l.a.createElement(f.a,{id:"Apis.Create.GraphQL.ApiCreateGraphQL.next",defaultMessage:[{type:0,value:"Next"}]})),1===r&&l.a.createElement(v.a,{variant:"contained",color:"primary",disabled:!k.isFormValid||R,onClick:function(){var e;H(!0);var t=k.name,a=k.version,r=k.context,n=k.endpoint,o=k.implementationType,l=k.inputValue,c=k.graphQLInfo.operations,u={name:t,version:a,context:r,policies:s,operations:c};n&&(u.endpointConfig={endpoint_type:"http",sandbox_endpoints:{url:n},production_endpoints:{url:n}});var p=new A.a(u),d=(j(e={additionalProperties:JSON.stringify(u),implementationType:o},"file","file"),j(e,"file",l),e);p.importGraphQL(d).then((function(e){var a=e.obj.id;P.a.info("".concat(t," API created successfully")),i.push("/apis/".concat(a,"/overview"))})).catch((function(e){e.response?P.a.error(e.response.body.description):P.a.error("Something went wrong while adding the API"),console.error(e)})).finally((function(){return H(!1)}))},"data-testid":"itest-create-graphql-api-button"},l.a.createElement(f.a,{id:"Apis.Create.GraphQL.ApiCreateGraphQL.create",defaultMessage:[{type:0,value:"Create"}]})," ",R&&l.a.createElement(E.a,{size:24})))))))}(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(k,"useIntl{intl}\nuseState{[wizardStep, setWizardStep](0)}\nuseState{[policies, setPolicies]([])}\nuseEffect{}\nuseReducer{[apiInputs, inputsDispatcher]({\n        type: 'ApiCreateGraphQL',\n        inputType: 'file',\n        inputValue: '',\n        formValidity: false,\n    })}\nuseState{[isCreating, setCreating]}",(function(){return[m.a]})),k.propTypes={history:s.a.shape({push:s.a.func}).isRequired},(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&n.register(k,"ApiCreateGraphQL","/home/jenkins/workspace/update-2/full/carbon-apimgt/carbon-apimgt-9.0.174.x-full/target/checkout/features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Create/GraphQL/ApiCreateGraphQL.jsx"),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}).call(this,a(33)(e))},3986:function(e,t,a){"use strict";(function(e){var r,n=a(0),i=a.n(n),o=a(1943);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var l,c,s=function(){return i.a.createElement(o.a,{isWebSocket:!0})},u=s;t.a=u,(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(l.register(s,"ApiCreateWebSocket","/home/jenkins/workspace/update-2/full/carbon-apimgt/carbon-apimgt-9.0.174.x-full/target/checkout/features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Create/WebSocket/ApiCreateWebSocket.jsx"),l.register(u,"default","/home/jenkins/workspace/update-2/full/carbon-apimgt/carbon-apimgt-9.0.174.x-full/target/checkout/features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Create/WebSocket/ApiCreateWebSocket.jsx")),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)}).call(this,a(33)(e))},3987:function(e,t,a){"use strict";(function(e){var r,n=a(0),i=a.n(n),o=a(71),l=a(1508),c=a(26),s=a(16),u=a(4279),p=a(1384),d=a(139),m=a(1491),f=a(1500),b=a(1502),g=a(246),y=a(4301),v=a(546),h=a(553),A=a(907),P=a(680),E=a(848),C=a(628),S=a(78);function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){O(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function O(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);var L="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},k=Object(g.a)((function(e){return{mandatoryStar:{color:e.palette.error.main,marginLeft:e.spacing(.1)}}})),D=function e(t){var a=t.history,r=Object(l.a)(),g=Object(C.c)().settings,I=j(Object(n.useState)(null),2),x=I[0],L=I[1],D=j(Object(n.useState)(),2),G=D[0],M=D[1],R=j(Object(n.useState)(!1),2),H=R[0],W=R[1],V=j(Object(n.useState)(!1),2),T=V[0],F=V[1],B=j(Object(n.useState)(!1),2),U=B[0],N=B[1],Q=j(Object(n.useState)(!1),2),z=Q[0],_=Q[1],q=k(),$=j(Object(n.useState)([]),2),K=$[0],J=$[1],X=Object(s.useParams)().apiType;X&&(X=X.toUpperCase());var Y="WEBSUB"===X;Object(n.useEffect)((function(){v.a.asyncAPIPolicies().then((function(e){var t=e.body.list;0===t.length?h.a.info(r.formatMessage({id:"Apis.Create.Default.APICreateDefault.error.policies.not.available",defaultMessage:[{type:0,value:"Throttling policies not available. Contact your administrator"}]})):Y&&t.filter((function(e){return"AsyncWHUnlimited"===e.policyName})).length>0?J(["AsyncWHUnlimited"]):!Y&&t.filter((function(e){return"AsyncUnlimited"===e.policyName})).length>0?J(["AsyncUnlimited"]):J([t[0].policyName])}))}),[]);var Z={WebSocket:"WS",SSE:"SSE",WebSub:"WEBSUB"},ee=j(Object(n.useState)(!X||X===Z.WebSub),2),te=ee[0],ae=ee[1];var re=j(Object(n.useReducer)((function(e,t){var a=t.action,r=t.value;switch(a){case"name":case"version":case"context":case"endpoint":case"policies":case"isFormValid":return w(w({},e),{},O({},a,r));case"protocol":return ae(Z[r]===Z.WebSub),w(w({},e),{},O({},a,Z[r]));default:return e}}),{formValidity:!1}),2),ne=re[0],ie=re[1],oe=ne.name&&ne.context&&ne.version&&!G;function le(e){var t=e.target,a=t.name,r=t.value;ie({action:a,value:r})}function ce(){M(!0);var e=ne.name,t=ne.version,a=ne.context,r=ne.endpoint,n=ne.protocol,i={name:e,version:t,context:a,endpoint:r,type:X||n.toUpperCase(),policies:K},o="http";return(X&&"WS"===X.toUpperCase()||n&&"WS"===n.toUpperCase())&&(o="ws"),r&&(i.endpointConfig={endpoint_type:o,sandbox_endpoints:{url:r},production_endpoints:{url:r}}),new v.a(i).saveStreamingAPI().then((function(e){return h.a.info("API created successfully"),e})).catch((function(e){e.response?h.a.error(e.response.body.description):h.a.error("Something went wrong while adding the API"),console.error(e),W(!1)})).finally((function(){M(!1)})).finally((function(){return M(!1)}))}var se=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.a,{variant:"h5"},i.a.createElement(c.a,{id:"Apis.Create.StreamingAPI.APICreateStreamingAPI.api.heading",defaultMessage:[{type:0,value:"Create a Streaming API"}]})),i.a.createElement(o.a,{variant:"caption"},Y?i.a.createElement(c.a,{id:"Apis.Create.StreamingAPI.APICreateStreamingAPI.websub.api.sub.heading",defaultMessage:[{type:0,value:"Create an API by providing a Name, a Version and a Context"}]}):i.a.createElement(c.a,{id:"Apis.Create.StreamingAPI.APICreateStreamingAPI.api.sub.heading",defaultMessage:[{type:0,value:"Create an API by providing a Name, a Version, a Context and the Endpoint"}]})));return i.a.createElement(A.a,{title:se},i.a.createElement(u.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:3},x&&i.a.createElement(u.a,{item:!0,xs:11},i.a.createElement(P.a,{onClose:function(){return L(null)},disableActions:!0,dense:!0,paperProps:{elevation:1},type:"error",message:x})),i.a.createElement(u.a,{item:!0,xs:12}),i.a.createElement(u.a,{item:!0,md:1,xs:0}),i.a.createElement(u.a,{item:!0,md:11,xs:12},i.a.createElement(E.a,{onValidate:function(e){ie({action:"isFormValid",value:e})},onChange:le,api:ne,endpointPlaceholderText:"Streaming Provider",appendChildrenBeforeEndpoint:!0,hideEndpoint:te,isWebSocket:X&&X===Z.WebSocket||ne.protocol===Z.WebSocket},i.a.createElement(m.a,{fullWidth:!0,select:!0,label:i.a.createElement(i.a.Fragment,null,i.a.createElement(c.a,{id:"Apis.Create.streaming.Components.SelectPolicies.business.plans",defaultMessage:[{type:0,value:"Protocol"}]}),i.a.createElement("sup",{className:q.mandatoryStar},"*")),value:X?{WS:"WebSocket",SSE:"SSE",WEBSUB:"WebSub"}[X]:ne.protocol,disabled:X,name:"protocol",SelectProps:{multiple:!1,renderValue:function(e){return e}},margin:"normal",variant:"outlined",InputProps:{id:"itest-id-apipolicies-input"},onChange:le},[{displayName:"WebSocket",description:"WebSocket API"},{displayName:"WebSub",description:"WebHook API based on WebSub specification"},{displayName:"SSE",description:"Server-Sent Events"}].map((function(e){return i.a.createElement(f.a,{dense:!0,disableGutters:!1,value:e.displayName},i.a.createElement(b.a,{primary:e.displayName,secondary:e.description}))}))))),i.a.createElement(u.a,{item:!0,md:1,xs:0}),i.a.createElement(u.a,{item:!0,md:11,xs:12},i.a.createElement(u.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:2},i.a.createElement(u.a,{item:!0},i.a.createElement(p.a,{variant:"contained",color:"primary",disabled:!(oe&&ne.isFormValid),onClick:function(){ce().then((function(e){a.push("/apis/".concat(e.id,"/overview"))}))},"data-testid":"itest-create-streaming-api-button"},"Create"," ",G&&!z&&i.a.createElement(y.a,{size:24}))),!S.a.isNotPublisher()&&i.a.createElement(u.a,{item:!0},i.a.createElement(p.a,{id:"itest-id-apicreatedefault-createnpublish",variant:"contained",color:"primary",disabled:U||T||!oe||!ne.isFormValid,onClick:function(){var t=new v.a;_(!0),ce().then((function(n){F(!0);t.createRevision(n.id,{description:"Initial Revision"}).then((function(i){var o=i.body.id;h.a.info("API Revision created successfully"),F(!1);var l=g.environment.map((function(e){return e.name})),c=[],s=function(e){var t=g.environment.find((function(t){return t.name===e&&t.vhosts.length>0}));return t&&t.vhosts[0].host};l&&l.length>0&&(l.includes("Default")&&s("Default")?c.push({name:"Default",displayOnDevportal:!0,vhost:s("Default")}):s(l[0])&&c.push({name:l[0],displayOnDevportal:!0,vhost:s(l[0])})),N(!0),t.deployRevision(n.id,o,c).then((function(){h.a.info("API Revision Deployed Successfully"),N(!1),W(!0),n.publish().then((function(t){t.body.workflowStatus===e.WORKFLOW_STATUS.CREATED?h.a.info(r.formatMessage({id:"Apis.Create.Default.APICreateDefault.success.publishStatus",defaultMessage:[{type:0,value:"Lifecycle state change request has been sent"}]})):h.a.info(r.formatMessage({id:"Apis.Create.Default.APICreateDefault.success.otherStatus",defaultMessage:[{type:0,value:"API updated successfully"}]})),a.push("/apis/".concat(n.id,"/overview"))})).catch((function(e){e.response?(h.a.error(e.response.body.description),L(e.response.body)):(h.a.error(r.formatMessage({id:"Apis.Create.Default.APICreateDefault.error.errorMessage.publish",defaultMessage:[{type:0,value:"Something went wrong while publishing the API"}]})),L("Something went wrong while publishing the API")),console.error(e)})).finally((function(){W(!1),_(!1)}))})).catch((function(e){e.response?(h.a.error(e.response.body.description),L(e.response.body)):(h.a.error(r.formatMessage({id:"Apis.Create.Default.APICreateDefault.error.errorMessage.deploy.revision",defaultMessage:[{type:0,value:"Something went wrong while deploying the API Revision"}]})),L("Something went wrong while deploying the API Revision")),console.error(e)})).finally((function(){N(!1)}))})).catch((function(e){e.response?(h.a.error(e.response.body.description),L(e.response.body)):(h.a.error(r.formatMessage({id:"Apis.Create.Default.APICreateDefault.error.errorMessage.create.revision",defaultMessage:[{type:0,value:"Something went wrong while creating the API Revision"}]})),L("Something went wrong while creating the API Revision")),console.error(e)})).finally((function(){F(!1)}))}))}},!H&&!T&&!U&&"Create & Publish",(H||T||U)&&i.a.createElement(y.a,{size:24}),G&&H&&"Creating API . . .",!G&&T&&!U&&"Creating Revision . . .",!G&&H&&!T&&!U&&"Publishing API . . .",!G&&H&&!T&&U&&"Deploying Revision . . .")),i.a.createElement(u.a,{item:!0},i.a.createElement(d.b,{to:"/apis/"},i.a.createElement(p.a,{variant:"text"},i.a.createElement(c.a,{id:"Apis.Create.Default.APICreateDefault.cancel",defaultMessage:[{type:0,value:"Cancel"}]}))))))))};L(D,"useIntl{intl}\nuseAppContext{{ settings }}\nuseState{[pageError, setPageError](null)}\nuseState{[isCreating, setIsCreating]}\nuseState{[isPublishing, setIsPublishing](false)}\nuseState{[isRevisioning, setIsRevisioning](false)}\nuseState{[isDeploying, setIsDeploying](false)}\nuseState{[isPublishButtonClicked, setIsPublishButtonClicked](false)}\nuseStyles{classes}\nuseState{[policies, setPolicies]([])}\nuseParams{{ apiType }}\nuseEffect{}\nuseState{[hideEndpoint, setHideEndpoint](!apiType || apiType === protocolKeys.WebSub)}\nuseReducer{[apiInputs, inputsDispatcher]({\n        formValidity: false,\n    })}",(function(){return[l.a,C.c,k,s.useParams]})),D.WORKFLOW_STATUS={CREATED:"CREATED"};var G,M,R=Object(s.withRouter)(D);t.a=R,(G="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(G.register(k,"useStyles","/home/jenkins/workspace/update-2/full/carbon-apimgt/carbon-apimgt-9.0.174.x-full/target/checkout/features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Create/StreamingAPI/APICreateStreamingAPI.jsx"),G.register(D,"APICreateStreamingAPI","/home/jenkins/workspace/update-2/full/carbon-apimgt/carbon-apimgt-9.0.174.x-full/target/checkout/features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Create/StreamingAPI/APICreateStreamingAPI.jsx"),G.register(R,"default","/home/jenkins/workspace/update-2/full/carbon-apimgt/carbon-apimgt-9.0.174.x-full/target/checkout/features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Create/StreamingAPI/APICreateStreamingAPI.jsx")),(M="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&M(e)}).call(this,a(33)(e))},3988:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return D}));var r,n=a(0),i=a.n(n),o=a(20),l=a.n(o),c=a(71),s=a(165),u=a(4279),p=a(26),d=a(4333),m=a(4330),f=a(4331),b=a(1384),g=a(139),y=a(546),v=a(553),h=a(4301),A=a(848),P=a(907),E=a(1500),C=a(1502),S=a(1491),I=a(246),w=a(1939);function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){x(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function D(e){var t=L(Object(n.useState)(0),2),a=t[0],r=t[1],o=e.history,l=R(),I=L(Object(n.useState)(!0),2),O=I[0],k=I[1];var D=L(Object(n.useReducer)((function(e,t){var a,r=t.action,n=t.value;switch(r){case"type":case"inputValue":case"name":case"version":case"endpoint":case"protocol":case"context":case"policies":case"isFormValid":return j(j({},e),{},x({},r,n));case"inputType":return j(j({},e),{},(x(a={},r,n),x(a,"inputValue","url"===n?"":null),a));case"preSetAPI":return j(j({},e),{},{name:n.name.replace(/[&/\\#,+()$~%.'":*?<>{}\s]/g,""),version:n.version,context:n.context,endpoint:n.endpoints&&n.endpoints[0]});default:return e}}),{type:"ApiCreateAsyncAPI",inputType:"url",inputValue:"",formValidity:!1}),2),G=D[0],M=D[1],H={WebSocket:"WS",SSE:"SSE",WebSub:"WEBSUB"};function W(e){M({action:"isFormValid",value:e})}var V=L(Object(n.useState)(),2),T=V[0],F=V[1];return i.a.createElement(P.a,{title:i.a.createElement(i.a.Fragment,null,i.a.createElement(c.a,{variant:"h5"},i.a.createElement(p.a,{id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.heading",defaultMessage:[{type:0,value:"Create an API using an AsyncAPI definition."}]})),i.a.createElement(c.a,{variant:"caption"},i.a.createElement(p.a,{id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.sub.heading",defaultMessage:[{type:0,value:"Create an API using an existing AsyncAPI definition file or URL."}]})))},i.a.createElement(s.a,null,i.a.createElement(d.a,{alternativeLabel:!0,activeStep:0},i.a.createElement(m.a,null,i.a.createElement(f.a,null,i.a.createElement(p.a,{id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.wizard.one",defaultMessage:[{type:0,value:"Provide AsyncAPI"}]}))),i.a.createElement(m.a,null,i.a.createElement(f.a,null,i.a.createElement(p.a,{id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.wizard.two",defaultMessage:[{type:0,value:"Create API"}]}))))),i.a.createElement(u.a,{container:!0,spacing:3},i.a.createElement(u.a,{item:!0,xs:12}),i.a.createElement(u.a,{item:!0,xs:1}),i.a.createElement(u.a,{item:!0,xs:11},0===a&&i.a.createElement(w.a,{onValidate:W,apiInputs:G,inputsDispatcher:M}),1===a&&i.a.createElement(A.a,{onValidate:W,onChange:function(e){var t=e.target,a=t.name,r=t.value;M({action:a,value:r})},api:G,isAPIProduct:!1,hideEndpoint:O,endpointPlaceholderText:"Streaming Provider",appendChildrenBeforeEndpoint:!0},i.a.createElement(S.a,{fullWidth:!0,select:!0,label:i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a,{id:"Apis.Create.asyncAPI.Components.SelectPolicies.business.plans",defaultMessage:[{type:0,value:"Protocol"}]}),i.a.createElement("sup",{className:l.mandatoryStar},"*")),value:G.protocol,name:"protocol",SelectProps:{multiple:!1,renderValue:function(e){return e}},margin:"normal",variant:"outlined",InputProps:{id:"itest-id-apipolicies-input"},onChange:function(e){var t=e.target,a=t.name,r=t.value;k("WebSub"===r),M({action:a,value:r})}},[{name:"ws",displayName:"WebSocket",description:"WebSocket API"},{name:"websub",displayName:"WebSub",description:"WebHook API based on WebSub specification"},{name:"sse",displayName:"SSE",description:"Server-Sent Events"}].map((function(e){return i.a.createElement(E.a,{dense:!0,disableGutters:!1,id:e.name,key:e.name,value:e.displayName},i.a.createElement(C.a,{primary:e.displayName,secondary:e.description}))}))))),i.a.createElement(u.a,{item:!0,xs:1}),i.a.createElement(u.a,{item:!0,xs:11},i.a.createElement(u.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:2},i.a.createElement(u.a,{item:!0},0===a&&i.a.createElement(g.b,{to:"/apis/"},i.a.createElement(b.a,null,i.a.createElement(p.a,{id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.cancel",defaultMessage:[{type:0,value:"Cancel"}]}))),1===a&&i.a.createElement(b.a,{onClick:function(){return r((function(e){return e-1}))}},"Back")),i.a.createElement(u.a,{item:!0},0===a&&i.a.createElement(b.a,{onClick:function(){return r((function(e){return e+1}))},variant:"contained",color:"primary",disabled:!G.isFormValid},"Next"),1===a&&i.a.createElement(b.a,{variant:"contained",color:"primary",disabled:!G.isFormValid||T,onClick:function(){F(!0);var e=G.name,t=G.version,a=G.context,r=G.endpoint,n=G.policies,i=G.inputValue,l=G.inputType,c=G.protocol,s={name:e,version:t,context:a,policies:n,type:H[c]};r&&(s.endpointConfig={endpoint_type:"http",sandbox_endpoints:{url:r},production_endpoints:{url:r}});var u=new y.a(s);("file"===l?u.importAsyncAPIByFile(i):u.importAsyncAPIByUrl(i)).then((function(e){v.a.info("API created successfully"),o.push("/apis/".concat(e.id,"/overview"))})).catch((function(e){e.response?v.a.error(e.response.body.description):v.a.error("Something went wrong while adding the API"),console.error(e)})).finally((function(){return F(!1)}))}},"Create"," ",T&&i.a.createElement(h.a,{size:24})))))))}(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(D,"useState{[wizardStep, setWizardStep](0)}\nuseStyles{classes}\nuseState{[hideEndpoint, setHideEndpoint](true)}\nuseReducer{[apiInputs, inputsDispatcher]({\n        type: 'ApiCreateAsyncAPI',\n        inputType: 'url',\n        inputValue: '',\n        formValidity: false,\n    })}\nuseState{[isCreating, setCreating]}",(function(){return[R]})),D.propTypes={history:l.a.shape({push:l.a.func}).isRequired};var G,M,R=Object(I.a)((function(e){return{mandatoryStar:{color:e.palette.error.main,marginLeft:e.spacing(.1)}}}));(G="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(G.register(D,"ApiCreateAsyncAPI","/home/jenkins/workspace/update-2/full/carbon-apimgt/carbon-apimgt-9.0.174.x-full/target/checkout/features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Create/AsyncAPI/ApiCreateAsyncAPI.jsx"),G.register(R,"useStyles","/home/jenkins/workspace/update-2/full/carbon-apimgt/carbon-apimgt-9.0.174.x-full/target/checkout/features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Create/AsyncAPI/ApiCreateAsyncAPI.jsx")),(M="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&M(e)}).call(this,a(33)(e))},848:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return M}));var r,n=a(0),i=a.n(n),o=a(20),l=a.n(o),c=a(1491),s=a(4279),u=a(4304),p=a(1485),d=a(4302),m=a(4301),f=a(2011),b=a(71),g=a(246),y=a(26),v=a(752),h=a.n(v),A=a(638),P=a(546),E=a(78);function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){I(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function I(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);var j,x,L="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},k=Object(g.a)((function(e){return{mandatoryStar:{color:e.palette.error.main,marginLeft:e.spacing(.1)},helperTextContext:{"& p":{textOverflow:"ellipsis",width:400,display:"block",whiteSpace:"nowrap",overflow:"hidden"}},endpointValidChip:{color:"green",border:"1px solid green"},endpointInvalidChip:{color:"#ffd53a",border:"1px solid #ffd53a"},endpointErrorChip:{color:"red",border:"1px solid red"},iconButton:{padding:e.spacing(1)},iconButtonValid:{padding:e.spacing(1),color:h.a[500]}}}));function D(e){var t=e.context,a=e.version,r="{context}/{version}";return t&&(r=t,t.indexOf("{version}")<0&&(r=t+"/{version}")),a&&(r=r.replace("{version}",a)),r}function G(e,t){var a,r=E.a.getUser();r.name&&-1!==r.name.indexOf("@")&&(a=r.name.split("@")[r.name.split("@").length-1]);var n=e.startsWith("/")?e.toLowerCase():"/"+e.toLowerCase();return null!=a&&"carbon.super"!==a&&(n="/t/"+a+n.toLowerCase()),void 0!==t.find((function(e){return e.context.toLowerCase()===n.toLowerCase()}))}function M(e){var t=e.onChange,a=e.onValidate,r=e.api,o=e.isAPIProduct,l=e.isWebSocket,g=e.children,v=e.appendChildrenBeforeEndpoint,h=e.hideEndpoint,E=k(),C=w(Object(n.useState)({}),2),I=C[0],O=C[1],j=w(Object(n.useState)(),2),x=j[0],L=j[1],M=w(Object(n.useState)(""),2),R=M[0],H=M[1],W=w(Object(n.useState)(!1),2),V=W[0],T=W[1],F=w(Object(n.useState)(!1),2),B=F[0],U=F[1];Object(n.useEffect)((function(){a(Boolean(r.name)&&(o||Boolean(r.version))&&Boolean(r.context))}),[]);var N,Q,z,_=function(e){var t=Object.entries(e).length>0&&Object.entries(e).map((function(e){var t=w(e,2)[1];return null==t})).reduce((function(e,t){return e&&t}));t=t&&Boolean(r.name)&&(o||Boolean(r.version))&&Boolean(r.context),a(t,I),O(e)};function q(e,t){switch(e){case"name":var a=A.a.apiName.required().validate(t,{abortEarly:!1}).error;null===a?A.a.apiParameter.validate(e+":"+t).then((function(e){e.body.list.length>0&&t.toLowerCase()===e.body.list[0].name.toLowerCase()?_(S(S({},I),{},{name:{details:[{message:"Name "+t+" already exists"}]}})):_(S(S({},I),{},{name:a}))})):_(S(S({},I),{},{name:a}));break;case"context":var r=A.a.apiContext.required().validate(t,{abortEarly:!1}).error,n=t.startsWith("/")?t:"/"+t;null===r?A.a.apiParameter.validate(e+":"+n).then((function(e){var a=e.body.list.length;a>0&&G(t,e.body.list)?_(S(S({},I),{},{context:{details:[{message:n+" context already exists"}]}})):a>0&&G(t,e.body.list)?_(S(S({},I),{},{context:{details:[{message:n+" dynamic context already exists"}]}})):_(S(S({},I),{},{context:r,version:null}))})):_(S(S({},I),{},{context:r}));break;case"version":var i=A.a.apiVersion.required().validate(t).error;_(S(S({},I),{},{version:i}));break;case"endpoint":if(l&&t&&t.length>0){var o=A.a.wsUrl.validate(t).error;_(S(S({},I),{},{endpointURL:o}))}}}return i.a.createElement(s.a,{item:!0,md:11},i.a.createElement("form",{noValidate:!0,autoComplete:"off"},i.a.createElement(c.a,{autoFocus:!0,fullWidth:!0,id:"api-name",error:I.name,label:i.a.createElement(i.a.Fragment,null,i.a.createElement(y.a,{id:"Apis.Create.Components.DefaultAPIForm.name",defaultMessage:[{type:0,value:"Name"}]}),i.a.createElement("sup",{className:E.mandatoryStar},"*")),helperText:I.name&&I.name.details.map((function(e,t){return i.a.createElement("div",{style:{marginTop:0!==t&&"10px"}},e.message)})),value:r.name,name:"name",onChange:t,InputProps:{id:"itest-id-apiname-input",onBlur:function(e){q("name",e.target.value)}},margin:"normal",variant:"outlined"}),i.a.createElement(s.a,{container:!0,spacing:2},o?i.a.createElement(i.a.Fragment,null,i.a.createElement(s.a,{item:!0,md:12},i.a.createElement(c.a,{fullWidth:!0,id:"context",error:I.context,label:i.a.createElement(i.a.Fragment,null,i.a.createElement(y.a,{id:"Apis.Create.Components.DefaultAPIForm.api.product.context",defaultMessage:[{type:0,value:"Context"}]}),i.a.createElement("sup",{className:E.mandatoryStar},"*")),name:"context",value:r.context,onChange:t,InputProps:{onBlur:function(e){q("context",e.target.value)}},helperText:I.context&&I.context.details.map((function(e,t){return i.a.createElement("div",{style:{marginTop:0!==t&&"10px"}},e.message)}))||"API Product will be exposed in ".concat(D(r)," context at the gateway"),margin:"normal",variant:"outlined"}))):i.a.createElement(i.a.Fragment,null,i.a.createElement(s.a,{item:!0,md:8,xs:6},i.a.createElement(c.a,{fullWidth:!0,id:"context",error:I.context,label:i.a.createElement(i.a.Fragment,null,i.a.createElement(y.a,{id:"Apis.Create.Components.DefaultAPIForm.api.context",defaultMessage:[{type:0,value:"Context"}]}),i.a.createElement("sup",{className:E.mandatoryStar},"*")),name:"context",value:r.context,onChange:t,InputProps:{id:"itest-id-apicontext-input",onBlur:function(e){q("context",e.target.value)}},helperText:I.context&&I.context.details.map((function(e,t){return i.a.createElement("div",{style:{marginTop:0!==t&&"10px"}},e.message)}))||"API will be exposed in ".concat(D(r)," context at the gateway"),classes:{root:E.helperTextContext},margin:"normal",variant:"outlined"})),i.a.createElement(s.a,{item:!0,md:4,xs:6},i.a.createElement(c.a,{fullWidth:!0,id:"version",error:I.version,label:i.a.createElement(i.a.Fragment,null,i.a.createElement(y.a,{id:"Apis.Create.Components.DefaultAPIForm.version",defaultMessage:[{type:0,value:"Version"}]}),i.a.createElement("sup",{className:E.mandatoryStar},"*")),name:"version",value:r.version,onChange:t,InputProps:{id:"itest-id-apiversion-input",onBlur:function(e){q("version",e.target.value)}},helperText:I.version&&I.version.message,margin:"normal",variant:"outlined"})))),v&&!!g&&g,!o&&!h&&i.a.createElement(c.a,{fullWidth:!0,id:"itest-id-apiendpoint-input",label:"Endpoint",name:"endpoint",value:r.endpoint,onChange:t,helperText:I.endpointURL&&I.endpointURL.details.map((function(e,t){return i.a.createElement("div",{style:{marginTop:0!==t&&"10px"}},e.message)})),error:I.endpointURL,margin:"normal",variant:"outlined",InputProps:{onBlur:function(e){q("endpoint",e.target.value)},endAdornment:i.a.createElement(u.a,{position:"end"},R&&i.a.createElement(f.a,{label:R,className:x?E.endpointValidChip:(N=B,Q=E.endpointErrorChip,z=E.endpointInvalidChip,N?Q:z),variant:"outlined"}),!l&&i.a.createElement(p.a,{className:x?E.iconButtonValid:E.iconButton,"aria-label":"TestEndpoint",onClick:function(){return e=r.endpoint,T(!0),void(new P.a).testEndpoint(e).then((function(e){null!==e.body.error?(H(e.body.error),U(!0)):(H(e.body.statusCode+" "+e.body.statusMessage),U(!1)),e.body.statusCode>=200&&e.body.statusCode<300?(L(!0),U(!1)):L(!1)})).finally((function(){T(!1)}));var e},disabled:V},V?i.a.createElement(m.a,{size:20}):i.a.createElement(d.a,null,"check_circle")))}}),!v&&!!g&&g),i.a.createElement(s.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center"},i.a.createElement(s.a,{item:!0},i.a.createElement(b.a,{variant:"caption",display:"block",gutterBottom:!0},i.a.createElement("sup",{style:{color:"red"}},"*")," ","Mandatory fields"))))}L(M,"useStyles{classes}\nuseState{[validity, setValidity]({})}\nuseState{[isEndpointValid, setIsEndpointValid]}\nuseState{[statusCode, setStatusCode]('')}\nuseState{[isUpdating, setUpdating](false)}\nuseState{[isErrorCode, setIsErrorCode](false)}\nuseEffect{}",(function(){return[k]})),M.defaultProps={onValidate:function(){},api:{},isWebSocket:!1},M.propTypes={api:l.a.shape({}),isAPIProduct:l.a.shape({}).isRequired,isWebSocket:l.a.shape({}),onChange:l.a.func.isRequired,onValidate:l.a.func},(j="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(j.register(k,"useStyles","/home/jenkins/workspace/update-2/full/carbon-apimgt/carbon-apimgt-9.0.174.x-full/target/checkout/features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Create/Components/DefaultAPIForm.jsx"),j.register(D,"actualContext","/home/jenkins/workspace/update-2/full/carbon-apimgt/carbon-apimgt-9.0.174.x-full/target/checkout/features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Create/Components/DefaultAPIForm.jsx"),j.register(G,"checkContext","/home/jenkins/workspace/update-2/full/carbon-apimgt/carbon-apimgt-9.0.174.x-full/target/checkout/features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Create/Components/DefaultAPIForm.jsx"),j.register(M,"DefaultAPIForm","/home/jenkins/workspace/update-2/full/carbon-apimgt/carbon-apimgt-9.0.174.x-full/target/checkout/features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Create/Components/DefaultAPIForm.jsx")),(x="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&x(e)}).call(this,a(33)(e))},907:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return d}));var r,n=a(0),i=a.n(n),o=a(20),l=a.n(o),c=a(288),s=a(4279);(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);var u,p;"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function d(e){var t=e.title,a=e.children;return i.a.createElement(s.a,{container:!0,spacing:3},i.a.createElement(s.a,{item:!0,xs:12}),i.a.createElement(s.a,{item:!0,sm:0,md:3}),i.a.createElement(s.a,{item:!0,sm:12,md:6},i.a.createElement(s.a,{container:!0,spacing:5},i.a.createElement(s.a,{item:!0,md:12},t),i.a.createElement(s.a,{item:!0,xs:12,md:12},i.a.createElement(c.a,{elevation:0},a)))))}d.propTypes={title:l.a.element.isRequired,children:l.a.element.isRequired},(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&u.register(d,"APICreateBase","/home/jenkins/workspace/update-2/full/carbon-apimgt/carbon-apimgt-9.0.174.x-full/target/checkout/features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Create/Components/APICreateBase.jsx"),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&p(e)}).call(this,a(33)(e))}}]);
//# sourceMappingURL=APICreateRoutes.a9bbe6f9bfddadb162a5.bundle.js.map